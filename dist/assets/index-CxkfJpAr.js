const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/page-admin-CwJvEO2m.js","assets/vendor-DjGBFEeb.js","assets/page-Login-BicjLTnC.js","assets/page-About-C9AEn_cr.js","assets/page-MapaPage-CmIl7tuY.js","assets/page-DemoMapaTestemunhas-DGvz_qiH.js","assets/page-Profile-Hyp4xwlb.js","assets/page-PortalTitular-BP0o5ubO.js","assets/page-ReportDemo-oW25uBYe.js","assets/page-super-admin-Ljo3RnYj.js","assets/page-AppHome-DeR1Jhr4.js","assets/page-settings-BZPyOZyW.js","assets/page-PublicHome-wjnJRvfi.js","assets/page-NotFound-DsZTRAEd.js","assets/page-Beta-1YH6RFOI.js","assets/page-Reset-4XYU1JDi.js","assets/page-ResetConfirm-BBpX0UDO.js","assets/reset-password-Cgh-0q-4.js","assets/page-VerifyOtp-QLGJJPs2.js","assets/page-TwoFactorSetup-D_mNiQPr.js","assets/page-TemplatePage-L4pfnlQy.js","assets/page-PrivacyPolicy-BZkPInK4.js","assets/page-TermsOfUse-CQVFsDmp.js","assets/page-LGPD-DMMEygey.js","assets/page-ServerError-Dxe7lLp9.js","assets/page-Status-CLGPCcKF.js"])))=>i.map(i=>d[i]);
import{O as ie,B as v,s as X,t as L,n as q,o as G,p as J,Q as ce,v as le,u as de,r as ue,k as C,a as me,_ as l,R as pe,T as he,U as xe}from"./page-About-C9AEn_cr.js";import{r,j as e,u as Q,ag as fe,ad as ge,cS as je,cT as _e,L as Y,X as ve,aq as ye,bu as Ee,cU as be,cV as we,W as Ae,cW as Pe,cX as Ne,cY as Oe,cZ as R,c_ as i,cN as A,cD as Ce,c$ as Te}from"./vendor-DjGBFEeb.js";import{b as Le,c as Re,m as D,M as De,D as Se,d as ze,A as Ie}from"./page-ReportDemo-oW25uBYe.js";import{T as ke}from"./page-PublicHome-wjnJRvfi.js";import{$ as Ve,f as Z,e as T,k as Me,j as Fe,l as h,o as $e,p as Be}from"./page-Login-BicjLTnC.js";import{D as He,n as Ue,o as We,p as Ke,Z as Xe,e as S,R as qe,A as Ge,g as Je,h as Qe,i as Ye,j as Ze,k as et,m as tt,T as st}from"./page-MapaPage-CmIl7tuY.js";import rt from"./page-ServerError-Dxe7lLp9.js";import{P as at,a as nt,b as ot}from"./page-DemoMapaTestemunhas-DGvz_qiH.js";import"./page-PortalTitular-BP0o5ubO.js";import"./page-Profile-Hyp4xwlb.js";import"./page-NotFound-DsZTRAEd.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function a(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(n){if(n.ep)return;n.ep=!0;const c=a(n);fetch(n.href,c)}})();var z=["light","dark"],it="(prefers-color-scheme: dark)",ct=r.createContext(void 0),lt={setTheme:t=>{},themes:[]},dt=()=>{var t;return(t=r.useContext(ct))!=null?t:lt};r.memo(({forcedTheme:t,storageKey:s,attribute:a,enableSystem:o,enableColorScheme:n,defaultTheme:c,value:u,attrs:p,nonce:m})=>{let d=c==="system",f=a==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${p.map(_=>`'${_}'`).join(",")})`};`:`var d=document.documentElement,n='${a}',s='setAttribute';`,E=n?z.includes(c)&&c?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${c}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",j=(_,w=!1,x=!0)=>{let y=u?u[_]:_,P=w?_+"|| ''":`'${y}'`,N="";return n&&x&&!w&&z.includes(_)&&(N+=`d.style.colorScheme = '${_}';`),a==="class"?w||y?N+=`c.add(${P})`:N+="null":y&&(N+=`d[s](n,${P})`),N},b=t?`!function(){${f}${j(t)}}()`:o?`!function(){try{${f}var e=localStorage.getItem('${s}');if('system'===e||(!e&&${d})){var t='${it}',m=window.matchMedia(t);if(m.media!==t||m.matches){${j("dark")}}else{${j("light")}}}else if(e){${u?`var x=${JSON.stringify(u)};`:""}${j(u?"x[e]":"e",!0)}}${d?"":"else{"+j(c,!1,!1)+"}"}${E}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${s}');if(e){${u?`var x=${JSON.stringify(u)};`:""}${j(u?"x[e]":"e",!0)}}else{${j(c,!1,!1)};}${E}}catch(t){}}();`;return r.createElement("script",{nonce:m,dangerouslySetInnerHTML:{__html:b}})});const ut=({...t})=>{const{theme:s="system"}=dt();return e.jsx(Ve,{theme:s,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function mt(){const{open:t,setOpen:s,preferences:a,save:o}=ie(),[n,c]=r.useState(!1),[u,p]=r.useState(!1);r.useEffect(()=>{a?(c(a.analytics),p(a.ads)):(c(!1),p(!1))},[a,t]);const m=j=>{o(j),s(!1)},d=()=>m({analytics:!0,ads:!0}),f=()=>m({analytics:!1,ads:!1}),E=()=>m({analytics:n,ads:u});return e.jsx(He,{open:t,onOpenChange:s,children:e.jsxs(Ue,{role:"dialog","aria-labelledby":"consent-title","aria-describedby":"consent-desc",className:"max-w-[440px] md:max-w-[480px] p-4 md:p-5 rounded-2xl",children:[e.jsxs(We,{children:[e.jsx(Ke,{id:"consent-title",className:"text-base md:text-lg",children:"Controle como usamos seus dados"}),e.jsx(Xe,{id:"consent-desc",className:"text-sm leading-snug",children:"Usamos cookies essenciais para o site funcionar. Com sua permissão, também usamos dados para Medição e Publicidade. Você pode aceitar, rejeitar ou personalizar."})]}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"text-sm leading-snug",children:[e.jsx("p",{className:"font-medium",children:"Essenciais"}),e.jsx("p",{className:"text-muted-foreground",children:"Necessários para segurança e navegação. Não usados para marketing."})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Sempre ativo"})]}),e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"text-sm leading-snug",children:[e.jsx("p",{className:"font-medium",children:"Medição"}),e.jsx("p",{className:"text-muted-foreground",children:"Métricas para melhorar sua experiência."})]}),e.jsx(S,{className:"origin-right scale-90",checked:n,onCheckedChange:c,"aria-label":"Ativar Medição"})]}),e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"text-sm leading-snug",children:[e.jsx("p",{className:"font-medium",children:"Publicidade"}),e.jsx("p",{className:"text-muted-foreground",children:"Anúncios relevantes e medição de campanhas."})]}),e.jsx(S,{className:"origin-right scale-90",checked:u,onCheckedChange:p,"aria-label":"Ativar Publicidade"})]})]}),e.jsxs("div",{className:"sticky bottom-0 mt-3 -mx-4 md:-mx-5 px-4 md:px-5 pt-3 border-t flex items-center justify-between gap-2",children:[e.jsx(v,{variant:"outline",className:"w-full",onClick:f,children:"Rejeitar tudo"}),e.jsx(v,{variant:"ghost",className:"w-full",onClick:E,children:"Salvar preferências"}),e.jsx(v,{className:"w-full",onClick:d,children:"Aceitar tudo"})]}),e.jsx("div",{className:"mt-3 text-center text-sm",children:e.jsx("a",{href:"/docs/privacidade",target:"_blank",rel:"noopener noreferrer",className:"underline underline-offset-4",children:"Política de Privacidade"})})]})})}function pt({children:t}){const s=Q();return r.useEffect(()=>{const{data:a}=X.auth.onAuthStateChange(o=>{o==="PASSWORD_RECOVERY"&&s("/reset-password")});return()=>{a.subscription.unsubscribe()}},[s]),e.jsx(e.Fragment,{children:t})}class ht extends r.Component{constructor(s){super(s),this.state={hasError:!1,errorType:"unknown"}}static getDerivedStateFromError(s){const a=s.message.includes("organization")?"organization":s.message.includes("data")||s.message.includes("fetch")?"data":"unknown";return{hasError:!0,error:s,errorType:a}}componentDidCatch(s,a){Z("Organization context error",{error:s.message,stack:s.stack,componentStack:a.componentStack,errorType:this.state.errorType},"OrganizationErrorBoundary")}handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorType:"unknown"}),this.props.onRetry?this.props.onRetry():window.location.reload()};render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const s={organization:{title:"Erro ao Carregar Organização",description:"Não foi possível carregar os dados da sua organização. Verifique sua conexão e tente novamente."},data:{title:"Erro ao Carregar Dados",description:"Houve um problema ao carregar os dados. Isso pode ser temporário."},unknown:{title:"Erro Inesperado",description:"Algo deu errado. Tente recarregar a página."}},{title:a,description:o}=s[this.state.errorType];return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-card rounded-lg shadow-lg p-6 text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(fe,{className:"h-16 w-16 text-destructive"})}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:a}),e.jsx("p",{className:"text-muted-foreground",children:o}),this.state.error&&e.jsxs("details",{className:"text-xs text-muted-foreground text-left bg-muted p-2 rounded",children:[e.jsx("summary",{className:"cursor-pointer font-medium",children:"Detalhes técnicos"}),e.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-all",children:this.state.error.message})]}),e.jsxs(v,{onClick:this.handleRetry,className:"w-full gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"Tentar Novamente"]})]})})}return this.props.children}}class xt extends r.Component{constructor(s){super(s),this.state={hasError:!1,isAuthError:!1}}static getDerivedStateFromError(s){const a=s.message.includes("auth")||s.message.includes("unauthorized")||s.message.includes("session")||s.message.includes("token");return{hasError:!0,error:s,isAuthError:a}}componentDidCatch(s,a){Z("Auth context error",{error:s.message,stack:s.stack,componentStack:a.componentStack,isAuthError:this.state.isAuthError},"AuthErrorBoundary")}handleLogin=()=>{window.location.href="/login"};handleRetry=()=>{this.setState({hasError:!1,error:void 0,isAuthError:!1}),window.location.reload()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-card rounded-lg shadow-lg p-6 text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(je,{className:"h-16 w-16 text-destructive"})}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:this.state.isAuthError?"Erro de Autenticação":"Erro Crítico"}),e.jsx("p",{className:"text-muted-foreground",children:this.state.isAuthError?"Sua sessão expirou ou há um problema com sua autenticação. Por favor, faça login novamente.":"Ocorreu um erro crítico na aplicação. Tente recarregar a página."}),this.state.error&&e.jsxs("details",{className:"text-xs text-muted-foreground text-left bg-muted p-2 rounded",children:[e.jsx("summary",{className:"cursor-pointer font-medium",children:"Detalhes técnicos"}),e.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-all",children:this.state.error.message})]}),e.jsx("div",{className:"flex gap-2",children:this.state.isAuthError?e.jsxs(v,{onClick:this.handleLogin,className:"flex-1 gap-2",children:[e.jsx(_e,{className:"h-4 w-4"}),"Fazer Login"]}):e.jsx(v,{onClick:this.handleRetry,className:"flex-1",children:"Tentar Novamente"})})]})}):this.props.children}}const ee=()=>{const{loading:t,user:s,profile:a}=T(),{loading:o,loadingProgress:n,isInitialized:c,currentOrg:u}=Le();let p="auth",m="Autenticando...",d=n;!t&&s?a?o||!c?(p="organization",m="Carregando organizações...",d=Math.max(d,70)):(p="complete",m="Pronto!",d=100):(p="profile",m="Carregando perfil...",d=Math.max(d,50)):t&&(p="auth",m="Autenticando...",d=Math.min(d,30));const f=t||o||!c;return{isLoading:f,progress:d,phase:p,message:m,isReady:!f&&!!s&&!!a&&!!u}},ft=()=>{const{isLoading:t,progress:s,message:a,phase:o}=ee();if(!t)return null;const n={auth:"text-primary",profile:"text-blue-500",organization:"text-purple-500",complete:"text-green-500"};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"max-w-md w-full px-6 space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Y,{className:`h-12 w-12 animate-spin mx-auto ${n[o]}`}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:a}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[o==="auth"&&"Verificando credenciais...",o==="profile"&&"Carregando suas informações...",o==="organization"&&"Configurando ambiente...",o==="complete"&&"Finalizando..."]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(qe,{value:s,className:"h-2"}),e.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[Math.round(s),"%"]})]})]})})},gt=({children:t,requiredRole:s,redirectTo:a="/login"})=>{const{user:o,profile:n,loading:c}=T(),{isLoading:u}=ee(),p=Q();if(r.useEffect(()=>{if(!c){if(!o||!n){p(a);return}if(n.two_factor_enabled&&sessionStorage.getItem("mfa_verified")!=="true"){const f=window.location.pathname+window.location.search;p(`/verify-otp?next=${encodeURIComponent(f)}`);return}if(!n.is_active){L({variant:"destructive",title:"Acesso negado",description:"Sua conta está desativada. Contate o Administrador."}),p(a);return}const d=n.roles?.find(f=>f.org_id===n.organization_id)?.role;if(s&&d!==s){L({variant:"destructive",title:"Acesso restrito",description:"Recurso disponível somente para administradores."}),p("/app/chat");return}}},[o,n,c,s,a,p]),u)return e.jsx(ft,{});if(c)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-subtle",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Y,{className:"h-8 w-8 animate-spin mx-auto text-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando..."})]})});const m=n?.roles?.find(d=>d.org_id===n.organization_id)?.role;return!o||!n||!n.is_active||s&&m!==s?null:e.jsx(e.Fragment,{children:t})};class te extends r.Component{constructor(s){super(s),this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){const o=Me.system("React component error",{componentStack:a.componentStack,errorBoundary:!0,originalError:s.message,stack:s.stack}),n=Fe.handle(o,"ErrorBoundary");this.setState({error:n,errorInfo:a}),this.props.onError&&this.props.onError(s,a)}handleReset=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx(rt,{onRetry:this.handleReset}):this.props.children}}class jt{originalConsole={log:console.log,warn:console.warn,info:console.info,debug:console.debug};config={enabledMethods:[],preserveErrors:!0,structuredLogging:!0};constructor(s){s&&(this.config={...this.config,...s})}cleanProductionLogs(){console.log=(...s)=>{this.config.structuredLogging&&h.info("Legacy console.log usage",{args:s},"LogCleaner")},console.warn=(...s)=>{this.config.structuredLogging&&h.warn("Legacy console.warn usage",{args:s},"LogCleaner")},console.info=(...s)=>{this.config.structuredLogging&&h.info("Legacy console.info usage",{args:s},"LogCleaner")},console.debug=(...s)=>{this.config.structuredLogging&&h.debug("Legacy console.debug usage",{args:s},"LogCleaner")}}restoreConsole(){Object.assign(console,this.originalConsole)}interceptLegacyLogs(){console.log=(...s)=>{h.info("Intercepted console.log",{args:s},"LegacyInterceptor")},console.warn=(...s)=>{h.warn("Intercepted console.warn",{args:s},"LegacyInterceptor")},console.info=(...s)=>{h.info("Intercepted console.info",{args:s},"LegacyInterceptor")}}}const _t=new jt({enabledMethods:[],preserveErrors:!0,structuredLogging:!0}),vt=()=>{_t.cleanProductionLogs()};class yt{config={enableResourceHints:!0,enableServiceWorker:!0,enableCriticalResourcePrefetch:!0,enableMemoryOptimization:!0};constructor(s){s&&(this.config={...this.config,...s})}optimize(){try{this.addResourceHints(),this.enableCriticalResourcePrefetch(),this.setupMemoryOptimization(),this.registerServiceWorker(),h.info("Performance optimizations applied successfully",{},"PerformanceOptimizer")}catch(s){h.error("Failed to apply performance optimizations",{error:s},"PerformanceOptimizer")}}addResourceHints(){if(!this.config.enableResourceHints)return;const s=document.head;["https://fgjypmlszuzkgvhuszxn.supabase.co","https://fonts.googleapis.com","https://fonts.gstatic.com"].forEach(n=>{const c=document.createElement("link");c.rel="dns-prefetch",c.href=n,s.appendChild(c)}),["https://fgjypmlszuzkgvhuszxn.supabase.co"].forEach(n=>{const c=document.createElement("link");c.rel="preconnect",c.href=n,c.crossOrigin="anonymous",s.appendChild(c)})}enableCriticalResourcePrefetch(){this.config.enableCriticalResourcePrefetch&&"requestIdleCallback"in window&&requestIdleCallback(()=>{["/mapa","/admin","/dashboard"].forEach(a=>{const o=document.createElement("link");o.rel="prefetch",o.href=a,document.head.appendChild(o)})})}setupMemoryOptimization(){this.config.enableMemoryOptimization&&("gc"in window&&typeof window.gc=="function"&&"requestIdleCallback"in window&&requestIdleCallback(()=>{try{window.gc()}catch{}}),window.addEventListener("beforeunload",()=>{performance.clearMarks(),performance.clearMeasures()}))}registerServiceWorker(){!this.config.enableServiceWorker||!("serviceWorker"in navigator)||navigator.serviceWorker.register("/sw.js").then(s=>{h.info("Service Worker registered successfully",{scope:s.scope},"PerformanceOptimizer")}).catch(s=>{h.warn("Service Worker registration failed",{error:s},"PerformanceOptimizer")})}monitorCriticalMetrics(){try{if(window.addEventListener("load",()=>{const s=performance.timing;if(s){const n=s.loadEventEnd-s.navigationStart,c=s.domContentLoadedEventEnd-s.navigationStart,u=s.responseStart-s.navigationStart;h.info("Performance metrics",{loadTime:n,domContentLoaded:c,firstByte:u},"WebVitals")}const o=performance.getEntriesByType("resource").filter(n=>n.duration>1e3);o.length>0&&h.warn("Slow resources detected",{count:o.length,resources:o.slice(0,5).map(n=>({name:n.name,duration:n.duration}))},"WebVitals")}),"PerformanceObserver"in window)try{new PerformanceObserver(a=>{a.getEntries().forEach(o=>{o.entryType==="measure"&&h.info("Custom performance measure",{name:o.name,duration:o.duration},"WebVitals")})}).observe({entryTypes:["measure"]})}catch{}}catch(s){h.warn("Performance monitoring setup failed",{error:s},"PerformanceOptimizer")}}}const I=new yt,Et=()=>{I.optimize(),I.monitorCriticalMetrics()},bt=()=>(r.useEffect(()=>{try{vt(),Et(),typeof window<"u"&&(window.__REACT_DEVTOOLS_GLOBAL_HOOK__={...window.__REACT_DEVTOOLS_GLOBAL_HOOK__||{},onCommitFiberRoot:()=>{},onCommitFiberUnmount:()=>{},isDisabled:!0}),delete window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,delete window.__REDUX_DEVTOOLS_EXTENSION__,h.info("Production optimizations initialized",{},"ProductionOptimizer")}catch(t){console.error("Failed to initialize production optimizations:",t)}},[]),null),se=r.createContext(void 0),k=1e3,wt=8e3,At=5e3;function Pt({children:t}){const[s,a]=r.useState(!1),o=r.useRef(null),n=r.useRef(0),c=r.useRef(k),u=async m=>{o.current=m,n.current=Date.now();try{const d=await m();return a(!1),c.current=k,d}catch(d){throw(d?.status>=500||d?.name==="AbortError"||d?.message?.includes("Network"))&&a(!0),d}},p=async()=>{if(!(!o.current||Date.now()-n.current<At)){await new Promise(d=>setTimeout(d,c.current)),c.current=Math.min(c.current*2,wt),n.current=Date.now();try{await u(o.current)}catch{}}};return e.jsx(se.Provider,{value:{execute:u,retry:p,isUnavailable:s},children:t})}function Nt(){const t=r.useContext(se);if(!t)throw new Error("useServiceHealth must be used within ServiceHealthProvider");return t}function Ot(){const{isUnavailable:t,retry:s}=Nt();return t?e.jsxs(q,{variant:"destructive",role:"alert",className:"rounded-none flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(G,{children:"Serviços indisponíveis"}),e.jsx(J,{children:"Não foi possível conectar ao CNJ/Supabase."})]}),e.jsx(v,{variant:"outline",onClick:s,"aria-label":"Tentar novamente",children:"Tentar novamente"})]}):null}function Ct(){const{expired:t,redirectUrl:s,hideExpired:a}=$e(),o=()=>{a(),s&&(window.location.href=s)};return e.jsx(Ge,{open:t,onOpenChange:a,children:e.jsxs(Je,{children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Sessão expirada"}),e.jsx(Ze,{children:"Sua sessão foi encerrada por inatividade ou expiração. Rascunhos foram preservados."})]}),e.jsx(et,{children:e.jsx(tt,{onClick:o,children:"Fazer login"})})]})})}const Tt=ce(le(),de()),Lt=ue({flags:Tt}),re=r.createContext({}),Rt=({children:t})=>{const{user:s,profile:a}=T(),o=a?.organization_id,n=s?.id,c="production",{featureFlagsRefreshInterval:u,featureFlagsCacheTtl:p}=C(),m=o&&n?`ff:${o}:${n}:${c}`:null,d=r.useRef(null),f=()=>{if(!m)return null;try{const x=localStorage.getItem(m);return x?JSON.parse(x):null}catch{return null}},E=x=>Date.now()-x.ts<=p,[j,b]=r.useState(()=>f()?.flags??{}),_=x=>{m&&localStorage.setItem(m,JSON.stringify({ts:Date.now(),flags:x}))},w=async()=>{if(!(!o||!n))try{const{data:x,error:y}=await X.functions.invoke("evaluate_flags",{body:{tenant_id:o,user_id:n,segments:a?.plan?[a.plan]:[],environment:c}});if(y)throw y;const P=Lt.parse(x);_(P.flags),b(P.flags)}catch{const x=f();x&&E(x)&&b(x.flags)}};return r.useEffect(()=>()=>{},[o,n,c,a?.plan,m]),r.useEffect(()=>{d.current&&d.current!==m&&localStorage.removeItem(d.current),d.current=m;const x=f();b(x?x.flags:{}),w();const y=setInterval(w,u);return()=>clearInterval(y)},[m,u,o,n,c]),e.jsx(re.Provider,{value:j,children:t})},Dt=(t,s=!1)=>{const o=!!r.useContext(re)[t],n=r.useRef(o);return r.useEffect(()=>{n.current=o},[o,s,t]),o},St=({flag:t,children:s,fallback:a})=>Dt(t)?e.jsx(e.Fragment,{children:s}):e.jsx(e.Fragment,{children:a??null}),ae=r.createContext(!1);function zt({children:t,value:s}){const{maintenance:a}=C(),o=s??a;return e.jsx(ae.Provider,{value:o,children:t})}function ne(){return r.useContext(ae)}function It(){return ne()?e.jsx(q,{variant:"destructive",role:"alert",className:"rounded-none text-center",children:e.jsxs("div",{children:[e.jsx(G,{children:"Sistema em manutenção"}),e.jsx(J,{children:"Alguns recursos estão temporariamente indisponíveis."})]})}):null}const kt=[{icon:e.jsx(Ee,{className:"h-5 w-5"}),title:"Documentação",description:"Guias completos e referências",href:"/docs"},{icon:e.jsx(be,{className:"h-5 w-5"}),title:"Vídeos Tutoriais",description:"Aprenda através de vídeos",href:"/tutorials"},{icon:e.jsx(we,{className:"h-5 w-5"}),title:"Suporte",description:"Entre em contato conosco",href:"/support"},{icon:e.jsx(Ae,{className:"h-5 w-5"}),title:"Novidades",description:"Veja as últimas atualizações",href:"/changelog",isNew:!0}];function Vt(){const[t,s]=r.useState(!1);return e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsx(Re,{children:!t&&e.jsx(D.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.2},children:e.jsxs(at,{open:t,onOpenChange:s,children:[e.jsx(nt,{asChild:!0,children:e.jsx(v,{size:"icon",variant:"default",className:"h-14 w-14 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110","aria-label":"Ajuda",children:e.jsx(ve,{className:"h-6 w-6"})})}),e.jsxs(ot,{side:"top",align:"end",className:"w-80 p-0 overflow-hidden animate-scale-in",children:[e.jsxs("div",{className:"bg-gradient-primary p-4 text-primary-foreground",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Central de Ajuda"}),e.jsx(v,{variant:"ghost",size:"icon",className:"h-6 w-6 text-primary-foreground hover:bg-primary-foreground/20",onClick:()=>s(!1),children:e.jsx(ye,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-primary-foreground/90 mt-1",children:"Como podemos ajudá-lo hoje?"})]}),e.jsx("div",{className:"p-2",children:kt.map((a,o)=>e.jsxs(D.a,{href:a.href,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.1},className:"flex items-start gap-3 p-3 rounded-lg hover:bg-muted/50 transition-colors group",children:[e.jsx("div",{className:"mt-0.5 text-primary group-hover:text-primary-light transition-colors",children:a.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-sm text-foreground group-hover:text-primary transition-colors",children:a.title}),a.isNew&&e.jsx(me,{variant:"default",className:"text-xs px-1.5 py-0",children:"Novo"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:a.description})]})]},a.title))}),e.jsx("div",{className:"border-t p-3 bg-muted/30",children:e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Pressione"," ",e.jsx("kbd",{className:"px-1.5 py-0.5 text-xs font-semibold bg-background border rounded",children:"?"})," ","para abrir esta janela"]})})]})]})})})})}const V=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.D),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Mt=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.A),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),M=r.lazy(()=>l(()=>import("./page-super-admin-Ljo3RnYj.js").then(t=>t.D),__vite__mapDeps([9,1,2,3,6,4,5,7,8]))),Ft=r.lazy(()=>l(()=>import("./page-super-admin-Ljo3RnYj.js").then(t=>t.U),__vite__mapDeps([9,1,2,3,6,4,5,7,8]))),$t=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.I),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Bt=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.V),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),F=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.O),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Ht=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.S),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Ut=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.C),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Wt=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Kt=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Xt=r.lazy(()=>l(()=>import("./page-AppHome-DeR1Jhr4.js"),__vite__mapDeps([10,1,2,3]))),qt=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.b),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Gt=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.K),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Jt=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.c),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Qt=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.P),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Yt=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.d),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Zt=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.e),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),es=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.f),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),ts=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.F),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),ss=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.g),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),rs=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.B),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),as=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.h),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),ns=r.lazy(()=>l(()=>import("./page-admin-CwJvEO2m.js").then(t=>t.T),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),os=r.lazy(()=>l(()=>import("./page-Profile-Hyp4xwlb.js").then(t=>t.P),__vite__mapDeps([6,1,2,3,4,5,7]))),is=r.lazy(()=>l(()=>import("./page-settings-BZPyOZyW.js"),__vite__mapDeps([11,1,2,3,6,4,5,7,8]))),$=r.lazy(()=>l(()=>import("./page-MapaPage-CmIl7tuY.js").then(t=>t.a2),__vite__mapDeps([4,1,2,3,5]))),B=r.lazy(()=>l(()=>import("./page-PublicHome-wjnJRvfi.js").then(t=>t.P),__vite__mapDeps([12,3,1,2,7,4,5,13,6]))),cs=r.lazy(()=>l(()=>import("./page-About-C9AEn_cr.js").then(t=>t.W),__vite__mapDeps([3,1,2]))),ls=r.lazy(()=>l(()=>import("./page-Beta-1YH6RFOI.js"),__vite__mapDeps([14,1,2,3]))),ds=r.lazy(()=>l(()=>import("./page-Login-BicjLTnC.js").then(t=>t.q),__vite__mapDeps([2,1,3]))),us=r.lazy(()=>l(()=>import("./page-Reset-4XYU1JDi.js"),__vite__mapDeps([15,1,2,3]))),ms=r.lazy(()=>l(()=>import("./page-ResetConfirm-BBpX0UDO.js"),__vite__mapDeps([16,1,2,3,4,5]))),ps=r.lazy(()=>l(()=>import("./reset-password-Cgh-0q-4.js"),__vite__mapDeps([17,1,2,3]))),hs=r.lazy(()=>l(()=>import("./page-VerifyOtp-QLGJJPs2.js"),__vite__mapDeps([18,1,2,3,19]))),xs=r.lazy(()=>l(()=>import("./page-PortalTitular-BP0o5ubO.js").then(t=>t.P),__vite__mapDeps([7,1,2,3,4,5]))),fs=r.lazy(()=>l(()=>import("./page-NotFound-DsZTRAEd.js").then(t=>t.N),__vite__mapDeps([13,1,2,3]))),gs=r.lazy(()=>l(()=>import("./page-DemoMapaTestemunhas-DGvz_qiH.js").then(t=>t.D),__vite__mapDeps([5,1,2,3]))),js=r.lazy(()=>l(()=>import("./page-TemplatePage-L4pfnlQy.js"),__vite__mapDeps([20,1,2,3,5,4]))),_s=r.lazy(()=>l(()=>import("./page-ReportDemo-oW25uBYe.js").then(t=>t.R),__vite__mapDeps([8,1,2,3,7,4,5,6]))),H=r.lazy(()=>l(()=>import("./page-PrivacyPolicy-BZkPInK4.js"),__vite__mapDeps([21,1,2,3]))),U=r.lazy(()=>l(()=>import("./page-TermsOfUse-CQVFsDmp.js"),__vite__mapDeps([22,1,2,3]))),vs=r.lazy(()=>l(()=>import("./page-LGPD-DMMEygey.js"),__vite__mapDeps([23,1,2,3]))),ys=r.lazy(()=>l(()=>import("./page-TwoFactorSetup-D_mNiQPr.js").then(t=>t.T),__vite__mapDeps([19,1,2,3]))),Es=r.lazy(()=>l(()=>import("./page-ServerError-Dxe7lLp9.js"),__vite__mapDeps([24,1,2,3,13]))),W=r.lazy(()=>l(()=>import("./page-Status-CLGPCcKF.js"),__vite__mapDeps([25,1,2,3])));function bs(){return ne()?e.jsxs(R,{children:[e.jsx(i,{path:"/",element:e.jsx(B,{})}),e.jsx(i,{path:"/status",element:e.jsx(W,{})}),e.jsx(i,{path:"*",element:e.jsx(A,{to:"/status",replace:!0})})]}):e.jsxs(R,{children:[e.jsx(i,{path:"/",element:e.jsx(B,{})}),e.jsx(i,{path:"/sobre",element:e.jsx(cs,{})}),e.jsx(i,{path:"/beta",element:e.jsx(ls,{})}),e.jsx(i,{path:"/login",element:e.jsx(ds,{})}),e.jsx(i,{path:"/reset",element:e.jsx(us,{})}),e.jsx(i,{path:"/reset/confirm",element:e.jsx(ms,{})}),e.jsx(i,{path:"/reset-password",element:e.jsx(ps,{})}),e.jsx(i,{path:"/verify-otp",element:e.jsx(hs,{})}),e.jsx(i,{path:"/portal-titular",element:e.jsx(xs,{})}),e.jsx(i,{path:"/import/template",element:e.jsx(js,{})}),e.jsx(i,{path:"/demo/mapa-testemunhas",element:e.jsx(gs,{})}),e.jsx(i,{path:"/privacidade",element:e.jsx(H,{})}),e.jsx(i,{path:"/termos",element:e.jsx(U,{})}),e.jsx(i,{path:"/politica-de-privacidade",element:e.jsx(H,{})}),e.jsx(i,{path:"/termos-de-uso",element:e.jsx(U,{})}),e.jsx(i,{path:"/lgpd",element:e.jsx(vs,{})}),e.jsx(i,{path:"/500",element:e.jsx(Es,{})}),e.jsx(i,{path:"/status",element:e.jsx(W,{})}),e.jsxs(i,{element:e.jsx(gt,{children:e.jsx(Ie,{children:e.jsx(te,{children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"p-4",children:"Carregando..."}),children:e.jsx(Ce,{})})})})}),children:[e.jsx(i,{path:"/dashboard",element:e.jsx(Xt,{})}),e.jsx(i,{path:"/mapa",element:e.jsx($,{})}),e.jsx(i,{path:"/mapa-testemunhas",element:e.jsx($,{})}),e.jsx(i,{path:"/dados",element:e.jsx(A,{to:"/mapa",replace:!0})}),e.jsx(i,{path:"/dados/mapa",element:e.jsx(A,{to:"/mapa",replace:!0})}),e.jsx(i,{path:"/chat",element:e.jsx(A,{to:"/mapa-testemunhas?view=chat",replace:!0})}),e.jsx(i,{path:"/app/chat",element:e.jsx(A,{to:"/mapa-testemunhas?view=chat",replace:!0})}),e.jsx(i,{path:"/super-admin",element:e.jsx(M,{})}),e.jsx(i,{path:"/super-admin/dashboard",element:e.jsx(M,{})}),e.jsx(i,{path:"/super-admin/users",element:e.jsx(Ft,{})}),e.jsx(i,{path:"/admin",element:e.jsx(V,{})}),e.jsx(i,{path:"/admin/dashboard",element:e.jsx(V,{})}),e.jsx(i,{path:"/admin/analytics",element:e.jsx(Mt,{})}),e.jsx(i,{path:"/admin/metrics",element:e.jsx(es,{})}),e.jsx(i,{path:"/admin/feature-flags/metrics",element:e.jsx(ts,{})}),e.jsx(i,{path:"/admin/ia",element:e.jsx(qt,{})}),e.jsx(i,{path:"/admin/ia/chaves",element:e.jsx(Gt,{})}),e.jsx(i,{path:"/admin/ia/modelos",element:e.jsx(Jt,{})}),e.jsx(i,{path:"/admin/ia/prompt-studio",element:e.jsx(Qt,{})}),e.jsx(i,{path:"/admin/ia/testes",element:e.jsx(Yt,{})}),e.jsx(i,{path:"/admin/base-import",element:e.jsx($t,{})}),e.jsx(i,{path:"/admin/base-import/test",element:e.jsx(Zt,{})}),e.jsx(i,{path:"/admin/base",element:e.jsx(ss,{})}),e.jsxs(i,{path:"/admin/base/*",element:e.jsx(rs,{}),children:[e.jsx(i,{path:"processos",element:e.jsx(as,{})}),e.jsx(i,{path:"testemunhas",element:e.jsx(ns,{})})]}),e.jsx(i,{path:"/admin/versoes",element:e.jsx(Bt,{})}),e.jsx(i,{path:"/admin/org",element:e.jsx(F,{})}),e.jsx(i,{path:"/admin/organization",element:e.jsx(F,{})}),e.jsx(i,{path:"/admin/compliance",element:e.jsx(Ut,{})}),e.jsx(i,{path:"/admin/marketing",element:e.jsx(Wt,{})}),e.jsx(i,{path:"/admin/retencao",element:e.jsx(Kt,{})}),e.jsx(i,{path:"/admin/config",element:e.jsx(Ht,{})}),e.jsx(i,{path:"/import",element:e.jsx(A,{to:"/admin/base-import",replace:!0})}),e.jsx(i,{path:"/relatorio",element:e.jsx(St,{flag:"advanced-report",children:e.jsx(_s,{})})}),e.jsx(i,{path:"/account/2fa",element:e.jsx(ys,{})}),e.jsx(i,{path:"/profile",element:e.jsx(os,{})}),e.jsx(i,{path:"/settings",element:e.jsx(is,{})})]}),e.jsx(i,{path:"*",element:e.jsx(fs,{})})]})}const ws=new Pe({defaultOptions:{queries:{retry:3,staleTime:5*60*1e3,refetchOnWindowFocus:!1}}}),As=()=>e.jsxs(te,{children:[e.jsx(bt,{}),e.jsx(De,{reducedMotion:"user",transition:Se,children:e.jsx(Ne,{client:ws,children:e.jsx(Pt,{children:e.jsx(Be,{children:e.jsx(Rt,{children:e.jsxs(st,{children:[e.jsx(ke,{}),e.jsx(ut,{}),e.jsx(Ct,{}),e.jsxs(pe,{children:[e.jsx(mt,{}),e.jsx(Oe,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(pt,{children:e.jsx(xt,{children:e.jsx(ze,{children:e.jsx(ht,{children:e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(It,{}),e.jsx(Ot,{}),e.jsx("main",{id:"conteudo",className:"flex-1",children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"p-4",children:"Carregando..."}),children:e.jsx(bs,{})})}),e.jsx(Vt,{})]})})})})})})]})]})})})})})})]}),{sentryDsn:K}=C();K&&l(()=>import("./vendor-DjGBFEeb.js").then(t=>t.d3),__vite__mapDeps([1,2,3])).then(t=>{t.init({dsn:K,tracesSampleRate:1}),h.info("Sentry initialized successfully",{},"MainApp")}).catch(()=>{h.warn("Sentry not available",{},"MainApp")});let g=null,O=!1;function oe(){g||O||(O=!0,g=document.createElement("script"),g.src="https://assistjur.com.br/~flock.js",g.defer=!0,g.id="aj-flock",g.onerror=()=>{h.warn("Analytics script failed to load",{},"MainApp"),g=null,O=!1},setTimeout(()=>{g&&!document.getElementById("aj-flock")&&(h.warn("Analytics script load timeout",{},"MainApp"),g=null,O=!1)},1e4),document.head.appendChild(g),h.info("Analytics script loaded",{},"MainApp"))}function Ps(){g?.remove(),g=null,O=!1}const Ns=he();Ns.measure&&oe();xe(t=>{t.measure?oe():Ps()});Te(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(zt,{children:e.jsx(As,{})})}));
