import{$ as Fe,r as l,j as e,a0 as E,a1 as ke,a2 as ge,a3 as pe,a4 as De,a5 as xe,a6 as Se,a7 as Pe,a8 as Ee,a9 as Te,aa as Me,L as Z,ab as _e,y as ie,ac as re,t as ne,M as k,v as je,N as fe,ad as be,ae as Re,af as Ie,x as Be,u as $e,ag as ze}from"./vendor-D5pquk4t.js";import{s as D,t as qe,l as Y,k as P,m as we,B as y,C as We,b as Je,c as Ke,n as Ye,d as Ze,o as Ce,p as Oe,q as Ue,r as oe,u as me,v as Ve,w as _,e as Qe,x as Xe}from"./page-About-Wf3YyLE0.js";async function X(i,s="VIEWER",n){try{const{data:r,error:o}=await D.rpc("ensure_user_profile",{user_uuid:i.id,user_email:i.email??"",user_role:s,org_id:n||null});return o?(console.error("Error ensuring profile with RPC:",o),null):r}catch(r){return console.error("ensureProfile error:",r),null}}const es=Fe(i=>({expired:!1,redirectUrl:null,showExpired:s=>i({expired:!0,redirectUrl:s??"/login"}),hideExpired:()=>i({expired:!1,redirectUrl:null})}));class ss{isDevelopment=!0;log(s,n,r,o){const c={level:s,message:n,context:r,timestamp:new Date,service:o};if(this.isDevelopment){const m=r?` ${JSON.stringify(r,null,2)}`:"",f=o?`[${o}] `:"";switch(s){case"error":console.error(`‚ùå ${f}${n}${m}`);break;case"warn":console.warn(`‚ö†Ô∏è ${f}${n}${m}`);break;case"info":console.log(`‚ÑπÔ∏è ${f}${n}${m}`);break;case"debug":console.debug(`üîç ${f}${n}${m}`);break}}else console.log(JSON.stringify(c))}info(s,n,r){this.log("info",s,n,r)}warn(s,n,r){this.log("warn",s,n,r)}error(s,n,r){this.log("error",s,n,r)}debug(s,n,r){this.log("debug",s,n,r)}}const se=new ss,H=(i,s,n)=>se.error(i,s,n),te=(i,s,n)=>se.warn(i,s,n);class V{static AUTH_ERROR_TYPES=["Invalid Refresh Token","refresh_token_not_found","invalid_token","jwt_invalid","token_expired"];static isHandling=!1;static isAuthError(s){if(!s)return!1;const n=s.message||s.error_description||s.error||"";return this.AUTH_ERROR_TYPES.some(r=>n.toLowerCase().includes(r.toLowerCase()))}static async handleAuthError(s,n={}){if(this.isHandling)return;this.isHandling=!0;const{redirectToLogin:r=!0,showNotification:o=!1,preserveCurrentUrl:c=!0}=n;if(te("Auth error detected",{error:s.message||s,errorCode:s.code,errorDescription:s.error_description,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href},"AuthErrorHandler"),await this.clearAuthData(),o){const t=this.getErrorTitle(s),g=this.getErrorDescription(s);qe({title:t,description:g,variant:"destructive"})}const m=c?window.location.pathname:"/",f=r&&m!=="/login"?`?redirect=${encodeURIComponent(m)}`:"";setTimeout(()=>{this.isHandling=!1},2e3),es.getState().showExpired(`/login${f}`)}static getErrorTitle(s){return s.message?.includes("refresh_token")?"Sess√£o Expirada":s.message?.includes("invalid_token")?"Token Inv√°lido":s.message?.includes("network")?"Erro de Conex√£o":"Sess√£o Expirada"}static getErrorDescription(s){return s.message?.includes("refresh_token")?"Sua sess√£o expirou. Fa√ßa login novamente para continuar.":s.message?.includes("invalid_token")?"Token de acesso inv√°lido. Redirecionando para login...":s.message?.includes("network")?"Problema de conex√£o. Verifique sua internet e tente novamente.":"Por favor, fa√ßa login novamente para continuar."}static async clearAuthData(){try{await D.auth.signOut();const s=[];for(let r=0;r<localStorage.length;r++){const o=localStorage.key(r);o&&(o.startsWith("supabase.")||o.includes("auth"))&&s.push(o)}s.forEach(r=>localStorage.removeItem(r));const n=[];for(let r=0;r<sessionStorage.length;r++){const o=sessionStorage.key(r);o&&(o.startsWith("supabase.")||o.includes("auth"))&&n.push(o)}n.forEach(r=>sessionStorage.removeItem(r))}catch(s){H("Error clearing auth data",{error:s},"AuthErrorHandler")}}static async tryRecoverSession(){try{const{data:{session:s},error:n}=await D.auth.getSession();if(n){if(this.isAuthError(n))return await this.clearAuthData(),!1;throw n}if(!s)return!1;const{error:r}=await D.auth.refreshSession();if(r){if(this.isAuthError(r))return await this.clearAuthData(),!1;throw r}return!0}catch(s){return H("Session recovery failed",{error:s},"AuthErrorHandler"),this.isAuthError(s)&&await this.clearAuthData(),!1}}}function rs(i={}){const{checkInterval:s=5,preemptiveRefresh:n=10,inactivityTimeout:r=0,enabled:o=!0}=i,c=l.useRef(),m=l.useRef(),f=l.useRef(Date.now()),t=l.useRef(!1),g=async()=>{if(!t.current){t.current=!0;try{const{data:{session:v},error:x}=await D.auth.getSession();if(x){V.isAuthError(x)&&await V.handleAuthError(x);return}if(!v)return;const N=v.expires_at,u=Math.floor(Date.now()/1e3),a=(N??0)-u,z=n*60;if(a<z){console.log("Token expiring soon, refreshing session...");const{error:T}=await D.auth.refreshSession();T&&V.isAuthError(T)&&await V.handleAuthError(T)}}catch(v){console.error("Session monitor error:",v),V.isAuthError(v)&&await V.handleAuthError(v)}finally{t.current=!1}}};return l.useEffect(()=>{if(o)return g(),c.current=setInterval(g,s*60*1e3),()=>{c.current&&clearInterval(c.current)}},[o,s,n]),l.useEffect(()=>{if(!o||!r)return;const v=()=>{f.current=Date.now()},x=["mousemove","keydown","click"];return x.forEach(N=>window.addEventListener(N,v)),m.current=setInterval(()=>{Date.now()-f.current>r*60*1e3&&V.handleAuthError({message:"session_inactive"})},60*1e3),()=>{x.forEach(N=>window.removeEventListener(N,v)),m.current&&clearInterval(m.current)}},[o,r]),{checkSession:g}}function ns(){return{userAgent:navigator.userAgent,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language,platform:navigator.platform}}const He=l.createContext(void 0),ye=()=>{const i=l.useContext(He);if(i===void 0)throw new Error("useAuth must be used within an AuthProvider");return i},ws=({children:i})=>{const[s,n]=l.useState(null),[r,o]=l.useState(null),[c,m]=l.useState(null),[f,t]=l.useState(!0),[g,v]=l.useState(!1),{inactivityTimeoutMinutes:x}=Y();rs({enabled:!!c,checkInterval:5,preemptiveRefresh:10,inactivityTimeout:x});const N=async b=>{try{const{data:p,error:d}=await D.rpc("get_super_admin_info",{_user_id:b});return d?(H("Error checking super admin status",{error:d.message||d},"useAuth"),!1):p&&p.length>0&&p[0].is_super_admin===!0}catch(p){return H("Error checking super admin in catch",{error:p},"useAuth"),!1}},u=async b=>{try{const{data:p,error:d}=await D.rpc("get_user_profile_with_roles",{_user_id:b}).maybeSingle();if(d)return H("Error fetching profile",{error:d.message||d},"useAuth"),null;if(p){const j=await N(b);return v(j),{...p,roles:p.roles||[],is_super_admin:j}}return p}catch(p){return H("Error fetching profile in catch",{error:p},"useAuth"),null}},a=async(b,p,d,j)=>{try{const{error:h}=await D.from("audit_logs").insert({email:b,action:p,result:d,table_name:"auth",resource:"authentication",ip_address:null,user_agent:navigator.userAgent,metadata:j||{}});h&&H("Error logging auth attempt",{error:h.message||h},"useAuth")}catch(h){H("Error logging auth attempt in catch",{error:h},"useAuth")}};l.useEffect(()=>{const{data:{subscription:b}}=D.auth.onAuthStateChange(async(d,j)=>{m(j),n(j?.user??null),j?.user?setTimeout(async()=>{try{let h=await u(j.user.id);if(!h&&(h=await X(j.user),!h)){te("Profile creation failed during auth state change",{},"Authentication"),o(null),t(!1);return}o(h),t(!1)}catch(h){V.isAuthError(h)?await V.handleAuthError(h,{showNotification:!1}):H("Profile fetch error",{error:h},"useAuth"),o(null),t(!1)}},0):(o(null),t(!1))});return(async()=>{try{const{data:{session:d},error:j}=await D.auth.getSession();if(j){if(V.isAuthError(j)){await V.handleAuthError(j,{showNotification:!1});return}throw j}m(d),n(d?.user??null),d?.user?setTimeout(async()=>{try{let h=await u(d.user.id);if(!h&&(h=await X(d.user),!h)){te("Profile creation failed during session init",{},"Authentication"),o(null),t(!1);return}o(h),t(!1)}catch(h){V.isAuthError(h)?await V.handleAuthError(h,{showNotification:!1}):H("Profile fetch error in session init",{error:h},"useAuth"),o(null),t(!1)}},0):t(!1)}catch(d){H("Session initialization error",{error:d},"useAuth"),t(!1)}})(),()=>b.unsubscribe()},[]);const z=async(b,p,d,j=!0,h)=>{try{t(!0);const{data:G,error:A}=await D.auth.signInWithPassword({email:b,password:p});if(A)return await a(b,"login","failure",{role:d,error:A.message}),A.message.includes("Invalid login credentials")?{error:{message:"E-mail ou senha incorretos."}}:A.message.includes("Email not confirmed")?{error:{message:"E-mail n√£o confirmado. Verifique sua caixa de entrada."}}:{error:A};if(G.user){const{data:I}=await D.auth.refreshSession(),B=I.session??G.session;B&&await D.auth.setSession({access_token:B.access_token,refresh_token:B.refresh_token});const q=ns();0>=70;let de;if(h){const{data:Q,error:Le}=await D.from("organizations").select("id").eq("code",h).maybeSingle();if(Le||!Q)return await a(b,"login","failure",{role:d,orgCode:h,error:"Invalid org code"}),{error:{message:"C√≥digo da organiza√ß√£o n√£o encontrado."}};de=Q.id}const W=await X(G.user,d==="ADMIN"?"ADMIN":"ANALYST",de);if(!W)return await a(b,"login","failure",{role:d,error:"Profile creation failed"}),{error:{message:"N√£o foi poss√≠vel criar ou recuperar o perfil de usu√°rio. Tente novamente ou contate o suporte."}};if(!W.is_active)return await a(b,"login","failure",{role:d,error:"Account deactivated"}),{error:{message:"Sua conta est√° desativada. Contate o Administrador."}};if(d==="ADMIN"&&!W.roles?.some(Q=>Q.role===d))return await a(b,"login","failure",{role:d,error:"Insufficient privileges"}),{error:{message:'Sua conta n√£o possui o perfil Administrador. Tente "Entrar como Escrit√≥rio" ou contate o respons√°vel.'}};await a(b,"login","success",{role:d,user_role:W.roles?.[0]?.role||"USER"}),o(W)}return{error:null}}catch(G){const A=G instanceof Error?G.message:"Unknown error";return await a(b,"login","failure",{role:d,error:A}),{error:G}}finally{t(!1)}},T=async(b,p,d,j)=>{try{t(!0);const{siteUrl:h}=Y(),G=`${h}/login?confirm=1`,{data:A,error:I}=await D.auth.signUp({email:b,password:p,options:{emailRedirectTo:G,data:{name:d}}});if(I)return await a(b,"signup","failure",{error:I.message}),I.message.includes("User already registered")?{error:{message:"E-mail j√° cadastrado. Fa√ßa login."}}:{error:I};let B;if(j){const{data:q,error:ce}=await D.from("organizations").select("id").eq("code",j).maybeSingle();if(ce||!q)return await a(b,"signup","failure",{orgCode:j,error:"Invalid org code"}),{error:{message:"C√≥digo da organiza√ß√£o n√£o encontrado."}};B=q.id}if(A.user)try{await X(A.user,"VIEWER",B),await a(b,"signup","success",{})}catch(q){console.error("Profile creation error during signup:",q),await a(b,"signup","partial_success",{message:"User created but profile creation failed"})}else await a(b,"signup","success",{});return{error:null}}catch(h){const G=h instanceof Error?h.message:"Unknown error";return await a(b,"signup","failure",{error:G}),{error:h}}finally{t(!1)}},O=async()=>{try{await D.auth.signOut(),n(null),o(null),m(null),v(!1),sessionStorage.removeItem("mfa_verified")}catch(b){H("Error signing out",{error:b},"useAuth")}},w=async b=>{try{const{siteUrl:p}=Y(),{error:d}=await D.auth.resetPasswordForEmail(b,{redirectTo:`${p}/reset-password`});return{error:d}}catch(p){return{error:p}}},C=b=>!r||!r.organization_id?!1:r.roles?.find(d=>d.org_id===r.organization_id)?.role===b,R=r?.roles?.some(b=>b.org_id===r.organization_id&&b.role==="ADMIN")??!1,Ae={user:s,profile:r,session:c,loading:f,isSuperAdmin:g,signIn:z,signUp:T,signOut:O,resetPassword:w,hasRole:C,isAdmin:R};return e.jsxDEV(He.Provider,{value:Ae,children:i},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/hooks/useAuth.tsx",lineNumber:621,columnNumber:10},void 0)},F=l.forwardRef(({className:i,type:s,...n},r)=>e.jsxDEV("input",{type:s,className:P("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",i),ref:r,...n},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/ui/input.tsx",lineNumber:8,columnNumber:7},void 0));F.displayName="Input";class M extends Error{category;code;context;userMessage;retryable;cause;constructor(s,n,r){super(s),this.name="AssistJurError",this.category=n,this.code=r?.code,this.context=r?.context,this.userMessage=r?.userMessage,this.retryable=r?.retryable??!1,this.cause=r?.cause}}const J={validation:(i,s)=>new M(i,"validation",{userMessage:"Dados inv√°lidos fornecidos",context:s}),network:(i,s=!0,n)=>new M(i,"network",{userMessage:"Falha de conex√£o. Verifique sua internet.",retryable:s,context:n}),authentication:(i,s)=>new M(i,"authentication",{userMessage:"Sess√£o expirada. Fa√ßa login novamente.",context:s}),authorization:(i,s)=>new M(i,"authorization",{userMessage:"Acesso negado. Verifique suas permiss√µes.",context:s}),business:(i,s,n)=>new M(i,"business",{userMessage:s||"Opera√ß√£o n√£o permitida",context:n}),system:(i,s)=>new M(i,"system",{userMessage:"Erro interno do sistema. Tente novamente em alguns minutos.",context:s})};class ${static handle(s,n){let r;return s instanceof M?r=s:s instanceof Error?s.message?.includes("fetch")?r=J.network(s.message,!0,{originalError:s.message}):s.message?.includes("auth")||s.message?.includes("session")?r=J.authentication(s.message,{originalError:s.message}):r=J.system(s.message,{originalError:s.message}):r=J.system("Erro desconhecido",{originalError:String(s)}),se.error(r.message,{category:r.category,code:r.code,context:r.context,retryable:r.retryable,stack:r.stack},n),r}static handleAndNotify(s,n){const r=this.handle(s,n);return r.userMessage&&E.error(r.userMessage),r}}async function Cs(i,s,n=!0){try{return await i()}catch(r){throw n?$.handleAndNotify(r,s):$.handle(r,s)}}function is(i){return i!=null}function os(i){return is(i)&&i.trim().length>0}function Os(i){return os(i)&&i.length>0}async function Us(i,s,n){const{retries:r=2,timeout:o=3e4,fallback:c}=n||{};let m;for(let f=1;f<=r+1;f++)try{const t=new AbortController,g=setTimeout(()=>t.abort(),o),v=await Promise.race([i(),new Promise((x,N)=>t.signal.addEventListener("abort",()=>N(J.network("Timeout na requisi√ß√£o",!1))))]);return clearTimeout(g),v}catch(t){if(m=$.handle(t,s),!m.retryable||f===r+1)break;const g=Math.min(1e3*Math.pow(2,f-1),5e3);await new Promise(v=>setTimeout(v,g))}if(c!==void 0)return se.warn(`Usando fallback ap√≥s ${r+1} tentativas`,{service:s,error:m?.message??"Unknown error"},s),c;throw m??new Error("Unknown error")}const ts=ke,Ge=l.forwardRef(({className:i,...s},n)=>e.jsxDEV(ge,{ref:n,className:P("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",i),...s},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/ui/tabs.tsx",lineNumber:12,columnNumber:3},void 0));Ge.displayName=ge.displayName;const ae=l.forwardRef(({className:i,...s},n)=>e.jsxDEV(pe,{ref:n,className:P("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",i),...s},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/ui/tabs.tsx",lineNumber:27,columnNumber:3},void 0));ae.displayName=pe.displayName;const ue=l.forwardRef(({className:i,...s},n)=>e.jsxDEV(De,{ref:n,className:P("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",i),...s},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/ui/tabs.tsx",lineNumber:42,columnNumber:3},void 0));ue.displayName=De.displayName;const le=l.forwardRef(({className:i,...s},n)=>e.jsxDEV(xe,{ref:n,className:P("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",i),...s,children:e.jsxDEV(Se,{className:P("flex items-center justify-center text-current"),children:e.jsxDEV(Pe,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/ui/checkbox.tsx",lineNumber:22,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/ui/checkbox.tsx",lineNumber:19,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/ui/checkbox.tsx",lineNumber:11,columnNumber:3},void 0));le.displayName=xe.displayName;const as=we("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),L=l.forwardRef(({className:i,...s},n)=>e.jsxDEV(Ee,{ref:n,className:P(as(),i),...s},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/ui/label.tsx",lineNumber:16,columnNumber:3},void 0));L.displayName=Ee.displayName;function us({className:i}){const[s,n]=l.useState(!1);l.useEffect(()=>{if(typeof window>"u")return;const o=()=>n(window.scrollY>600);return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]);const r=()=>{if(typeof window>"u"||typeof document>"u")return;const o=document.getElementById("main-heading");window.scrollTo({top:0,behavior:"smooth"}),o&&setTimeout(()=>o.focus(),500)};return s?e.jsxDEV(y,{size:"icon","aria-label":"Voltar ao topo",className:P("fixed bottom-6 right-6 rounded-full shadow-lg z-50",i),onClick:r,children:e.jsxDEV(Te,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/site/BackToTopFAB.tsx",lineNumber:43,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/site/BackToTopFAB.tsx",lineNumber:34,columnNumber:5},this):null}const Ne=({title:i,description:s,children:n})=>e.jsxDEV(We,{className:"w-full max-w-md shadow-premium rounded-2xl",children:[e.jsxDEV(Je,{className:"text-center space-y-4 pb-6",children:[e.jsxDEV("div",{className:"mx-auto p-4 bg-gradient-primary rounded-2xl w-fit shadow-md",children:e.jsxDEV(Me,{className:"h-8 w-8 text-primary-foreground"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AuthCard.tsx",lineNumber:22,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AuthCard.tsx",lineNumber:21,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(Ke,{className:"text-2xl font-bold text-foreground",children:i},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AuthCard.tsx",lineNumber:25,columnNumber:11},void 0),s&&e.jsxDEV(Ye,{className:"text-muted-foreground",children:s},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AuthCard.tsx",lineNumber:29,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AuthCard.tsx",lineNumber:24,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AuthCard.tsx",lineNumber:20,columnNumber:7},void 0),e.jsxDEV(Ze,{className:"pt-0",children:n},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AuthCard.tsx",lineNumber:36,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AuthCard.tsx",lineNumber:19,columnNumber:5},void 0),S={DEFAULT_REDIRECTS:{ADMIN:"/app/dashboard",ANALYST:"/app/dashboard",VIEWER:"/app/dashboard",DEFAULT:"/app/dashboard"},FEATURES:{MAGIC_LINK_ENABLED:!0,GOOGLE_OAUTH_ENABLED:!0,MICROSOFT_OAUTH_ENABLED:!1},OAUTH_PROVIDERS:[{id:"google",name:"Google",enabled:!0,icon:"google"}],ALLOWED_REDIRECT_PATHS:["/app/dashboard","/app/dados/mapa","/app/admin/dashboard","/app/admin","/app/mapa-testemunhas","/app/import","/app/profile","/app/settings"]};function ls(i,s){if(s)try{const n=new URL(s,"https://dummy"),r=decodeURIComponent(n.pathname);if(n.origin==="https://dummy"&&S.ALLOWED_REDIRECT_PATHS.includes(r))return decodeURIComponent(s)}catch{}return i&&i in S.DEFAULT_REDIRECTS?S.DEFAULT_REDIRECTS[i]:S.DEFAULT_REDIRECTS.DEFAULT}const ms=({disabled:i,next:s})=>{const[n,r]=l.useState(null),[o,c]=l.useState({}),m=async(t,g=!1)=>{g||r(t);try{if(S.FEATURES.GOOGLE_OAUTH_ENABLED,!D){E.error("OAuth n√£o configurado",{description:"Login com provedores externos n√£o est√° dispon√≠vel no momento."});return}const{siteUrl:v}=Y(),x=s?`${v}${s}`:`${v}/dados/mapa`,{error:N}=await D.auth.signInWithOAuth({provider:t,options:{redirectTo:x}});if(N)throw N;E.success("Redirecionando...",{description:`Conectando com ${t==="google"?"Google":t}`,duration:2e3})}catch(v){console.error(`${t} OAuth error:`,v);const x=v instanceof Error?v.message:"";if(x?.includes("network")||x?.includes("fetch")){const N=o[t]||0;N<2?(c(u=>({...u,[t]:N+1})),E.info("Tentando novamente...",{description:`Erro de conex√£o. Tentativa ${N+2}/3`}),setTimeout(()=>{m(t,!0)},1500)):E.error("Erro de conex√£o",{description:"Verifique sua conex√£o com a internet e tente novamente."});return}x?.includes("Provider")||x?.includes("client_id")?E.error("Configura√ß√£o OAuth",{description:"Google OAuth n√£o est√° configurado corretamente. Entre em contato com o suporte."}):D?E.error("Erro no login",{description:"N√£o foi poss√≠vel fazer login com Google. Tente novamente."}):E.info("Demo Mode",{description:`OAuth ${t} simulado. Use o usu√°rio demo para testar.`})}finally{r(null)}};return S.OAUTH_PROVIDERS.filter(t=>t.enabled).length===0?null:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"absolute inset-0 flex items-center",children:e.jsxDEV("span",{className:"w-full border-t border-border"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:127,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:126,columnNumber:9},void 0),e.jsxDEV("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsxDEV("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou continue com"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:130,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:129,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:125,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxDEV(y,{variant:"outline",onClick:()=>m("google"),disabled:i||n!==null,className:"w-full transition-all duration-200 hover:shadow-md","aria-label":"Acessar √°rea segura com Google",children:n==="google"?e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Z,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:147,columnNumber:17},void 0),e.jsxDEV("span",{children:"Conectando..."},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:148,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:146,columnNumber:15},void 0):o.google>0?e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(_e,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:152,columnNumber:17},void 0),e.jsxDEV("span",{children:"Tentando novamente..."},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:153,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:151,columnNumber:15},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("svg",{className:"h-4 w-4",viewBox:"0 0 24 24","aria-hidden":"true",children:[e.jsxDEV("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:158,columnNumber:19},void 0),e.jsxDEV("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:162,columnNumber:19},void 0),e.jsxDEV("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:166,columnNumber:19},void 0),e.jsxDEV("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:170,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:157,columnNumber:17},void 0),e.jsxDEV("span",{className:"ml-2",children:"Continuar com Google"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:175,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:156,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:138,columnNumber:11},void 0),S.FEATURES.MICROSOFT_OAUTH_ENABLED]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:136,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/OAuthButtons.tsx",lineNumber:124,columnNumber:5},void 0)},ee=12;function K({message:i,onRetry:s}){return e.jsxDEV(Ce,{variant:"destructive",role:"alert","aria-live":"polite",className:"flex items-start justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(Oe,{children:"Erro"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/common/ErrorBanner.tsx",lineNumber:18,columnNumber:9},this),e.jsxDEV(Ue,{children:i},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/common/ErrorBanner.tsx",lineNumber:19,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/common/ErrorBanner.tsx",lineNumber:17,columnNumber:7},this),s&&e.jsxDEV(y,{variant:"outline",onClick:s,className:"ml-4","aria-label":"Tentar novamente",children:"Tentar novamente"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/common/ErrorBanner.tsx",lineNumber:22,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/common/ErrorBanner.tsx",lineNumber:11,columnNumber:5},this)}function cs(i){const{loading:s,error:n}=i,[r,o]=l.useState(typeof navigator<"u"?!navigator.onLine:!1);return l.useEffect(()=>{if(typeof window>"u")return;const c=()=>o(!1),m=()=>o(!0);return window.addEventListener("online",c),window.addEventListener("offline",m),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",m)}},[]),r?"offline":s?"loading":n?"error":"empty"}const U={INVALID_EMAIL:"E-mail inv√°lido.",INCORRECT_PASSWORD:"Senha incorreta.",CNJ_FAILURE:"Falha ao buscar dados do CNJ.",NOT_FOUND:"Item n√£o encontrado.",NETWORK:"Falha de conex√£o. Verifique sua internet.",RATE_LIMIT:"Muitas tentativas. Tente novamente mais tarde."},ds=me({email:_().email(U.INVALID_EMAIL),password:_().min(ee,`M√≠nimo de ${ee} caracteres`),rememberMe:Ve().optional()}),fs=me({name:_().min(2,"Nome deve ter pelo menos 2 caracteres").optional(),email:_().email(U.INVALID_EMAIL),password:_().min(ee,`M√≠nimo de ${ee} caracteres`),confirmPassword:_(),acceptTerms:Ve().refine(i=>i,"Voc√™ deve aceitar os termos")}).refine(i=>i.password===i.confirmPassword,{message:"Senhas n√£o conferem",path:["confirmPassword"]}),he=({mode:i,onModeChange:s})=>{const[n,r]=l.useState(!1),[o,c]=l.useState(!1),[m,f]=l.useState(!1),[t,g]=l.useState(null),{signIn:v,signUp:x}=ye(),N=cs({loading:m,error:t}),u=ie({resolver:oe(ds),mode:"onChange",reValidateMode:"onChange",defaultValues:{email:"",password:"",rememberMe:!1}}),a=ie({resolver:oe(fs),defaultValues:{name:"",email:"",password:"",confirmPassword:"",acceptTerms:!1}}),z=async O=>{f(!0),g(null);try{const{error:w}=await v(O.email,O.password,"OFFICE",O.rememberMe);if(w){if(w?.status===429){const C=U.RATE_LIMIT;g(C),E.error("Muitas tentativas",{description:C});return}if(w.message?.toLowerCase().includes("invalid login credentials")){const C=U.INCORRECT_PASSWORD;u.setError("password",{type:"manual",message:C}),g(C);return}g(w.message||U.NOT_FOUND);return}E.success("Login realizado!",{description:"Bem-vindo ao AssistJur.IA"})}catch(w){const R=$.handleAndNotify(w,"EmailPasswordForm.handleSignIn").userMessage||U.NOT_FOUND;g(R)}finally{f(!1)}},T=async O=>{f(!0),g(null);try{const{error:w}=await x(O.email,O.password,O.name);if(w){if(w?.status===429){const R=U.RATE_LIMIT;g(R),E.error("Muitas tentativas",{description:R});return}const C=w.message||U.NOT_FOUND;g(C),E.error("Erro no cadastro",{description:C});return}E.success("Conta criada!",{description:"Verifique seu e-mail para confirmar o cadastro."}),s("signin")}catch(w){const C=w?.message||U.NOT_FOUND;g(C),E.error("Erro no cadastro",{description:C})}finally{f(!1)}};return i==="signup"?e.jsxDEV("form",{onSubmit:a.handleSubmit(T),className:"space-y-4",children:[N==="offline"&&e.jsxDEV(K,{message:U.NETWORK,onRetry:()=>window.location.reload()},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:179,columnNumber:11},void 0),N==="error"&&t&&e.jsxDEV(K,{message:t,onRetry:()=>g(null)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:185,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(L,{htmlFor:"name",children:"Nome (opcional)"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:189,columnNumber:11},void 0),e.jsxDEV(F,{id:"name",placeholder:"Seu nome completo",...a.register("name"),className:a.formState.errors.name?"border-destructive":""},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:190,columnNumber:11},void 0),a.formState.errors.name&&e.jsxDEV("p",{className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:a.formState.errors.name.message},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:199,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:188,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(L,{htmlFor:"email",children:"E-mail"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:211,columnNumber:11},void 0),e.jsxDEV(F,{id:"email",type:"email",placeholder:"seu@email.com",...a.register("email"),className:a.formState.errors.email?"border-destructive":""},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:212,columnNumber:11},void 0),a.formState.errors.email&&e.jsxDEV("p",{className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:a.formState.errors.email.message},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:222,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:210,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(L,{htmlFor:"password",children:"Senha"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:234,columnNumber:11},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(F,{id:"password",type:n?"text":"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢","aria-invalid":!!a.formState.errors.password,"aria-describedby":"signup-password-error",...a.register("password"),className:a.formState.errors.password?"border-destructive pr-10":"pr-10"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:236,columnNumber:13},void 0),e.jsxDEV(y,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>r(!n),"aria-label":n?"Ocultar senha":"Mostrar senha","aria-pressed":n,children:n?e.jsxDEV(re,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true",focusable:"false"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:259,columnNumber:17},void 0):e.jsxDEV(ne,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true",focusable:"false"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:265,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:249,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:235,columnNumber:11},void 0),a.formState.errors.password&&e.jsxDEV("p",{id:"signup-password-error",className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:a.formState.errors.password.message},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:274,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:233,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(L,{htmlFor:"confirmPassword",children:"Confirmar Senha"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:287,columnNumber:11},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(F,{id:"confirmPassword",type:o?"text":"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢","aria-invalid":!!a.formState.errors.confirmPassword,"aria-describedby":"signup-confirm-password-error",...a.register("confirmPassword"),className:a.formState.errors.confirmPassword?"border-destructive pr-10":"pr-10"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:289,columnNumber:13},void 0),e.jsxDEV(y,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>c(!o),"aria-label":o?"Ocultar senha":"Mostrar senha","aria-pressed":o,children:o?e.jsxDEV(re,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true",focusable:"false"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:314,columnNumber:17},void 0):e.jsxDEV(ne,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true",focusable:"false"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:320,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:302,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:288,columnNumber:11},void 0),a.formState.errors.confirmPassword&&e.jsxDEV("p",{id:"signup-confirm-password-error",className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:a.formState.errors.confirmPassword.message},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:329,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:286,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-start space-x-3 pt-2",children:[e.jsxDEV(le,{id:"acceptTerms",checked:a.watch("acceptTerms"),onCheckedChange:O=>a.setValue("acceptTerms",!!O),className:a.formState.errors.acceptTerms?"border-destructive":""},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:342,columnNumber:11},void 0),e.jsxDEV(L,{htmlFor:"acceptTerms",className:"text-sm leading-relaxed cursor-pointer",children:["Li e aceito os"," ",e.jsxDEV(k,{to:"/termos",className:"text-primary hover:underline",children:"Termos de Uso"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:359,columnNumber:13},void 0)," ","e a"," ",e.jsxDEV(k,{to:"/privacidade",className:"text-primary hover:underline",children:"Pol√≠tica de Privacidade"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:363,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:354,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:341,columnNumber:9},void 0),a.formState.errors.acceptTerms&&e.jsxDEV("p",{className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:a.formState.errors.acceptTerms.message},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:369,columnNumber:11},void 0),e.jsxDEV(y,{type:"submit",className:"w-full",disabled:m,children:m?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Z,{className:"h-4 w-4 animate-spin mr-2"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:382,columnNumber:15},void 0),"Criando conta..."]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:381,columnNumber:13},void 0):"Criar conta"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:379,columnNumber:9},void 0),e.jsxDEV("div",{className:"text-center text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"J√° tem uma conta? "},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:392,columnNumber:11},void 0),e.jsxDEV("button",{type:"button",onClick:()=>s("signin"),className:"text-primary hover:underline font-medium",children:"Acessar √°rea segura"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:393,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:391,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:174,columnNumber:7},void 0):e.jsxDEV("form",{onSubmit:u.handleSubmit(z),className:"space-y-4",children:[N==="offline"&&e.jsxDEV(K,{message:U.NETWORK,onRetry:()=>window.location.reload()},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:408,columnNumber:9},void 0),N==="error"&&t&&e.jsxDEV(K,{message:t,onRetry:()=>g(null)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:414,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(L,{htmlFor:"email",children:"E-mail"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:418,columnNumber:9},void 0),e.jsxDEV(F,{id:"email",type:"email",placeholder:"seu@email.com",...u.register("email"),className:u.formState.errors.email?"border-destructive":""},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:419,columnNumber:9},void 0),u.formState.errors.email&&e.jsxDEV("p",{className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:u.formState.errors.email.message},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:429,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:417,columnNumber:7},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(L,{htmlFor:"password",children:"Senha"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:441,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[e.jsxDEV("div",{className:"relative flex-1",children:[e.jsxDEV(F,{id:"password",type:n?"text":"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢","aria-invalid":!!u.formState.errors.password,"aria-describedby":u.formState.errors.password?"password-help":void 0,...u.register("password"),className:u.formState.errors.password?"border-destructive pr-10":"pr-10"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:444,columnNumber:13},void 0),e.jsxDEV(y,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>r(!n),"aria-label":n?"Ocultar senha":"Mostrar senha","aria-pressed":n,children:n?e.jsxDEV(re,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true",focusable:"false"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:471,columnNumber:17},void 0):e.jsxDEV(ne,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true",focusable:"false"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:477,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:461,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:443,columnNumber:11},void 0),u.formState.errors.password&&e.jsxDEV("span",{id:"password-help",role:"alert",className:"text-sm text-destructive whitespace-nowrap",children:u.formState.errors.password.message},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:486,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:442,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:440,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(le,{id:"rememberMe",checked:u.watch("rememberMe"),onCheckedChange:O=>u.setValue("rememberMe",!!O)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:500,columnNumber:11},void 0),e.jsxDEV(L,{htmlFor:"rememberMe",className:"text-sm cursor-pointer",children:"Lembrar de mim"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:507,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:499,columnNumber:9},void 0),e.jsxDEV(k,{to:"/reset",className:"text-sm text-primary hover:underline",children:"Esqueci minha senha"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:512,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:498,columnNumber:7},void 0),e.jsxDEV(y,{type:"submit",className:"w-full",disabled:m||!u.formState.isValid,children:m?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Z,{className:"h-4 w-4 animate-spin mr-2"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:525,columnNumber:13},void 0),"Acessando..."]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:524,columnNumber:11},void 0):"Acessar √°rea segura"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:518,columnNumber:7},void 0),e.jsxDEV("div",{className:"text-center text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"N√£o tem uma conta? "},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:535,columnNumber:9},void 0),e.jsxDEV("button",{type:"button",onClick:()=>s("signup"),className:"text-primary hover:underline font-medium",children:"Criar conta"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:536,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:534,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/EmailPasswordForm.tsx",lineNumber:406,columnNumber:5},void 0)},bs=me({email:_().email("Formato de email inv√°lido")}),Ns=({onBack:i})=>{const[s,n]=l.useState(!1),[r,o]=l.useState(!1),[c,m]=l.useState(null),f=ie({resolver:oe(bs),mode:"onChange",reValidateMode:"onChange",defaultValues:{email:""}}),t=l.useCallback(async v=>{const x=Date.now();if(c&&x-c<6e4){E.error("Aguarde um momento",{description:"Aguarde pelo menos 1 minuto entre tentativas."});return}n(!0),m(x);try{if(!D){E.success("Link enviado!",{description:"Verifique seu e-mail (modo demo - use o login normal)"}),o(!0);return}const{siteUrl:N}=Y(),{error:u}=await D.auth.signInWithOtp({email:v.email,options:{emailRedirectTo:`${N}/`}});if(u){const a=$.handle(u,"MagicLinkForm.signInWithOtp");u.message.includes("rate")||u.message.includes("limit")||u?.status===429?E.error("Limite de tentativas atingido",{description:"Muitas tentativas de login. Tente novamente em alguns minutos."}):u.message.includes("email")?E.error("Email inv√°lido",{description:"Verifique se o email foi digitado corretamente."}):E.error("Erro ao enviar link",{description:a.userMessage||"N√£o foi poss√≠vel enviar o link de acesso. Tente novamente."});return}E.success("Link de acesso enviado!",{description:"Verifique sua caixa de entrada e clique no link para entrar."}),o(!0)}catch(N){$.handleAndNotify(N,"MagicLinkForm.handleSendMagicLink"),N&&typeof N=="object"&&"status"in N&&N.status===429&&E.error("Muitas tentativas",{description:"Tente novamente mais tarde."})}finally{n(!1)}},[c]),g=()=>{o(!1),f.handleSubmit(t)()};return r?e.jsxDEV("div",{className:"text-center space-y-6",role:"alert","aria-live":"polite",children:[e.jsxDEV("div",{className:"mx-auto p-3 bg-success/10 rounded-full w-fit",children:e.jsxDEV(je,{className:"h-8 w-8 text-success"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:137,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:136,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Link enviado!"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:141,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Verifique sua caixa de entrada e clique no link para fazer login automaticamente."},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:142,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:["Enviado para: ",e.jsxDEV("strong",{children:f.getValues("email")},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:147,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:146,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:140,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(y,{variant:"outline",onClick:g,className:"w-full",disabled:s,children:s?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Z,{className:"h-4 w-4 animate-spin mr-2"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:160,columnNumber:17},void 0),"Reenviando..."]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:159,columnNumber:15},void 0):"Reenviar link"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:152,columnNumber:11},void 0),e.jsxDEV(y,{variant:"ghost",onClick:i,className:"w-full",children:[e.jsxDEV(fe,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:169,columnNumber:13},void 0),"Voltar ao login"]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:168,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:151,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:135,columnNumber:7},void 0):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"text-center space-y-2",children:[e.jsxDEV("div",{className:"mx-auto p-3 bg-primary/10 rounded-full w-fit",children:e.jsxDEV(be,{className:"h-6 w-6 text-primary"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:181,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:180,columnNumber:9},void 0),e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Acessar √°rea segura com link"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:183,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Enviaremos um link de acesso seguro para o seu e-mail"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:184,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:179,columnNumber:7},void 0),e.jsxDEV("form",{onSubmit:f.handleSubmit(t),className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(L,{htmlFor:"email",children:"E-mail"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:194,columnNumber:11},void 0),e.jsxDEV(F,{id:"email",type:"email",placeholder:"seu@email.com",...f.register("email"),className:f.formState.errors.email?"border-destructive":"",autoFocus:!0},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:195,columnNumber:11},void 0),f.formState.errors.email&&e.jsxDEV("p",{className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:f.formState.errors.email.message},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:204,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:193,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(y,{type:"submit",className:"w-full",disabled:s,children:s?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Z,{className:"h-4 w-4 animate-spin mr-2"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:218,columnNumber:17},void 0),"Enviando link..."]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:217,columnNumber:15},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(be,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:223,columnNumber:17},void 0),"Enviar link de acesso"]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:222,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:215,columnNumber:11},void 0),e.jsxDEV(y,{type:"button",variant:"ghost",onClick:i,className:"w-full",children:[e.jsxDEV(fe,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:235,columnNumber:13},void 0),"Voltar ao login"]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:229,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:214,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:189,columnNumber:7},void 0),e.jsxDEV("div",{className:"text-xs text-muted-foreground text-center",children:"O link de acesso expira em 1 hora e s√≥ pode ser usado uma vez."},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:241,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/MagicLinkForm.tsx",lineNumber:178,columnNumber:5},void 0)},hs=we("border-l-4",{variants:{variant:{info:"border-l-blue-500 bg-blue-50 dark:bg-blue-950/30",success:"border-l-green-500 bg-green-50 dark:bg-green-950/30",warning:"border-l-yellow-500 bg-yellow-50 dark:bg-yellow-950/30",error:"border-l-red-500 bg-red-50 dark:bg-red-950/30"}}}),vs=({variant:i,title:s,children:n,className:r})=>{const o=()=>{switch(i){case"info":return e.jsxDEV(Be,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AlertBox.tsx",lineNumber:33,columnNumber:16},void 0);case"success":return e.jsxDEV(je,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AlertBox.tsx",lineNumber:35,columnNumber:16},void 0);case"warning":return e.jsxDEV(Ie,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AlertBox.tsx",lineNumber:37,columnNumber:16},void 0);case"error":return e.jsxDEV(Re,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AlertBox.tsx",lineNumber:39,columnNumber:16},void 0)}},c=()=>{switch(i){case"info":return"text-blue-700 dark:text-blue-300";case"success":return"text-green-700 dark:text-green-300";case"warning":return"text-yellow-700 dark:text-yellow-300";case"error":return"text-red-700 dark:text-red-300"}};return e.jsxDEV(Ce,{className:`${hs({variant:i})} ${r}`,role:"alert","aria-live":"polite",children:[e.jsxDEV("div",{className:c(),children:o()},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AlertBox.tsx",lineNumber:62,columnNumber:7},void 0),s&&e.jsxDEV(Oe,{className:c(),children:s},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AlertBox.tsx",lineNumber:63,columnNumber:17},void 0),e.jsxDEV(Ue,{className:c(),children:n},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AlertBox.tsx",lineNumber:64,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/auth/AlertBox.tsx",lineNumber:57,columnNumber:5},void 0)};function ve({size:i="md",showVersion:s=!1,version:n,className:r=""}){const c={sm:{container:"flex items-center gap-2",logo:"h-6 w-6",title:"text-lg font-semibold",version:"text-xs"},md:{container:"flex items-center gap-3",logo:"h-8 w-8",title:"text-xl font-bold",version:"text-sm"},lg:{container:"flex items-center gap-4",logo:"h-10 w-10",title:"text-2xl font-bold",version:"text-base"}}[i];return e.jsxDEV("div",{className:`${c.container} ${r}`,children:[e.jsxDEV(Qe,{size:i,className:c.logo},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/brand/BrandHeader.tsx",lineNumber:42,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:`${c.title} text-brand-ink`,children:Xe.name},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/brand/BrandHeader.tsx",lineNumber:44,columnNumber:9},this),s&&n&&e.jsxDEV("span",{className:`${c.version} text-muted-foreground font-mono`,children:["v",n]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/brand/BrandHeader.tsx",lineNumber:46,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/brand/BrandHeader.tsx",lineNumber:43,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/components/brand/BrandHeader.tsx",lineNumber:41,columnNumber:5},this)}const gs="https://placehold.co/1600x900/000000/FFFFFF.avif?text=AssistJur",ps="https://placehold.co/1600x900/000000/FFFFFF.webp?text=AssistJur",Ds="https://placehold.co/1600x900/000000/FFFFFF.jpg?text=AssistJur",xs=()=>{const i=$e(),[s]=ze(),{user:n,profile:r}=ye(),[o,c]=l.useState("signin"),[m,f]=l.useState(!1);l.useEffect(()=>{if(window.location.hash.includes("access_token")){const u=window.location.pathname+window.location.search;window.history.replaceState(null,"",u)}},[]);const t=s.get("next"),g=s.get("confirm"),v=s.get("error");l.useEffect(()=>{if(n&&r)if(r.two_factor_enabled&&sessionStorage.getItem("mfa_verified")!=="true"){const u=new URLSearchParams;u.set("email",n.email??""),t&&u.set("next",t),i(`/verify-otp?${u.toString()}`)}else{const u=ls(r.roles?.[0]?.role||null,t);i(u)}},[n,r,i,t]);const x=()=>{f(!m)},N=u=>{c(u),f(!1)};return e.jsxDEV("div",{className:"min-h-screen bg-gradient-subtle lg:grid lg:grid-cols-2",children:[e.jsxDEV("div",{className:"sr-only",children:[e.jsxDEV("h1",{id:"main-heading",tabIndex:-1,children:"Login - AssistJur.IA"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:73,columnNumber:9},void 0),e.jsxDEV("p",{children:"Acesse sua conta do AssistJur.IA para an√°lise avan√ßada de testemunhas com conformidade LGPD"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:76,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:72,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex flex-col justify-center px-6 py-12 lg:px-8",children:e.jsxDEV("div",{className:"mx-auto w-full max-w-md",children:[e.jsxDEV("nav",{"aria-label":"breadcrumb",className:"mb-4 text-sm",children:e.jsxDEV("ol",{className:"flex items-center text-muted-foreground",children:[e.jsxDEV("li",{children:e.jsxDEV(k,{to:"/",className:"text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-sm",children:"AssistJur IA"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:88,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:87,columnNumber:15},void 0),e.jsxDEV("li",{"aria-hidden":"true",className:"mx-2",children:"‚Ä∫"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:95,columnNumber:15},void 0),e.jsxDEV("li",{children:e.jsxDEV(k,{to:"/login","aria-current":"page",className:"focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-sm",children:"Login"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:99,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:98,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:86,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:85,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center justify-center mb-8 lg:hidden",children:e.jsxDEV(ve,{size:"lg",className:"gap-3"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:112,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:111,columnNumber:11},void 0),v&&e.jsxDEV("div",{className:"mb-6",children:e.jsxDEV(K,{message:v==="access_denied"?U.INCORRECT_PASSWORD:U.NOT_FOUND,onRetry:()=>window.location.reload()},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:118,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:117,columnNumber:13},void 0),g==="1"&&e.jsxDEV("div",{className:"mb-6",children:e.jsxDEV(vs,{variant:"info",title:"Confirme seu cadastro",children:"Verifique seu e-mail e clique no link de confirma√ß√£o para ativar sua conta."},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:132,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:131,columnNumber:13},void 0),m&&S.FEATURES.MAGIC_LINK_ENABLED?e.jsxDEV(Ne,{title:"Acessar √°rea segura com link",description:"Acesso seguro sem senha",children:e.jsxDEV(Ns,{onBack:()=>f(!1)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:145,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:141,columnNumber:13},void 0):e.jsxDEV(Ne,{title:o==="signin"?"Acesse sua conta":"Comece gratuitamente",description:"Acesso seguro e conformidade LGPD",children:e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV(ms,{next:t},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:158,columnNumber:17},void 0),e.jsxDEV(ts,{value:o,onValueChange:u=>c(u),className:"w-full",children:[e.jsxDEV(Ge,{className:"grid w-full grid-cols-2",role:"tablist",children:[e.jsxDEV(ae,{value:"signin",role:"tab","aria-selected":o==="signin","aria-controls":"signin-panel",children:"Acessar √°rea segura"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:169,columnNumber:21},void 0),e.jsxDEV(ae,{value:"signup",role:"tab","aria-selected":o==="signup","aria-controls":"signup-panel",children:"Criar conta"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:177,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:168,columnNumber:19},void 0),e.jsxDEV(ue,{value:"signin",className:"mt-6",role:"tabpanel",id:"signin-panel","aria-labelledby":"signin-tab",children:[e.jsxDEV(he,{mode:"signin",onModeChange:N},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:194,columnNumber:21},void 0),e.jsxDEV("div",{className:"mt-4 text-center",children:e.jsxDEV("button",{type:"button",onClick:x,className:"text-sm text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-sm px-1 py-0.5","aria-label":"Alternar para acesso com link de e-mail",children:"Acessar √°rea segura com link de e-mail"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:202,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:201,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:187,columnNumber:19},void 0),e.jsxDEV(ue,{value:"signup",className:"mt-6",role:"tabpanel",id:"signup-panel","aria-labelledby":"signup-tab",children:e.jsxDEV(he,{mode:"signup",onModeChange:N},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:221,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:214,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:161,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:156,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:148,columnNumber:13},void 0),e.jsxDEV("footer",{className:"mt-8 text-center",children:e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:["Dados tratados conforme"," ",e.jsxDEV(k,{to:"/lgpd",className:"text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-sm px-1",children:"LGPD"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:235,columnNumber:15},void 0)," ‚Ä¢ ",e.jsxDEV(k,{to:"/privacidade",className:"text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-sm px-1",children:"Pol√≠tica de Privacidade"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:242,columnNumber:15},void 0)," ‚Ä¢ ",e.jsxDEV(k,{to:"/termos",className:"text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-sm px-1",children:"Termos"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:249,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:233,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:232,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:84,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:83,columnNumber:7},void 0),e.jsxDEV(us,{className:"bottom-24"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:260,columnNumber:7},void 0),e.jsxDEV("aside",{className:"hidden lg:block relative",role:"complementary",children:e.jsxDEV("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`linear-gradient(135deg, hsl(var(--primary) / 0.9), hsl(var(--primary-light) / 0.8)), image-set(url(${gs}) type('image/avif'), url(${ps}) type('image/webp'), url(${Ds}) type('image/jpeg'))`},role:"img","aria-label":"Imagem de fundo mostrando tecnologia jur√≠dica",children:e.jsxDEV("div",{className:"absolute inset-0 flex flex-col justify-center p-12 text-primary-foreground",children:[e.jsxDEV(ve,{size:"lg",className:"mb-12 gap-3"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:274,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("h4",{className:"text-4xl font-bold leading-tight",children:"An√°lise avan√ßada de testemunhas com LGPD by design"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:278,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xl opacity-90 leading-relaxed",children:"Detecte padr√µes suspeitos, triangula√ß√µes e provas emprestadas com total conformidade √†s normas de prote√ß√£o de dados."},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:281,columnNumber:15},void 0),e.jsxDEV("ul",{className:"space-y-3 pt-8",role:"list",children:[e.jsxDEV("li",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-primary-foreground rounded-full","aria-hidden":"true"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:289,columnNumber:19},void 0),e.jsxDEV("span",{children:"Mascaramento autom√°tico de PII"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:293,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:288,columnNumber:17},void 0),e.jsxDEV("li",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-primary-foreground rounded-full","aria-hidden":"true"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:296,columnNumber:19},void 0),e.jsxDEV("span",{children:"Trilha de auditoria completa"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:300,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:295,columnNumber:17},void 0),e.jsxDEV("li",{className:"flex items-center space-x-3",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-primary-foreground rounded-full","aria-hidden":"true"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:303,columnNumber:19},void 0),e.jsxDEV("span",{children:"Criptografia end-to-end"},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:307,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:302,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:287,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:277,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:272,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:264,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:263,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/bruno/OneDrive/Documentos/GitHub/assitjur/src/pages/Login.tsx",lineNumber:70,columnNumber:5},void 0)},Vs=Object.freeze(Object.defineProperty({__proto__:null,default:xs},Symbol.toStringTag,{value:"Module"}));export{Ne as A,us as B,le as C,U as E,F as I,L,ee as M,ts as T,Ge as a,ae as b,ue as c,H as d,ve as e,vs as f,$ as g,J as h,Os as i,Us as j,es as k,se as l,ws as m,Vs as n,ye as u,Cs as w};
