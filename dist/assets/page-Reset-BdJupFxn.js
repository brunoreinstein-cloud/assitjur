import{u as b,r as o,y as E,j as e,v as S,L as h,N as f,ad as p,a0 as a}from"./vendor-BLhJxNng.js";import{r as R,B as t,u as C,s as j,l as L,w as F}from"./page-About-AENA6wUy.js";import{d as v,A as N,e as k,L as A,I,E as V}from"./page-Login-PzH4NyGE.js";const q=C({email:F().email("E-mail inválido")}),P=()=>{const d=b(),[r,m]=o.useState(!1),[g,l]=o.useState(!1),[y,u]=o.useState(""),s=E({resolver:R(q),defaultValues:{email:""}}),x=async n=>{m(!0);try{if(!j){a.success("E-mail enviado!",{description:"Instruções de redefinição foram enviadas (modo demo)."}),u(n.email),l(!0);return}let i;try{i=L().siteUrl}catch{a.error("Configuração inválida",{description:"URL do site não configurada."});return}const{error:c}=await j.auth.resetPasswordForEmail(n.email,{redirectTo:`${i}/reset-password`});if(c){if(c?.status===429){a.error("Muitas tentativas",{description:V.RATE_LIMIT});return}throw c}a.success("E-mail enviado!",{description:"Verifique sua caixa de entrada para redefinir sua senha."}),u(n.email),l(!0)}catch(i){console.error("Password reset error:",i),a.error("Erro no envio",{description:"Se o e-mail estiver cadastrado, você receberá as instruções."})}finally{m(!1)}},w=()=>{l(!1),s.handleSubmit(x)()};return g?e.jsx("div",{className:"min-h-screen bg-gradient-subtle flex flex-col justify-center px-6 py-12",children:e.jsxs("div",{className:"mx-auto w-full max-w-md",children:[e.jsx("div",{className:"flex items-center justify-center mb-8",children:e.jsx(v,{size:"lg",className:"gap-3"})}),e.jsx(N,{title:"E-mail enviado",description:"Verifique sua caixa de entrada",children:e.jsxs("div",{className:"text-center space-y-6",role:"alert","aria-live":"polite",children:[e.jsx("div",{className:"mx-auto p-3 bg-success/10 rounded-full w-fit",children:e.jsx(S,{className:"h-8 w-8 text-success"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enviamos as instruções de redefinição de senha para:"}),e.jsx("p",{className:"font-medium break-all",children:y})]}),e.jsx(k,{variant:"info",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"Não encontrou o e-mail?"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-left",children:[e.jsx("li",{children:"Verifique a pasta de spam/lixo eletrônico"}),e.jsx("li",{children:"O e-mail pode levar alguns minutos para chegar"}),e.jsx("li",{children:"Certifique-se de que o endereço está correto"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(t,{variant:"outline",onClick:w,className:"w-full",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"h-4 w-4 animate-spin mr-2"}),"Reenviando..."]}):"Reenviar e-mail"}),e.jsxs(t,{variant:"ghost",onClick:()=>d("/login"),className:"w-full",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Voltar ao login"]})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-subtle flex flex-col justify-center px-6 py-12",children:e.jsxs("div",{className:"mx-auto w-full max-w-md",children:[e.jsx("div",{className:"flex items-center justify-center mb-8",children:e.jsx(v,{size:"lg",className:"gap-3"})}),e.jsx(N,{title:"Redefinir senha",description:"Digite seu e-mail para receber as instruções",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto p-3 bg-primary/10 rounded-full w-fit mb-4",children:e.jsx(p,{className:"h-6 w-6 text-primary"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enviaremos um link seguro para redefinir sua senha"})]}),e.jsxs("form",{onSubmit:s.handleSubmit(x),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"email",children:"E-mail"}),e.jsx(I,{id:"email",type:"email",placeholder:"seu@email.com",...s.register("email"),className:s.formState.errors.email?"border-destructive":"",autoFocus:!0}),s.formState.errors.email&&e.jsx("p",{className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:s.formState.errors.email.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(t,{type:"submit",className:"w-full",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"h-4 w-4 animate-spin mr-2"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Enviar instruções"]})}),e.jsxs(t,{type:"button",variant:"ghost",onClick:()=>d("/login"),className:"w-full",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Voltar ao login"]})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"Por segurança, não informamos se o e-mail está cadastrado em nossa base."})]})})]})})};export{P as default};
