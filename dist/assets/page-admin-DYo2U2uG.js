const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/page-About-BHlfFeQG.js","assets/vendor-BifU-Y_Y.js","assets/report-DoG7o6mc.js","assets/page-Login-Cb2wXJhK.js","assets/page-MapaPage-bU2RdKPx.js","assets/page-DemoMapaTestemunhas-BREju1Qp.js","assets/page-Profile-M3AOUaYl.js","assets/page-PortalTitular-CAHuxxyN.js","assets/page-ReportDemo-Dw2XRuSS.js"])))=>i.map(i=>d[i]);
import{r as x,cl as ar,j as e,cm as wa,cn as rr,co as ir,cp as nr,cq as tr,cr as Cs,cs as Ss,ct as is,cu as ma,cv as or,cw as ca,cx as Da,cy as Us,ab as Ie,s as fe,cz as ns,ae as ue,t as Z,D as ge,L as ye,ad as ne,bg as Le,F as Pe,a0 as ie,U as ms,ce as lr,bI as as,g as We,cA as Ps,i as ka,bs as we,f as mr,cB as Rs,K as Ze,w as gs,$ as cr,bo as ur,bq as Va,bp as ws,cC as Je,ac as Ea,cD as dr,bL as Gs,bk as Xs,o as Ds,aa as ya,cE as pr,O as Ae,R as Qs,V as Nr,c4 as fr,v as ts,e as je,bK as ks,cj as Hs,M as br,J as Ca,q as Sa,cF as xr,cG as Pa,cH as jr,cI as hr,cJ as vr,cK as gr,cL as Aa,k as wr,A as Dr,bR as As,bu as Re,bS as Ee,Z as Vs,bV as ua,cM as kr,cN as Vr,bf as _a,p as Er,cO as yr,cP as Cr,u as Sr,bM as Pr,d as da,cQ as Ar,cR as _r,ay as Tr,af as Mr,bH as Ir,E as Rr,ao as qs,cS as zr,cT as Or,cU as Br,a7 as Lr}from"./vendor-BifU-Y_Y.js";import{j as ce,C as b,b as D,c as k,m as I,d as g,y as Qe,B as w,n as ae,p as re,a as C,s as M,_ as os,t as U,q as _s,E as es,G as zs,u as xe,J as Fr,w as Ur,S as pa}from"./page-About-BHlfFeQG.js";import{u as de,i as $s,w as Na,C as Ge,T as _e,a as Te,b as K,c as Q,l as rs,g as Es,I as Y,L as B,h as Os,j as qr}from"./page-Login-Cb2wXJhK.js";import{D as Fe,n as Ue,o as Ce,p as Se,X as Ys,R as cs,Y as Ta,Z as us,S as te,a as oe,b as le,c as me,d as L,A as Zs,g as ea,h as sa,i as aa,j as ra,k as ia,l as na,m as ys,e as ds,_ as ta,f as Ma,$ as hs,a0 as Ks}from"./page-MapaPage-bU2RdKPx.js";import{S as fa}from"./page-Profile-M3AOUaYl.js";import{T as De,c as ke,d as J,e as _,f as he,g as S,P as $r,a as Kr,b as Wr}from"./page-DemoMapaTestemunhas-BREju1Qp.js";import{A as Jr,f as Xe,p as ls}from"./page-ReportDemo-Dw2XRuSS.js";import{T as Ia}from"./page-PortalTitular-CAHuxxyN.js";const Gr={light:"",dark:".dark"},Ra=x.createContext(null);function za(){const a=x.useContext(Ra);if(!a)throw new Error("useChart must be used within a <ChartContainer />");return a}const ps=x.forwardRef(({id:a,className:n,children:s,config:i,...r},m)=>{const l=x.useId(),t=`chart-${a||l.replace(/:/g,"")}`;return e.jsxDEV(Ra.Provider,{value:{config:i},children:e.jsxDEV("div",{"data-chart":t,ref:m,className:ce("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",n),...r,children:[e.jsxDEV(Xr,{id:t,config:i},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:58,columnNumber:9},void 0),e.jsxDEV(wa,{children:s},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:59,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:49,columnNumber:7},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:48,columnNumber:5},void 0)});ps.displayName="Chart";const Xr=({id:a,config:n})=>{const s=Object.entries(n).filter(([i,r])=>r.theme||r.color);return s.length?e.jsxDEV("style",{dangerouslySetInnerHTML:{__html:Object.entries(Gr).map(([i,r])=>`
${r} [data-chart=${a}] {
${s.map(([m,l])=>{const t=l.theme?.[i]||l.color;return t?`  --color-${m}: ${t};`:null}).join(`
`)}
}
`).join(`
`)}},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:78,columnNumber:5},void 0):null},Ns=ar,Ts=x.forwardRef(({active:a,payload:n,className:s,indicator:i="dot",hideLabel:r=!1,hideIndicator:m=!1,label:l,labelFormatter:t,labelClassName:o,formatter:p,color:d,nameKey:f,labelKey:h},N)=>{const{config:j}=za(),c=x.useMemo(()=>{if(r||!n?.length)return null;const[u]=n,E=`${h||u.dataKey||u.name||"value"}`,R=Ws(j,u,E),z=!h&&typeof l=="string"?j[l]?.label||l:R?.label;return t?e.jsxDEV("div",{className:ce("font-medium",o),children:t(z,n)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:149,columnNumber:11},void 0):z?e.jsxDEV("div",{className:ce("font-medium",o),children:z},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:159,columnNumber:14},void 0):null},[l,t,n,r,o,j,h]);if(!a||!n?.length)return null;const v=n.length===1&&i!=="dot";return e.jsxDEV("div",{ref:N,className:ce("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",s),children:[v?null:c,e.jsxDEV("div",{className:"grid gap-1.5",children:n.map((u,E)=>{const R=`${f||u.name||u.dataKey||"value"}`,z=Ws(j,u,R),F=d||u.payload.fill||u.color;return e.jsxDEV("div",{className:ce("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",i==="dot"&&"items-center"),children:p&&u?.value!==void 0&&u.name?p(u.value,u.name,u,E,u.payload):e.jsxDEV(e.Fragment,{children:[z?.icon?e.jsxDEV(z.icon,{},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:204,columnNumber:23},void 0):!m&&e.jsxDEV("div",{className:ce("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":i==="dot","w-1":i==="line","w-0 border-[1.5px] border-dashed bg-transparent":i==="dashed","my-0.5":v&&i==="dashed"}),style:{"--color-bg":F,"--color-border":F}},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:207,columnNumber:25},void 0),e.jsxDEV("div",{className:ce("flex flex-1 justify-between leading-none",v?"items-end":"items-center"),children:[e.jsxDEV("div",{className:"grid gap-1.5",children:[v?c:null,e.jsxDEV("span",{className:"text-muted-foreground",children:z?.label||u.name},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:235,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:233,columnNumber:23},void 0),u.value&&e.jsxDEV("span",{className:"font-mono font-medium tabular-nums text-foreground",children:u.value.toLocaleString()},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:240,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:227,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:202,columnNumber:19},void 0)},u.dataKey,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:192,columnNumber:15},void 0)})},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:185,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:177,columnNumber:7},void 0)});Ts.displayName="ChartTooltip";const Qr=x.forwardRef(({className:a,hideIcon:n=!1,payload:s,verticalAlign:i="bottom",nameKey:r},m)=>{const{config:l}=za();return s?.length?e.jsxDEV("div",{ref:m,className:ce("flex items-center justify-center gap-4",i==="top"?"pb-3":"pt-3",a),children:s.map(t=>{const o=`${r||t.dataKey||"value"}`,p=Ws(l,t,o);return e.jsxDEV("div",{className:ce("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[p?.icon&&!n?e.jsxDEV(p.icon,{},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:298,columnNumber:17},void 0):e.jsxDEV("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:t.color}},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:300,columnNumber:17},void 0),p?.label]},t.value,!0,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:291,columnNumber:13},void 0)})},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/chart.tsx",lineNumber:278,columnNumber:7},void 0):null});Qr.displayName="ChartLegend";function Ws(a,n,s){if(typeof n!="object"||n===null)return;const i="payload"in n&&typeof n.payload=="object"&&n.payload!==null?n.payload:void 0;let r=s;return s in n&&typeof n[s]=="string"?r=n[s]:i&&s in i&&typeof i[s]=="string"&&(r=i[s]),r in a?a[r]:a[s]}const Bs={low:"#10b981",medium:"#f59e0b",high:"#ef4444"},oa={requests:{label:"Consultas",color:"hsl(var(--chart-1))"},cost_cents:{label:"Custo (centavos)",color:"hsl(var(--chart-2))"},tokens_in:{label:"Tokens Entrada",color:"hsl(var(--chart-3))"},tokens_out:{label:"Tokens Saída",color:"hsl(var(--chart-4))"},avgRisk:{label:"Risco Médio",color:"hsl(var(--chart-5))"}},Oa=({data:a})=>a?.length?e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Uso da API OpenAI"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:100,columnNumber:9},void 0),e.jsxDEV(I,{children:"Consultas e custos por dia"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:101,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:99,columnNumber:7},void 0),e.jsxDEV(g,{children:e.jsxDEV(ps,{config:oa,className:"h-[300px]",children:e.jsxDEV(tr,{data:a,children:[e.jsxDEV(Cs,{strokeDasharray:"3 3"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:106,columnNumber:13},void 0),e.jsxDEV(Ss,{dataKey:"date",tickFormatter:n=>new Date(n).toLocaleDateString("pt-BR",{month:"short",day:"numeric"})},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:107,columnNumber:13},void 0),e.jsxDEV(is,{yAxisId:"left"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:116,columnNumber:13},void 0),e.jsxDEV(is,{yAxisId:"right",orientation:"right"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:117,columnNumber:13},void 0),e.jsxDEV(Ns,{content:e.jsxDEV(Ts,{},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:119,columnNumber:24},void 0),labelFormatter:n=>new Date(n).toLocaleDateString("pt-BR")},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:118,columnNumber:13},void 0),e.jsxDEV(ma,{yAxisId:"left",type:"monotone",dataKey:"requests",stackId:"1",stroke:"var(--color-requests)",fill:"var(--color-requests)",fillOpacity:.6},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:124,columnNumber:13},void 0),e.jsxDEV(ma,{yAxisId:"right",type:"monotone",dataKey:"cost_cents",stackId:"2",stroke:"var(--color-cost_cents)",fill:"var(--color-cost_cents)",fillOpacity:.3},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:133,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:105,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:104,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:103,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:98,columnNumber:5},void 0):e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Uso da API OpenAI"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:85,columnNumber:11},void 0),e.jsxDEV(I,{children:"Últimos 30 dias"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:86,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:84,columnNumber:9},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"Nenhum dado disponível"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:89,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:88,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:83,columnNumber:7},void 0),Ba=({data:a})=>{const n=[{name:"Baixo Risco",value:a.low,color:Bs.low},{name:"Médio Risco",value:a.medium,color:Bs.medium},{name:"Alto Risco",value:a.high,color:Bs.high}].filter(s=>s.value>0);return n.length===0?e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Distribuição de Riscos"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:162,columnNumber:11},void 0),e.jsxDEV(I,{children:"Classificação dos processos por nível de risco"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:163,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:161,columnNumber:9},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"Nenhum processo com score de risco"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:168,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:167,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:160,columnNumber:7},void 0):e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Distribuição de Riscos"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:179,columnNumber:9},void 0),e.jsxDEV(I,{children:"Classificação dos processos por nível de risco"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:180,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:178,columnNumber:7},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"h-[300px]",children:e.jsxDEV(wa,{width:"100%",height:"100%",children:e.jsxDEV(rr,{children:[e.jsxDEV(ir,{data:n,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,dataKey:"value",children:n.map((s,i)=>e.jsxDEV(nr,{fill:s.color},`cell-${i}`,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:198,columnNumber:19},void 0))},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:188,columnNumber:15},void 0),e.jsxDEV(Ns,{content:({active:s,payload:i})=>{if(s&&i&&i.length){const r=i[0];return e.jsxDEV("div",{className:"rounded-lg border bg-background p-2 shadow-sm",children:e.jsxDEV("div",{className:"grid gap-2",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:r.payload.color}},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:209,columnNumber:29},void 0),e.jsxDEV("span",{className:"font-medium",children:r.payload.name},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:213,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:208,columnNumber:27},void 0),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:[r.value," processos (",(Number(r.value)/(n.reduce((m,l)=>m+l.value,0)||1)*100).toFixed(1),"%)"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:217,columnNumber:27},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:207,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:206,columnNumber:23},void 0)}return null}},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:201,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:187,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:186,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:185,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex justify-center gap-6 mt-4",children:n.map(s=>e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:s.color}},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:242,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-sm",children:[s.name,": ",s.value]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:246,columnNumber:15},void 0)]},s.name,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:241,columnNumber:13},void 0))},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:239,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:184,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:177,columnNumber:5},void 0)},La=({data:a})=>a?.length?e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Risco por Comarca"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:281,columnNumber:9},void 0),e.jsxDEV(I,{children:"Top 10 comarcas com maior risco médio"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:282,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:280,columnNumber:7},void 0),e.jsxDEV(g,{children:e.jsxDEV(ps,{config:oa,className:"h-[400px]",children:e.jsxDEV(Da,{data:a,layout:"horizontal",margin:{left:120},children:[e.jsxDEV(Cs,{strokeDasharray:"3 3"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:287,columnNumber:13},void 0),e.jsxDEV(Ss,{type:"number",domain:[0,10]},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:288,columnNumber:13},void 0),e.jsxDEV(is,{type:"category",dataKey:"comarca",width:100,tick:{fontSize:12}},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:289,columnNumber:13},void 0),e.jsxDEV(Ns,{content:({active:n,payload:s,label:i})=>{if(n&&s&&s.length){const r=s[0].payload;return e.jsxDEV("div",{className:"rounded-lg border bg-background p-3 shadow-sm",children:e.jsxDEV("div",{className:"grid gap-2",children:[e.jsxDEV("div",{className:"font-medium",children:i},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:302,columnNumber:25},void 0),e.jsxDEV("div",{className:"text-sm",children:[e.jsxDEV("div",{children:["Risco Médio:"," ",e.jsxDEV("span",{className:"font-mono",children:r.avgRisk.toFixed(1)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:306,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:304,columnNumber:27},void 0),e.jsxDEV("div",{children:["Total Processos:"," ",e.jsxDEV("span",{className:"font-mono",children:r.count},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:312,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:310,columnNumber:27},void 0),e.jsxDEV("div",{children:["Alto Risco:"," ",e.jsxDEV("span",{className:"font-mono",children:r.highRiskCount},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:316,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:314,columnNumber:27},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:303,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:301,columnNumber:23},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:300,columnNumber:21},void 0)}return null}},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:295,columnNumber:13},void 0),e.jsxDEV(Us,{dataKey:"avgRisk",fill:"var(--color-avgRisk)",radius:[0,4,4,0]},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:328,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:286,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:285,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:284,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:279,columnNumber:5},void 0):e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Risco por Comarca"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:264,columnNumber:11},void 0),e.jsxDEV(I,{children:"Top 10 comarcas com maior risco médio"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:265,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:263,columnNumber:9},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"Nenhum dado de comarca disponível"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:270,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:269,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:262,columnNumber:7},void 0),Fa=({data:a})=>a?.length?e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Uso de Tokens"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:360,columnNumber:9},void 0),e.jsxDEV(I,{children:"Tokens de entrada e saída por dia"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:361,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:359,columnNumber:7},void 0),e.jsxDEV(g,{children:e.jsxDEV(ps,{config:oa,className:"h-[300px]",children:e.jsxDEV(or,{data:a,children:[e.jsxDEV(Cs,{strokeDasharray:"3 3"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:366,columnNumber:13},void 0),e.jsxDEV(Ss,{dataKey:"date",tickFormatter:n=>new Date(n).toLocaleDateString("pt-BR",{month:"short",day:"numeric"})},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:367,columnNumber:13},void 0),e.jsxDEV(is,{},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:376,columnNumber:13},void 0),e.jsxDEV(Ns,{content:e.jsxDEV(Ts,{},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:378,columnNumber:24},void 0),labelFormatter:n=>new Date(n).toLocaleDateString("pt-BR")},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:377,columnNumber:13},void 0),e.jsxDEV(ca,{type:"monotone",dataKey:"tokens_in",stroke:"var(--color-tokens_in)",strokeWidth:2,dot:{r:4}},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:383,columnNumber:13},void 0),e.jsxDEV(ca,{type:"monotone",dataKey:"tokens_out",stroke:"var(--color-tokens_out)",strokeWidth:2,dot:{r:4}},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:390,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:365,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:364,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:363,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:358,columnNumber:5},void 0):e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Uso de Tokens"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:345,columnNumber:11},void 0),e.jsxDEV(I,{children:"Tokens de entrada e saída por dia"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:346,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:344,columnNumber:9},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"Nenhum dado disponível"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:349,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:348,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/analytics/AnalyticsCharts.tsx",lineNumber:343,columnNumber:7},void 0);function Ua({orgId:a,onSuccess:n}){const[s,i]=x.useState(!1),[r,m]=x.useState(!1),[l,t]=x.useState(!0),[o,p]=x.useState(null),{toast:d}=Qe(),f=async N=>{if(!a){d({title:"Erro",description:"ID da organização não encontrado",variant:"destructive"});return}m(!0);try{const{data:j,error:c}=await M.functions.invoke("review-update-dados",{body:{orgId:a,dryRun:N}});if(c)throw new Error(`Erro na função: ${c.message}`);const v=j;p(v),t(N),N||(d({title:"Revisão concluída",description:`${v.flags_updated} registros atualizados, ${v.stubs_created} stubs criados`}),n?.())}catch(j){console.error("Erro na revisão:",j),d({title:"Erro na revisão",description:j instanceof Error?j.message:"Erro desconhecido",variant:"destructive"})}finally{m(!1)}},h=()=>{if(!o)return;const N={timestamp:new Date().toISOString(),dry_run:l,...o},j=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),c=URL.createObjectURL(j),v=document.createElement("a");v.href=c,v.download=`assistjur-review-${l?"preview":"applied"}-${new Date().toISOString().split("T")[0]}.json`,v.click(),URL.revokeObjectURL(c)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(w,{onClick:()=>i(!0),disabled:r,className:"gap-2",children:r?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:140,columnNumber:13},this),"Processando..."]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:139,columnNumber:11},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ie,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:145,columnNumber:13},this),"Revisar & Atualizar"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:144,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:133,columnNumber:7},this),e.jsxDEV(Fe,{open:s,onOpenChange:i,children:e.jsxDEV(Ue,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxDEV(Ce,{children:e.jsxDEV(Se,{className:"flex items-center gap-2",children:[e.jsxDEV(Ie,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:155,columnNumber:15},this),"Revisão & Atualização de Dados - AssistJur.IA"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:154,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:153,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-6",children:o?e.jsxDEV(e.Fragment,{children:[o.errors.length>0?e.jsxDEV(ae,{variant:"destructive",children:[e.jsxDEV(ue,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:192,columnNumber:21},this),e.jsxDEV(re,{children:[o.errors.length," erro(s) encontrado(s) durante a execução."]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:193,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:191,columnNumber:19},this):e.jsxDEV(ae,{className:"border-success",children:[e.jsxDEV(Z,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:200,columnNumber:21},this),e.jsxDEV(re,{children:["Revisão ",l?"simulada":"aplicada"," com sucesso! Tempo de execução: ",o.execution_time_ms,"ms"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:201,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:199,columnNumber:19},this),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"pb-2",children:e.jsxDEV(k,{className:"text-sm",children:"Stubs Criados"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:212,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:211,columnNumber:21},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"text-2xl font-bold text-primary",children:o.stubs_created},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:215,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:214,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:210,columnNumber:19},this),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"pb-2",children:e.jsxDEV(k,{className:"text-sm",children:"Flags Atualizadas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:223,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:222,columnNumber:21},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"text-2xl font-bold text-success",children:o.flags_updated},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:228,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:227,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:221,columnNumber:19},this),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"pb-2",children:e.jsxDEV(k,{className:"text-sm",children:"Triangulações"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:236,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:235,columnNumber:21},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"text-2xl font-bold text-warning",children:o.statistics.triangulacoes_detected},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:239,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:238,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:234,columnNumber:19},this),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"pb-2",children:e.jsxDEV(k,{className:"text-sm",children:"Prova Emprestada"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:247,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:246,columnNumber:21},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"text-2xl font-bold text-destructive",children:o.statistics.prova_emprestada_detected},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:252,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:251,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:245,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:209,columnNumber:17},this),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{children:"Detecções Analíticas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:262,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:261,columnNumber:19},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Trocas Diretas:"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:267,columnNumber:25},this),e.jsxDEV(C,{variant:"outline",children:o.statistics.trocas_detected},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:268,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:266,columnNumber:23},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Duplo Papel:"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:273,columnNumber:25},this),e.jsxDEV(C,{variant:"outline",children:o.statistics.duplo_papel_detected},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:274,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:272,columnNumber:23},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Total Processos:"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:279,columnNumber:25},this),e.jsxDEV(C,{variant:"secondary",children:o.statistics.total_processos},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:280,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:278,columnNumber:23},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Total Testemunhas:"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:285,columnNumber:25},this),e.jsxDEV(C,{variant:"secondary",children:o.statistics.total_testemunhas},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:286,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:284,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:265,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:264,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:260,columnNumber:17},this),o.warnings.length>0&&e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{className:"text-warning",children:["Avisos (",o.warnings.length,")"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:298,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:297,columnNumber:21},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:o.warnings.map((N,j)=>e.jsxDEV("div",{className:"flex items-start gap-2 p-2 rounded border",children:[e.jsxDEV(ue,{className:"h-4 w-4 text-warning mt-0.5"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:309,columnNumber:29},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(C,{variant:"outline",className:"text-xs",children:N.type},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:312,columnNumber:33},this),N.cnj&&e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:["CNJ: ",N.cnj]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:316,columnNumber:35},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:311,columnNumber:31},this),e.jsxDEV("p",{className:"text-sm mt-1",children:N.message},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:321,columnNumber:31},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:310,columnNumber:29},this)]},j,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:305,columnNumber:27},this))},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:303,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:302,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:296,columnNumber:19},this),o.errors.length>0&&e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{className:"text-destructive",children:["Erros (",o.errors.length,")"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:334,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:333,columnNumber:21},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:o.errors.map((N,j)=>e.jsxDEV("div",{className:"flex items-start gap-2 p-2 rounded border border-destructive/20",children:[e.jsxDEV(ue,{className:"h-4 w-4 text-destructive mt-0.5"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:345,columnNumber:29},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV(C,{variant:"destructive",className:"text-xs mb-1",children:N.type},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:347,columnNumber:31},this),e.jsxDEV("p",{className:"text-sm",children:N.message},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:353,columnNumber:31},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:346,columnNumber:29},this)]},j,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:341,columnNumber:27},this))},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:339,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:338,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:332,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:188,columnNumber:15},this):e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV("p",{className:"text-muted-foreground mb-4",children:"Execute uma revisão para recomputar flags analíticas, reconciliar CNJs e validar dados."},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:163,columnNumber:17},this),e.jsxDEV("div",{className:"flex gap-2 justify-center",children:[e.jsxDEV(w,{onClick:()=>f(!0),disabled:r,variant:"outline",className:"gap-2",children:[e.jsxDEV(fe,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:174,columnNumber:21},this),"Dry Run (Preview)"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:168,columnNumber:19},this),e.jsxDEV(w,{onClick:()=>f(!1),disabled:r,className:"gap-2",children:[e.jsxDEV(ns,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:182,columnNumber:21},this),"Aplicar Mudanças"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:177,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:167,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:162,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:160,columnNumber:11},this),e.jsxDEV(Ys,{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxDEV("div",{className:"flex gap-2",children:[o&&e.jsxDEV(w,{variant:"outline",onClick:h,children:[e.jsxDEV(ge,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:369,columnNumber:19},this),"Baixar Relatório"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:368,columnNumber:17},this),e.jsxDEV(w,{variant:"outline",onClick:()=>i(!1),children:"Fechar"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:373,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:366,columnNumber:13},this),o&&l&&e.jsxDEV(w,{onClick:()=>f(!1),disabled:r||o.errors.length>0,className:"ml-auto",children:[e.jsxDEV(ns,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:384,columnNumber:17},this),"Aplicar Mudanças"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:379,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:365,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:152,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:151,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ReviewUpdateButton.tsx",lineNumber:132,columnNumber:5},this)}function Hr({isRunning:a}){const n=a?65:0,s=[{id:"validate",label:"Validando operações",completed:!0},{id:"backup",label:"Criando backup",completed:!0},{id:"cleanup",label:"Executando limpeza",completed:!1,inProgress:a},{id:"verify",label:"Verificando resultados",completed:!1}];return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(cs,{value:n,className:"w-full"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupProgress.tsx",lineNumber:27,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:s.map(i=>e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[i.completed?e.jsxDEV(Z,{className:"h-4 w-4 text-success"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupProgress.tsx",lineNumber:33,columnNumber:15},this):i.inProgress?e.jsxDEV(ye,{className:"h-4 w-4 animate-spin text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupProgress.tsx",lineNumber:35,columnNumber:15},this):e.jsxDEV("div",{className:"h-4 w-4 rounded-full border border-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupProgress.tsx",lineNumber:37,columnNumber:15},this),e.jsxDEV("span",{className:i.completed?"text-success":i.inProgress?"text-primary font-medium":"text-muted-foreground",children:i.label},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupProgress.tsx",lineNumber:39,columnNumber:13},this)]},i.id,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupProgress.tsx",lineNumber:31,columnNumber:11},this))},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupProgress.tsx",lineNumber:29,columnNumber:7},this),a&&e.jsxDEV("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-3 text-sm",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(ne,{className:"h-4 w-4 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupProgress.tsx",lineNumber:57,columnNumber:13},this),e.jsxDEV("span",{className:"font-medium",children:"Processamento em andamento"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupProgress.tsx",lineNumber:58,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupProgress.tsx",lineNumber:56,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground mt-1",children:"A limpeza pode levar alguns minutos dependendo do volume de dados."},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupProgress.tsx",lineNumber:60,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupProgress.tsx",lineNumber:55,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupProgress.tsx",lineNumber:26,columnNumber:5},this)}const Yr=[{id:"invalid_cnjs",label:"CNJs Inválidos",description:"Remove processos com CNJs que não têm 20 dígitos numéricos",severity:"medium",enabled:!0},{id:"empty_fields",label:"Campos Obrigatórios Vazios",description:"Remove processos sem nome do reclamante ou réu",severity:"medium",enabled:!0},{id:"duplicates",label:"Duplicatas",description:"Remove processos duplicados (mantém o mais recente)",severity:"high",enabled:!1},{id:"normalize_cnjs",label:"Normalizar CNJs",description:"Remove pontuação e padroniza formato dos CNJs válidos",severity:"low",enabled:!0},{id:"hard_delete_old",label:"Exclusão Permanente",description:"Remove permanentemente processos excluídos há mais de 30 dias",severity:"high",enabled:!1}],Zr=a=>{switch(a){case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};function ei({open:a,onOpenChange:n}){const[s,i]=x.useState(null),[r,m]=x.useState(Yr),[l,t]=x.useState(!1),[o,p]=x.useState(!1),[d,f]=x.useState("preview"),{profile:h}=de(),{toast:N}=Qe();x.useEffect(()=>{a&&h?.organization_id&&j()},[a,h]);const j=async()=>{$s(h?.organization_id)&&(t(!0),await Na(async()=>{const{data:y}=await M.auth.getSession(),V=y?.session?.access_token;if(!V)throw new Error("Token de autenticação não encontrado");const{data:P,error:O}=await M.functions.invoke("database-cleanup",{body:{orgId:h.organization_id,preview:!0},headers:{Authorization:`Bearer ${V}`}});if(O)throw O;if(P?.error)throw new Error(P.error);i(P?.preview)},"CleanupModal.loadPreview").finally(()=>{t(!1)}))},c=(y,V)=>{m(P=>P.map(O=>O.id===y?{...O,enabled:V}:O))},v=y=>{if(!s)return 0;switch(y){case"invalid_cnjs":return s.invalid_cnjs;case"empty_fields":return s.empty_reclamante+s.empty_reu;case"duplicates":return s.duplicates;case"normalize_cnjs":return s.invalid_cnjs;case"hard_delete_old":return s.soft_deleted;default:return 0}},u=async()=>{if(!$s(h?.organization_id))return;const y=r.filter(V=>V.enabled).map(V=>V.id);if(y.length===0){N({title:"Nenhuma operação selecionada",description:"Selecione pelo menos uma operação para continuar",variant:"destructive"});return}f("running"),p(!0);try{await Na(async()=>{const{data:V}=await M.auth.getSession(),P=V?.session?.access_token;if(!P)throw new Error("Token de autenticação não encontrado");const{data:O,error:q}=await M.functions.invoke("database-cleanup",{body:{orgId:h.organization_id,operations:y},headers:{Authorization:`Bearer ${P}`}});if(q)throw q;if(O?.error)throw new Error(O.error);if(O?.success)N({title:"Limpeza concluída",description:`${O.totalProcessed} registros processados`,variant:"default"}),n(!1),window.location.reload();else{const G=O?.results?.filter(T=>!T.success)||[];if(G.length>0)throw new Error(`Algumas operações falharam: ${G.map(T=>T.message).join(", ")}`)}},"CleanupModal.executeCleanup")}catch{f("confirm")}finally{p(!1)}},E=()=>{o||(n(!1),f("preview"),i(null))},R=()=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ce,{children:e.jsxDEV(Se,{className:"flex items-center gap-2",children:[e.jsxDEV(Le,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:273,columnNumber:11},this),"Limpeza da Base de Dados"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:272,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:271,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-6",children:l?e.jsxDEV("div",{className:"flex items-center justify-center py-8",children:[e.jsxDEV(ye,{className:"h-8 w-8 animate-spin"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:281,columnNumber:13},this),e.jsxDEV("span",{className:"ml-2",children:"Carregando preview..."},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:282,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:280,columnNumber:11},this):s?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(ue,{className:"h-5 w-5 text-warning"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:289,columnNumber:19},this),"Resumo da Base"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:288,columnNumber:17},this),e.jsxDEV(I,{children:"Problemas detectados na base de dados da sua organização"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:292,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:287,columnNumber:15},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-3xl font-bold text-destructive",children:s.total_issues},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:298,columnNumber:19},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"problemas detectados"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:301,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:297,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:296,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:286,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Operações Disponíveis"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:309,columnNumber:15},this),r.map(y=>{const V=v(y.id);return e.jsxDEV(b,{className:"border-2",children:e.jsxDEV(g,{className:"p-4",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(Ge,{id:y.id,checked:y.enabled,onCheckedChange:P=>c(y.id,P)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:316,columnNumber:25},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxDEV("label",{htmlFor:y.id,className:"font-medium cursor-pointer",children:y.label},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:328,columnNumber:29},this),e.jsxDEV(C,{className:Zr(y.severity),children:y.severity},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:334,columnNumber:29},this),V>0&&e.jsxDEV(C,{variant:"outline",children:[V," registros"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:340,columnNumber:31},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:327,columnNumber:27},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:y.description},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:343,columnNumber:27},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:326,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:315,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:314,columnNumber:21},this)},y.id,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:313,columnNumber:19},this)})]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:308,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:285,columnNumber:11},this):null},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:278,columnNumber:7},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV(w,{variant:"outline",onClick:E,children:"Cancelar"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:358,columnNumber:9},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(w,{variant:"outline",onClick:j,children:"Atualizar"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:362,columnNumber:11},this),e.jsxDEV(w,{onClick:()=>f("confirm"),disabled:!r.some(y=>y.enabled)||l,children:"Continuar"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:365,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:361,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:357,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:270,columnNumber:5},this),z=()=>{const y=r.filter(P=>P.enabled),V=y.reduce((P,O)=>P+v(O.id),0);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ce,{children:e.jsxDEV(Se,{className:"flex items-center gap-2 text-destructive",children:[e.jsxDEV(ne,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:387,columnNumber:13},this),"Confirmação de Limpeza"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:386,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:385,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4",children:[e.jsxDEV("p",{className:"font-semibold text-destructive mb-2",children:"⚠️ Atenção!"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:394,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm",children:["Esta operação irá processar"," ",e.jsxDEV("strong",{children:[V," registros"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:397,columnNumber:15},this)," e pode ser irreversível. Certifique-se de que tem um backup da base de dados."]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:395,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:393,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h4",{className:"font-semibold",children:"Operações selecionadas:"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:403,columnNumber:13},this),y.map(P=>e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV(Z,{className:"h-4 w-4 text-success"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:406,columnNumber:17},this),P.label," - ",v(P.id)," registros"]},P.id,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:405,columnNumber:15},this))]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:402,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:392,columnNumber:9},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV(w,{variant:"outline",onClick:()=>f("preview"),children:"Voltar"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:414,columnNumber:11},this),e.jsxDEV(w,{variant:"destructive",onClick:u,children:"Confirmar Limpeza"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:417,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:413,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:384,columnNumber:7},this)},F=()=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ce,{children:e.jsxDEV(Se,{className:"flex items-center gap-2",children:[e.jsxDEV(ye,{className:"h-5 w-5 animate-spin"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:429,columnNumber:11},this),"Executando Limpeza"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:428,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:427,columnNumber:7},this),e.jsxDEV(Hr,{isRunning:o},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:434,columnNumber:7},this),e.jsxDEV("div",{className:"text-center text-sm text-muted-foreground",children:"Por favor, aguarde. A limpeza está em andamento..."},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:436,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:426,columnNumber:5},this);return e.jsxDEV(Fe,{open:a,onOpenChange:E,children:e.jsxDEV(Ue,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[d==="preview"&&R(),d==="confirm"&&z(),d==="running"&&F()]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:444,columnNumber:7},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/CleanupModal.tsx",lineNumber:443,columnNumber:5},this)}function si({className:a}){const[n,s]=x.useState(!1);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(w,{onClick:()=>s(!0),variant:"outline",size:"sm",className:a,children:[e.jsxDEV(Le,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/DatabaseCleanupButton.tsx",lineNumber:23,columnNumber:9},this),"Limpar Base"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/DatabaseCleanupButton.tsx",lineNumber:17,columnNumber:7},this),e.jsxDEV(ei,{open:n,onOpenChange:s},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/DatabaseCleanupButton.tsx",lineNumber:27,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/DatabaseCleanupButton.tsx",lineNumber:16,columnNumber:5},this)}const ai=()=>{const[a,n]=x.useState(!1),[s,i]=x.useState(null),[r,m]=x.useState(null),l=async()=>{n(!0),m(null),i(null);try{const{data:t,error:o}=await M.functions.invoke("process-witness-data");if(o)throw o;i(t),ie.success("Dados de testemunhas processados com sucesso!")}catch(t){const o=t.message||"Erro ao processar dados de testemunhas";m(o),ie.error(o)}finally{n(!1)}};return e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(Pe,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:54,columnNumber:11},void 0),"Processamento de Dados de Testemunhas"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:53,columnNumber:9},void 0),e.jsxDEV(I,{children:"Processa os dados importados para extrair e popular informações de testemunhas nos processos. Esta ação deve ser executada após uma importação para garantir que os dados apareçam no mapa de testemunhas."},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:57,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:52,columnNumber:7},void 0),e.jsxDEV(g,{className:"space-y-4",children:[r&&e.jsxDEV(ae,{variant:"destructive",children:[e.jsxDEV(ne,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:66,columnNumber:13},void 0),e.jsxDEV(re,{children:r},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:67,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:65,columnNumber:11},void 0),s&&e.jsxDEV(ae,{children:[e.jsxDEV(Z,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:73,columnNumber:13},void 0),e.jsxDEV(re,{children:e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("p",{children:e.jsxDEV("strong",{children:s.message},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:77,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:76,columnNumber:17},void 0),e.jsxDEV("p",{children:["Processos processados: ",s.processedCount," de"," ",s.totalProcessos]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:79,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:75,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:74,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:72,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex flex-col gap-2",children:[e.jsxDEV(w,{onClick:l,disabled:a,className:"w-full",children:a?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ye,{className:"h-4 w-4 animate-spin mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:96,columnNumber:17},void 0),"Processando dados..."]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:95,columnNumber:15},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Pe,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:101,columnNumber:17},void 0),"Processar Dados de Testemunhas"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:100,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:89,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Este processo pode levar alguns minutos dependendo da quantidade de dados."},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:107,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:88,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:63,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/WitnessDataProcessor.tsx",lineNumber:51,columnNumber:5},void 0)},ri=()=>{de();const[a,n]=x.useState(!0),[s,i]=x.useState(null),[r,m]=x.useState(null),[l,t]=x.useState(null),[o,p]=x.useState("overview"),d=async h=>{try{const{data:N,error:j}=await M.functions.invoke("admin-analytics",{body:{type:h}});if(j)throw j;return N}catch(N){return console.error("Error fetching analytics:",N),ie.error("Erro ao carregar dados analíticos"),null}};x.useEffect(()=>{(async()=>{n(!0);const N=await d("overview");N&&i(N),n(!1)})()},[]);const f=async h=>{if(h==="usage"&&!r){const N=await d("usage");N&&m(N)}else if(h==="risk_patterns"&&!l){const N=await d("risk_patterns");N&&t(N)}};return a?e.jsxDEV("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:119,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:118,columnNumber:7},void 0):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard Analítico"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:127,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Insights avançados e métricas do sistema"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:130,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:126,columnNumber:7},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(Pe,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:139,columnNumber:13},void 0),"Operações de Dados"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:138,columnNumber:11},void 0),e.jsxDEV(I,{children:"Ferramentas administrativas para manutenção e otimização da base"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:142,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:137,columnNumber:9},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"flex gap-3",children:[e.jsxDEV(Ua,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:148,columnNumber:13},void 0),e.jsxDEV(si,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:149,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:147,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:146,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:136,columnNumber:7},void 0),e.jsxDEV(ai,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:155,columnNumber:7},void 0),e.jsxDEV(_e,{value:o,onValueChange:h=>{p(h),f(h)},className:"w-full",children:[e.jsxDEV(Te,{className:"grid w-full grid-cols-4",children:[e.jsxDEV(K,{value:"overview",children:"Visão Geral"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:166,columnNumber:11},void 0),e.jsxDEV(K,{value:"usage",children:"Uso & Custos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:167,columnNumber:11},void 0),e.jsxDEV(K,{value:"risk_patterns",children:"Padrões de Risco"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:168,columnNumber:11},void 0),e.jsxDEV(K,{value:"performance",children:"Performance"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:169,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:165,columnNumber:9},void 0),e.jsxDEV(Q,{value:"overview",className:"space-y-6",children:[e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Total Processos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:177,columnNumber:17},void 0),e.jsxDEV(Pe,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:180,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:176,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:s?.counts?.processos?.toLocaleString()||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:183,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Registros na base ativa"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:186,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:182,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:175,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Pessoas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:194,columnNumber:17},void 0),e.jsxDEV(ms,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:195,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:193,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:s?.counts?.pessoas?.toLocaleString()||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:198,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Cadastros únicos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:201,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:197,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:192,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Conversas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:209,columnNumber:17},void 0),e.jsxDEV(lr,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:210,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:208,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:s?.counts?.conversations||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:213,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Interações com IA"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:216,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:212,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:207,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Versão Ativa"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:224,columnNumber:17},void 0),e.jsxDEV(as,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:227,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:223,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:["v",s?.counts?.activeVersion||"N/A"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:230,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Base de dados atual"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:233,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:229,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:222,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:174,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV(Ba,{data:s?.riskDistribution||{low:0,medium:0,high:0}},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:242,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Atividade Recente"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:250,columnNumber:17},void 0),e.jsxDEV(I,{children:"Últimas interações com o sistema"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:251,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:249,columnNumber:15},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"space-y-3",children:s?.recentActivity?.slice(0,5).map((h,N)=>e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-primary rounded-full"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:261,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"text-sm font-medium",children:[h.role==="user"?"Pergunta":"Resposta"," ","- Conversa"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:263,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:new Date(h.created_at).toLocaleString("pt-BR")},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:267,columnNumber:27},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:262,columnNumber:25},void 0)]},N,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:260,columnNumber:23},void 0))||e.jsxDEV("div",{className:"text-center text-muted-foreground py-4",children:"Nenhuma atividade recente"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:275,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:256,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:255,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:248,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:241,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:172,columnNumber:9},void 0),e.jsxDEV(Q,{value:"usage",className:"space-y-6",children:r?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Total Consultas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:292,columnNumber:21},void 0),e.jsxDEV(We,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:295,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:291,columnNumber:19},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:r.totalStats.totalRequests.toLocaleString()},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:298,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Últimos 30 dias"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:301,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:297,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:290,columnNumber:17},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Custo Total"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:309,columnNumber:21},void 0),e.jsxDEV(Ps,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:312,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:308,columnNumber:19},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:["$",(r.totalStats.totalCost/100).toFixed(2)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:315,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"OpenAI API"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:318,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:314,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:307,columnNumber:17},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Tokens Processados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:324,columnNumber:21},void 0),e.jsxDEV(ka,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:327,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:323,columnNumber:19},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:[(r.totalStats.totalTokens/1e3).toFixed(1),"K"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:330,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Entrada + Saída"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:333,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:329,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:322,columnNumber:17},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Tempo Médio"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:341,columnNumber:21},void 0),e.jsxDEV(as,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:344,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:340,columnNumber:19},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:[(r.totalStats.avgResponseTime/1e3).toFixed(1),"s"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:347,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Resposta da API"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:351,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:346,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:339,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:289,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid gap-6",children:[e.jsxDEV(Oa,{data:r.dailyUsage},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:360,columnNumber:17},void 0),e.jsxDEV(Fa,{data:r.dailyUsage},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:361,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:359,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:287,columnNumber:13},void 0):e.jsxDEV("div",{className:"flex items-center justify-center min-h-[300px]",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:366,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:365,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:285,columnNumber:9},void 0),e.jsxDEV(Q,{value:"risk_patterns",className:"space-y-6",children:l?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{className:"text-sm font-medium",children:"Risco Médio Geral"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:378,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:377,columnNumber:19},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-3xl font-bold",children:l.avgRisk?.toFixed(1)||"N/A"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:383,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:["De ",l.totalProcessos," processos"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:386,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:382,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:376,columnNumber:17},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{className:"text-sm font-medium",children:"Alto Risco"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:394,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:393,columnNumber:19},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-3xl font-bold text-red-600",children:[l.highRiskPercentage?.toFixed(1)||0,"%"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:399,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Processos com score ≥ 8"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:402,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:398,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:392,columnNumber:17},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{className:"text-sm font-medium",children:"Total Analisado"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:410,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:409,columnNumber:19},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-3xl font-bold",children:l.totalProcessos?.toLocaleString()||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:415,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Processos com score"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:418,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:414,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:408,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:375,columnNumber:15},void 0),e.jsxDEV(La,{data:l.comarcaStats},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:426,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:373,columnNumber:13},void 0):e.jsxDEV("div",{className:"flex items-center justify-center min-h-[300px]",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:430,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:429,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:371,columnNumber:9},void 0),e.jsxDEV(Q,{value:"performance",className:"space-y-6",children:e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Métricas de Performance"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:438,columnNumber:15},void 0),e.jsxDEV(I,{children:"Em desenvolvimento - métricas de sistema e performance"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:439,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:437,columnNumber:13},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"flex items-center justify-center h-[200px] text-muted-foreground",children:"🚧 Funcionalidade em desenvolvimento"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:444,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:443,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:436,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:435,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:157,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Dashboard.tsx",lineNumber:125,columnNumber:5},void 0)},fn=Object.freeze(Object.defineProperty({__proto__:null,default:ri},Symbol.toStringTag,{value:"Module"})),ss=async()=>{const{data:{user:a}}=await M.auth.getUser();return!!a},ii=()=>{const[a,n]=x.useState(!1),[s,i]=x.useState(null),[r,m]=x.useState("30d"),[l,t]=x.useState(!1),[o,p]=x.useState(null),[d,f]=x.useState(null),h=async v=>{if(await ss()){n(!0);try{const{data:u,error:E}=await M.functions.invoke("admin-analytics",{body:{type:"detailed_report",period:v}});if(E)throw E;i(u)}catch(u){console.error("Error fetching detailed analytics:",u),ie.error("Erro ao carregar relatório detalhado")}finally{n(!1)}}},N=async()=>{if(await ss())try{const{data:v,error:u}=await M.functions.invoke("admin-analytics",{body:{type:"usage",period:r}});if(u)throw u;p(v)}catch(v){console.error("Error fetching usage data:",v)}},j=async()=>{if(await ss())try{const{data:v,error:u}=await M.functions.invoke("admin-analytics",{body:{type:"ai_patterns"}});if(u)throw u;f(v)}catch(v){console.error("Error fetching patterns data:",v)}},c=async v=>{if(await ss()){t(!0);try{const{data:u,error:E}=await M.functions.invoke("admin-analytics",{body:{type:"export",format:v,period:r}});if(E)throw E;const R=new Blob([JSON.stringify(u.data,null,2)],{type:"application/json"}),z=window.URL.createObjectURL(R),F=document.createElement("a");F.href=z,F.download=`analytics-report-${r}.json`,document.body.appendChild(F),F.click(),document.body.removeChild(F),window.URL.revokeObjectURL(z),ie.success("Relatório exportado com sucesso")}catch(u){console.error("Error exporting report:",u),ie.error("Erro ao exportar relatório")}finally{t(!1)}}};return x.useEffect(()=>{h(r),N(),j()},[r]),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics Avançado"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:165,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Relatórios detalhados e análises de performance"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:168,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:164,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(w,{variant:"outline",onClick:()=>h(r),disabled:a,children:[e.jsxDEV(Ie,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:179,columnNumber:13},void 0),"Atualizar"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:174,columnNumber:11},void 0),e.jsxDEV(w,{variant:"outline",onClick:()=>c("excel"),disabled:l,children:[e.jsxDEV(ge,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:189,columnNumber:13},void 0),"Excel"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:184,columnNumber:11},void 0),e.jsxDEV(w,{variant:"outline",onClick:()=>c("pdf"),disabled:l,children:[e.jsxDEV(we,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:197,columnNumber:13},void 0),"PDF"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:192,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:173,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:163,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(mr,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:205,columnNumber:9},void 0),e.jsxDEV("span",{className:"text-sm font-medium",children:"Período:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:206,columnNumber:9},void 0),["7d","30d","90d","1y"].map(v=>e.jsxDEV(w,{variant:r===v?"default":"outline",size:"sm",onClick:()=>m(v),children:[v==="7d"&&"7 dias",v==="30d"&&"30 dias",v==="90d"&&"90 dias",v==="1y"&&"1 ano"]},v,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:208,columnNumber:11},void 0))]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:204,columnNumber:7},void 0),e.jsxDEV(_e,{defaultValue:"overview",className:"w-full",children:[e.jsxDEV(Te,{className:"grid w-full grid-cols-4",children:[e.jsxDEV(K,{value:"overview",children:"Resumo Executivo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:224,columnNumber:11},void 0),e.jsxDEV(K,{value:"usage",children:"Análise de Uso"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:225,columnNumber:11},void 0),e.jsxDEV(K,{value:"patterns",children:"Padrões Detectados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:226,columnNumber:11},void 0),e.jsxDEV(K,{value:"recommendations",children:"Recomendações"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:227,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:223,columnNumber:9},void 0),e.jsxDEV(Q,{value:"overview",className:"space-y-6",children:[e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Queries Totais"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:235,columnNumber:17},void 0),e.jsxDEV(ka,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:238,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:234,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:s?.totalQueries?.toLocaleString()||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:241,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-1 text-xs",children:[e.jsxDEV(We,{className:"h-3 w-3 text-green-500"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:245,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-green-500",children:"+12.3%"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:246,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-muted-foreground",children:"vs período anterior"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:247,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:244,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:240,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:233,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Custo Total"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:256,columnNumber:17},void 0),e.jsxDEV(We,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:259,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:255,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:["$",((s?.totalCost||0)/100).toFixed(2)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:262,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-1 text-xs",children:[e.jsxDEV(Rs,{className:"h-3 w-3 text-red-500"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:266,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-red-500",children:"-5.1%"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:267,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-muted-foreground",children:"custo por query"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:268,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:265,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:261,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:254,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Tempo Médio"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:275,columnNumber:17},void 0),e.jsxDEV(Rs,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:278,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:274,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:[((s?.avgResponseTime||0)/1e3).toFixed(1),"s"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:281,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-1 text-xs",children:[e.jsxDEV(Rs,{className:"h-3 w-3 text-green-500"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:285,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-green-500",children:"-8.7%"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:286,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-muted-foreground",children:"melhoria"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:287,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:284,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:280,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:273,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Usuários Ativos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:294,columnNumber:17},void 0),e.jsxDEV(We,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:297,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:293,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:s?.userActivity?.length||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:300,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-1 text-xs",children:[e.jsxDEV(We,{className:"h-3 w-3 text-green-500"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:304,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-green-500",children:"+23.4%"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:305,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-muted-foreground",children:"engajamento"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:306,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:303,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:299,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:292,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:232,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Insights Principais"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:316,columnNumber:17},void 0),e.jsxDEV(I,{children:"Descobertas importantes do período"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:317,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:315,columnNumber:15},void 0),e.jsxDEV(g,{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:323,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium",children:"Eficiência Melhorada"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:325,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Tempo médio de resposta reduziu 8.7% com otimizações de prompts"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:326,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:324,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:322,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:333,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium",children:"Padrão de Alto Risco"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:335,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Comarca X apresenta 67% dos processos com risco elevado"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:336,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:334,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:332,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:342,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium",children:"Pico de Uso"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:344,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Terça-feira, 14h-16h é o horário de maior demanda"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:345,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:343,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:341,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:321,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:314,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Métricas de Qualidade"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:355,columnNumber:17},void 0),e.jsxDEV(I,{children:"Indicadores de satisfação e precisão"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:356,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:354,columnNumber:15},void 0),e.jsxDEV(g,{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex justify-between text-sm",children:[e.jsxDEV("span",{children:"Precisão das Análises"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:363,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-medium",children:"94.2%"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:364,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:362,columnNumber:19},void 0),e.jsxDEV("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsxDEV("div",{className:"bg-green-500 h-2 rounded-full w-[94%]"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:367,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:366,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:361,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex justify-between text-sm",children:[e.jsxDEV("span",{children:"Satisfação do Usuário"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:372,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-medium",children:"91.8%"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:373,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:371,columnNumber:19},void 0),e.jsxDEV("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsxDEV("div",{className:"bg-blue-500 h-2 rounded-full w-[92%]"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:376,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:375,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:370,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex justify-between text-sm",children:[e.jsxDEV("span",{children:"Taxa de Resolução"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:381,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-medium",children:"87.3%"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:382,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:380,columnNumber:19},void 0),e.jsxDEV("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsxDEV("div",{className:"bg-orange-500 h-2 rounded-full w-[87%]"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:385,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:384,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:379,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:360,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:353,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:313,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:230,columnNumber:9},void 0),e.jsxDEV(Q,{value:"usage",className:"space-y-6",children:[a?e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxDEV(fa,{className:"h-[300px]"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:396,columnNumber:15},void 0),e.jsxDEV(fa,{className:"h-[300px]"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:397,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:395,columnNumber:13},void 0):e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV(Oa,{data:o?.dailyUsage||[]},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:401,columnNumber:15},void 0),e.jsxDEV(Fa,{data:o?.dailyUsage||[]},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:402,columnNumber:15},void 0),e.jsxDEV(Ba,{data:s?.riskPatterns?.riskDistribution||{low:0,medium:0,high:0}},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:403,columnNumber:15},void 0),e.jsxDEV(La,{data:s?.riskPatterns?.comarcaStats||[]},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:412,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:400,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{className:"text-sm",children:"Total de Requests"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:422,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:421,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:o?.totalStats?.totalRequests?.toLocaleString()||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:425,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:["Últimos ",r]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:428,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:424,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:420,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{className:"text-sm",children:"Custo Total"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:435,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:434,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:["$",((o?.totalStats?.totalCost||0)/100).toFixed(2)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:438,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:["Últimos ",r]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:441,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:437,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:433,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{className:"text-sm",children:"Usuários Ativos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:448,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:447,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:o?.userStats?.length||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:451,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Período selecionado"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:454,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:450,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:446,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:419,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:393,columnNumber:9},void 0),e.jsxDEV(Q,{value:"patterns",className:"space-y-6",children:[e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Troca Direta"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:467,columnNumber:17},void 0),e.jsxDEV(Ze,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:470,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:466,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:d?.patterns?.trocaDireta||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:473,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"casos detectados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:476,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:472,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:465,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Triangulação"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:483,columnNumber:17},void 0),e.jsxDEV(Ze,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:486,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:482,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:d?.patterns?.triangulacao||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:489,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"casos detectados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:492,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:488,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:481,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Prova Emprestada"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:499,columnNumber:17},void 0),e.jsxDEV(Ze,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:502,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:498,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:d?.patterns?.provaEmprestada||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:505,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"casos detectados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:508,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:504,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:497,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Duplo Papel"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:515,columnNumber:17},void 0),e.jsxDEV(Ze,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:518,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:514,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:d?.patterns?.duploPapel||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:521,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"casos detectados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:524,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:520,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:513,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:464,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Análise de Complexidade"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:535,columnNumber:17},void 0),e.jsxDEV(I,{children:"Distribuição dos processos por complexidade de padrões"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:536,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:534,columnNumber:15},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"text-sm",children:"Baixa Complexidade"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:543,columnNumber:21},void 0),e.jsxDEV(C,{variant:"outline",className:"bg-green-50 text-green-700",children:d?.complexityDistribution?.low||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:544,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:542,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"text-sm",children:"Média Complexidade"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:552,columnNumber:21},void 0),e.jsxDEV(C,{variant:"outline",className:"bg-yellow-50 text-yellow-700",children:d?.complexityDistribution?.medium||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:553,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:551,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"text-sm",children:"Alta Complexidade"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:561,columnNumber:21},void 0),e.jsxDEV(C,{variant:"outline",className:"bg-red-50 text-red-700",children:d?.complexityDistribution?.high||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:562,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:560,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:541,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:540,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:533,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Correlação Risco-Padrão"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:572,columnNumber:17},void 0),e.jsxDEV(I,{children:"Análise estatística da correlação entre padrões e risco"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:573,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:571,columnNumber:15},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"text-center space-y-2",children:[e.jsxDEV("div",{className:"text-3xl font-bold",children:(d?.riskCorrelation||0).toFixed(2)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:579,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Coeficiente de correlação"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:582,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-xs",children:(d?.riskCorrelation||0)>.7?e.jsxDEV(C,{className:"bg-red-100 text-red-800",children:"Correlação Forte"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:587,columnNumber:23},void 0):(d?.riskCorrelation||0)>.4?e.jsxDEV(C,{className:"bg-yellow-100 text-yellow-800",children:"Correlação Moderada"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:591,columnNumber:23},void 0):e.jsxDEV(C,{className:"bg-green-100 text-green-800",children:"Correlação Fraca"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:595,columnNumber:23},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:585,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:578,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:577,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:570,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:532,columnNumber:11},void 0),d?.criticalCombinations>0&&e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(ue,{className:"h-5 w-5 text-orange-500"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:610,columnNumber:19},void 0),"Combinações Críticas Detectadas"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:609,columnNumber:17},void 0),e.jsxDEV(I,{children:"Processos com múltiplos padrões de risco simultâneos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:613,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:608,columnNumber:15},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold text-orange-600",children:d.criticalCombinations},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:618,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"processos com 2+ padrões críticos combinados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:621,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:617,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:607,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:462,columnNumber:9},void 0),e.jsxDEV(Q,{value:"recommendations",className:"space-y-6",children:[(s?.insights?.length??0)>0&&e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(gs,{className:"h-5 w-5 text-blue-500"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:635,columnNumber:19},void 0),"Insights Automáticos"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:634,columnNumber:17},void 0),e.jsxDEV(I,{children:"Descobertas geradas pela análise de IA"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:638,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:633,columnNumber:15},void 0),e.jsxDEV(g,{className:"space-y-4",children:s?.insights?.map((v,u)=>e.jsxDEV("div",{className:`border-l-4 pl-4 ${v.type==="warning"?"border-orange-500":v.type==="error"?"border-red-500":"border-blue-500"}`,children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-1",children:[v.type==="warning"&&e.jsxDEV(ue,{className:"h-4 w-4 text-orange-500"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:656,columnNumber:25},void 0),v.type==="error"&&e.jsxDEV(ue,{className:"h-4 w-4 text-red-500"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:659,columnNumber:25},void 0),v.type==="info"&&e.jsxDEV(gs,{className:"h-4 w-4 text-blue-500"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:662,columnNumber:25},void 0),e.jsxDEV("h4",{className:"font-medium",children:v.title},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:664,columnNumber:23},void 0),e.jsxDEV(C,{variant:"outline",className:"text-xs",children:v.category},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:665,columnNumber:23},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:654,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:v.description},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:669,columnNumber:21},void 0)]},u,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:644,columnNumber:19},void 0))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:642,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:632,columnNumber:13},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Recomendações Estratégicas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:681,columnNumber:15},void 0),e.jsxDEV(I,{children:"Ações sugeridas baseadas na análise completa dos dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:682,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:680,columnNumber:13},void 0),e.jsxDEV(g,{className:"space-y-4",children:(s?.recommendations?.length??0)>0?s?.recommendations?.map((v,u)=>e.jsxDEV("div",{className:`border-l-4 pl-4 ${v.priority==="high"?"border-red-500":v.priority==="medium"?"border-orange-500":"border-green-500"}`,children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxDEV("h4",{className:"font-medium",children:v.title},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:700,columnNumber:23},void 0),e.jsxDEV(C,{variant:v.priority==="high"?"destructive":v.priority==="medium"?"default":"secondary",children:[v.priority==="high"?"Alta":v.priority==="medium"?"Média":"Baixa"," ","Prioridade"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:701,columnNumber:23},void 0),e.jsxDEV(C,{variant:"outline",className:"text-xs",children:v.category},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:717,columnNumber:23},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:699,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-2",children:v.description},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:721,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-green-600 font-medium",children:["Impacto esperado: ",v.expectedImpact]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:724,columnNumber:21},void 0)]},u,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:689,columnNumber:19},void 0)):e.jsxDEV("div",{className:"text-center text-muted-foreground py-8",children:[e.jsxDEV(Z,{className:"h-12 w-12 mx-auto mb-4 text-green-500"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:731,columnNumber:19},void 0),e.jsxDEV("p",{children:"Sistema funcionando dentro dos parâmetros ideais"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:732,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-sm",children:"Nenhuma recomendação crítica no momento"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:733,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:730,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:686,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:679,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:629,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:222,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Analytics.tsx",lineNumber:162,columnNumber:5},void 0)},bn=Object.freeze(Object.defineProperty({__proto__:null,default:ii},Symbol.toStringTag,{value:"Module"}));async function qa(a){const n=a.type;if(n==="text/csv"||a.name.endsWith(".csv"))return ni(a);if(n.includes("spreadsheet")||a.name.match(/\.(xlsx?|xls)$/i))return li(a);throw new Error("Formato de arquivo não suportado. Use CSV ou Excel (.xlsx, .xls)")}async function ni(a){return new Promise((n,s)=>{Ta.parse(a,{header:!0,skipEmptyLines:!0,preview:100,complete:i=>{try{i.errors.length>0&&console.warn("CSV parsing warnings:",i.errors);const r=i.meta.fields||[],m=i.data;if(r.length===0)throw new Error("Nenhuma coluna foi detectada no arquivo CSV");const l={name:a.name.replace(/\.[^/.]+$/,""),headers:r,rows:m.length,model:$a(r),hasListColumn:Ka(r),sampleData:m.slice(0,5)};n([l])}catch(r){s(r)}},error:i=>{s(new Error(`Erro ao analisar CSV: ${i.message}`))}})})}const ti=["dicionario","dictionary","docs","documentação","documentacao","info","instructions","instrucoes","readme","help","ajuda","template","exemplo","sample","metadata","config","configuracao"];function oi(a,n,s){const i=a.toLowerCase().trim();return!!(ti.some(r=>i.includes(r))||s.length<2||n.length<3)}async function li(a){const n=await os(()=>import("./xlsx-PER9UG_v.js"),[]);return new Promise((s,i)=>{const r=new FileReader;r.onload=m=>{try{const l=new Uint8Array(m.target?.result),t=n.read(l,{type:"array"}),o=[],p=[];if(t.SheetNames.forEach(d=>{const f=t.Sheets[d],h=n.utils.sheet_to_json(f,{header:1});if(h.length===0)return;const N=h[0].filter(Boolean),j=h.slice(1).filter(v=>v&&v.some(u=>u!=null&&u!==""));if(N.length===0)return;if(oi(d,N,j)){p.push(d);return}const c={name:d,headers:N,rows:j.length,model:$a(N),hasListColumn:Ka(N),sampleData:j.slice(0,5).map(v=>{const u={};return N.forEach((E,R)=>{u[E]=v[R]||null}),u})};o.push(c)}),o.length===0)throw new Error("Nenhuma aba com dados válidos foi encontrada. Todas as abas foram ignoradas ou estão vazias.");s(o)}catch(l){i(new Error(`Erro ao analisar Excel: ${l instanceof Error?l.message:"Erro desconhecido"}`))}},r.onerror=()=>{i(new Error("Erro ao ler arquivo"))},r.readAsArrayBuffer(a)})}function $a(a){const n=a.map(N=>N.toLowerCase().trim()),s=["nome_testemunha","cnjs_como_testemunha","qtd_depoimentos","quantidade_depoimentos"],i=["testemunha","depoimentos","como_testemunha"],r=["reclamante_nome","reu_nome","advogados_ativo","advogados_passivo","todas_testemunhas","testemunhas_todas"],m=["reclamante","reu","advogado","comarca","tribunal","vara","fase","status"],l=s.reduce((N,j)=>n.some(c=>c.includes(j))?N+3:N,0),t=i.reduce((N,j)=>n.some(c=>c.includes(j))?N+1:N,0),o=r.reduce((N,j)=>n.some(c=>c.includes(j))?N+3:N,0),p=m.reduce((N,j)=>n.some(c=>c.includes(j))?N+1:N,0),d=l+t,f=o+p;return n.some(N=>N.includes("cnj")||N.includes("numero_processo")||N.includes("processo"))?l>0&&l>=o?"testemunha":o>0&&o>l?"processo":d>f&&d>=1?"testemunha":(f>d&&f>=1,"processo"):"ambiguous"}function Ka(a){const n=["cnjs_como_testemunha","todas_testemunhas","testemunhas_todas","advogados_ativo","advogados_passivo"];return a.some(s=>n.some(i=>s.toLowerCase().includes(i.toLowerCase())))}function mi(){return`session_${Date.now()}_${Math.random().toString(36).substring(2,11)}`}function ci({open:a,sheets:n,onComplete:s,onCancel:i}){const[r,m]=x.useState(n);x.useEffect(()=>{m(n)},[n]);const l=(d,f)=>{const h=[...r];h[d]={...h[d],model:f},m(h)},t=r.every(d=>d.model!=="ambiguous"),o=()=>r.filter(f=>f.model!=="ignore").some(f=>f.model==="processo"||f.model==="testemunha"),p=()=>{if(t&&o()){const d=r.filter(f=>f.model!=="ignore");s(d)}};return e.jsxDEV(Fe,{open:a,onOpenChange:d=>!d&&i(),children:e.jsxDEV(Ue,{className:"max-w-2xl",children:[e.jsxDEV(Ce,{children:[e.jsxDEV(Se,{children:"Mapeamento de Abas"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:76,columnNumber:11},this),e.jsxDEV(us,{children:"Algumas abas precisam de mapeamento manual. Selecione o tipo correto para cada aba."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:77,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:75,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[r.map((d,f)=>e.jsxDEV(b,{className:d.model==="ambiguous"?"border-warning":d.model==="ignore"?"border-muted opacity-75":"",children:[e.jsxDEV(D,{className:"pb-3",children:e.jsxDEV(k,{className:"text-sm flex items-center gap-2",children:[d.name,d.model==="ambiguous"?e.jsxDEV(C,{variant:"outline",className:"text-warning border-warning",children:[e.jsxDEV(ne,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:103,columnNumber:23},this),"Requer mapeamento"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:99,columnNumber:21},this):d.model==="ignore"?e.jsxDEV(C,{variant:"outline",className:"text-muted-foreground border-muted",children:"Ignorada"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:107,columnNumber:21},this):e.jsxDEV(C,{variant:"outline",className:"text-success border-success",children:[e.jsxDEV(Z,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:118,columnNumber:23},this),"Mapeada"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:114,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:96,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:95,columnNumber:15},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:[d.rows," linhas • ",d.headers.length," colunas"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:126,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"Tipo:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:131,columnNumber:21},this),e.jsxDEV(te,{value:d.model,onValueChange:h=>l(f,h),children:[e.jsxDEV(oe,{className:"w-[200px]",children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:139,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:138,columnNumber:23},this),e.jsxDEV(me,{children:[e.jsxDEV(L,{value:"processo",children:"Por Processo"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:142,columnNumber:25},this),e.jsxDEV(L,{value:"testemunha",children:"Por Testemunha"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:143,columnNumber:25},this),e.jsxDEV(L,{value:"ignore",children:"Ignorar esta aba"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:146,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:141,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:132,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:130,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:[e.jsxDEV("strong",{children:"Colunas detectadas:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:152,columnNumber:21},this)," ",d.headers.slice(0,5).join(", "),d.headers.length>5&&` e mais ${d.headers.length-5}...`]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:151,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:125,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:124,columnNumber:15},this)]},f,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:85,columnNumber:13},this)),!o()&&e.jsxDEV(b,{className:"border-destructive bg-destructive/5",children:e.jsxDEV(g,{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsxDEV(ne,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:166,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm font-medium",children:'É necessário ter pelo menos uma aba mapeada como "Por Processo" ou "Por Testemunha"'},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:167,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:165,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:164,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:163,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:83,columnNumber:9},this),e.jsxDEV("div",{className:"flex justify-between pt-4",children:[e.jsxDEV(w,{variant:"outline",onClick:i,children:"Cancelar"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:178,columnNumber:11},this),e.jsxDEV(w,{onClick:p,disabled:!t||!o(),children:"Continuar"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:181,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:177,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:74,columnNumber:7},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/MappingDialog.tsx",lineNumber:73,columnNumber:5},this)}const Ye=["upload","validation","preview","publish"],fs=cr((a,n)=>({currentStep:"upload",session:null,file:null,validationResult:null,currentVersionId:null,versionNumber:null,isProcessing:!1,uploadProgress:0,error:null,setCurrentStep:s=>a({currentStep:s}),setSession:s=>a({session:s}),setFile:s=>a({file:s}),setValidationResult:s=>a({validationResult:s}),setIsProcessing:s=>a({isProcessing:s}),setUploadProgress:s=>a(i=>({uploadProgress:typeof s=="function"?s(i.uploadProgress):s})),setError:s=>a({error:s}),resetWizard:()=>a({currentStep:"upload",session:null,file:null,validationResult:null,currentVersionId:null,versionNumber:null,isProcessing:!1,uploadProgress:0,error:null}),setCurrentVersion:(s,i)=>a({currentVersionId:s,versionNumber:i}),createNewVersion:async()=>{try{a({isProcessing:!0,error:null});const{supabase:s}=await os(async()=>{const{supabase:m}=await import("./page-About-BHlfFeQG.js").then(l=>l.U);return{supabase:m}},__vite__mapDeps([0,1])),{data:i,error:r}=await s.functions.invoke("create-version",{body:{}});if(r)throw r;a({currentVersionId:i.versionId,versionNumber:i.number,isProcessing:!1}),rs.info("Version created successfully",{versionId:i.versionId,number:i.number},"ImportStore")}catch(s){const i=Es.handle(s,"ImportStore.createNewVersion");throw a({error:i.userMessage||"Falha ao criar nova versão",isProcessing:!1}),i}},publishCurrentVersion:async()=>{const s=n();if(!s.currentVersionId)throw new Error("No version to publish");try{a({isProcessing:!0,error:null});const{supabase:i}=await os(async()=>{const{supabase:l}=await import("./page-About-BHlfFeQG.js").then(t=>t.U);return{supabase:l}},__vite__mapDeps([0,1])),{data:r,error:m}=await i.functions.invoke("publish-version",{body:{versionId:s.currentVersionId}});if(m)throw m;return rs.info("Version published successfully",{versionId:s.currentVersionId,number:r.number,publishedAt:r.publishedAt},"ImportStore"),a({isProcessing:!1}),r}catch(i){const r=Es.handle(i,"ImportStore.publishCurrentVersion");throw a({error:r.userMessage||"Falha ao publicar versão",isProcessing:!1}),r}},nextStep:()=>{const{currentStep:s}=n(),i=Ye.indexOf(s);i<Ye.length-1&&a({currentStep:Ye[i+1]})},previousStep:()=>{const{currentStep:s}=n(),i=Ye.indexOf(s);i>0&&a({currentStep:Ye[i-1]})},canProceedToNext:()=>{const s=n(),{currentStep:i,session:r,file:m,validationResult:l}=s;switch(i){case"upload":return!!(r&&m);case"validation":return!!l?.normalizedData;case"preview":{if(!l?.normalizedData)return!1;const t=Array.isArray(l.normalizedData.processos)&&l.normalizedData.processos.length>0,o=Array.isArray(l.normalizedData.testemunhas)&&l.normalizedData.testemunhas.length>0;return t||o}case"publish":return!1;default:return!1}}}));function ui(){const{setSession:a,setFile:n,setCurrentStep:s,isProcessing:i,setIsProcessing:r,uploadProgress:m,setUploadProgress:l,error:t,setError:o}=fs(),[p,d]=x.useState(null),[f,h]=x.useState([]),[N,j]=x.useState(!1),c=x.useCallback(async y=>{const V=y[0];if(!V)return;if(V.size>20*1024*1024){o("Arquivo muito grande. Tamanho máximo: 20MB"),U({title:"Arquivo muito grande",description:"O arquivo deve ter no máximo 20MB",variant:"destructive"});return}d(V),o(null),r(!0),l(0);const P=setTimeout(async()=>{try{const O=setInterval(()=>{l(H=>H>=90?(clearInterval(O),90):H+Math.random()*15)},150);console.log("Starting file structure detection for:",V.name);let q=[],G=0;const T=3;for(;G<T;)try{q=await qa(V);break}catch(H){if(G++,G===T)throw H;console.log(`Retry ${G}/${T} for file detection`),await new Promise(W=>setTimeout(W,1e3*G))}clearInterval(O),l(100),h(q),console.log("Detected sheets:",q.map(H=>({name:H.name,model:H.model}))),q.some(H=>H.model==="ambiguous")?(console.log("Ambiguous sheets detected, showing mapping dialog"),j(!0)):R(q,V)}catch(O){const q=O instanceof Error?O.message:"Erro ao processar arquivo";console.error("File processing error:",q),o(q),U({title:"Erro no processamento",description:q,variant:"destructive"})}finally{r(!1)}},300);return()=>clearTimeout(P)},[o,r,l]),{getRootProps:v,getInputProps:u,isDragActive:E}=ur({onDrop:c,accept:{"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"text/csv":[".csv"]},maxFiles:1,maxSize:20*1024*1024}),R=(y,V)=>{if(!y.some(q=>q.model==="processo"||q.model==="testemunha")){o("Arquivo deve conter pelo menos uma aba válida"),U({title:"Estrutura inválida",description:"É necessário ter pelo menos uma aba com estrutura válida",variant:"destructive"});return}const O={fileName:V.name,fileSize:V.size,sheets:y,uploadedAt:new Date,sessionId:mi()};a(O),n(V),s("validation")},z=y=>{j(!1),p&&R(y,p)},F=y=>{switch(y){case"testemunha":return e.jsxDEV(C,{className:"bg-primary/10 text-primary border-primary/20",children:"Por Testemunha"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:201,columnNumber:11},this);case"processo":return e.jsxDEV(C,{className:"bg-accent/10 text-accent border-accent/20",children:"Por Processo"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:207,columnNumber:11},this);case"ambiguous":return e.jsxDEV(C,{className:"bg-warning/10 text-warning-foreground border-warning/20",children:"Requer mapeamento"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:213,columnNumber:11},this);default:return e.jsxDEV(C,{variant:"secondary",children:"Desconhecido"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:218,columnNumber:16},this)}};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(Va,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:227,columnNumber:13},this),"Upload de Arquivo"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:226,columnNumber:11},this),e.jsxDEV(I,{children:"Faça upload do arquivo CSV ou XLSX com os dados das testemunhas e processos"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:230,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:225,columnNumber:9},this),e.jsxDEV(g,{className:"space-y-6",children:[!p&&e.jsxDEV("div",{...v(),className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${E?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary hover:bg-muted/50"}`,children:[e.jsxDEV("input",{...u()},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:246,columnNumber:15},this),e.jsxDEV(ws,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:247,columnNumber:15},this),E?e.jsxDEV("p",{className:"text-lg font-medium",children:"Solte o arquivo aqui..."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:249,columnNumber:17},this):e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"text-lg font-medium",children:"Arraste o arquivo ou clique para selecionar"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:252,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Formatos aceitos: Excel (.xlsx, .xls) e CSV • Máximo 20MB"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:255,columnNumber:19},this),e.jsxDEV("div",{className:"mt-4",children:e.jsxDEV(w,{variant:"outline",children:"Selecionar Arquivo"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:259,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:258,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:251,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:238,columnNumber:13},this),p&&e.jsxDEV(b,{className:"bg-muted/50",children:e.jsxDEV(g,{className:"p-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(we,{className:"h-8 w-8 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:272,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:p.name},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:274,columnNumber:23},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:[(p.size/1024/1024).toFixed(2)," MB"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:275,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:273,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:271,columnNumber:19},this),!i&&f.length>0&&e.jsxDEV(Z,{className:"h-5 w-5 text-success"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:281,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:270,columnNumber:17},this),i&&e.jsxDEV("div",{className:"mt-4 space-y-2",children:[e.jsxDEV(cs,{value:m,className:"w-full"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:287,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:m<50?"Carregando arquivo...":m<90?"Analisando estrutura...":"Finalizando detecção..."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:288,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:286,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:269,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:268,columnNumber:13},this),t&&e.jsxDEV(ae,{variant:"destructive",children:[e.jsxDEV(ne,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:304,columnNumber:15},this),e.jsxDEV(re,{children:t},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:305,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:303,columnNumber:13},this),f.length>0&&!i&&!N&&e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h3",{className:"font-medium",children:"Abas Detectadas:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:312,columnNumber:15},this),e.jsxDEV("div",{className:"grid gap-3",children:f.map((y,V)=>e.jsxDEV(b,{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"font-medium",children:y.name},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:319,columnNumber:27},this),F(y.model)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:318,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:[y.rows.toLocaleString()," linhas •"," ",y.headers.length," colunas"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:322,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:317,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:316,columnNumber:21},this)},V,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:315,columnNumber:19},this))},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:313,columnNumber:15},this),e.jsxDEV(w,{onClick:()=>p&&R(f,p),className:"w-full",disabled:!p,children:"Continuar para Validação"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:332,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:311,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:235,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:224,columnNumber:7},this),e.jsxDEV(ci,{open:N,sheets:f,onComplete:z,onCancel:()=>j(!1)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:347,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/UploadStep.tsx",lineNumber:223,columnNumber:5},this)}function di({corrections:a,onApplyCorrections:n,onReject:s}){const[i,r]=x.useState(!1);x.useState(new Set);const m=x.useMemo(()=>a.reduce((p,d)=>(p.total+=1,d.corrections.length>0&&(p.withCorrections+=1),d.isValid&&(p.valid+=1),d.corrections.some(f=>f.correctionType==="auto_complete")&&(p.autoComplete+=1),d.corrections.some(f=>f.correctionType==="format")&&(p.format+=1),d.corrections.some(f=>f.correctionType==="infer")&&(p.inferred+=1),p),{total:0,withCorrections:0,autoComplete:0,format:0,inferred:0,valid:0}),[a]),l=p=>{switch(p){case"auto_complete":return"bg-blue-500/10 text-blue-700 border-blue-200";case"format":return"bg-green-500/10 text-green-700 border-green-200";case"infer":return"bg-amber-500/10 text-amber-700 border-amber-200";case"default":return"bg-purple-500/10 text-purple-700 border-purple-200";default:return"bg-muted text-muted-foreground"}},t=p=>{switch(p){case"auto_complete":return"Auto-completar";case"format":return"Formatação";case"infer":return"Inferência";case"default":return"Padrão";default:return p}},o=()=>{const p=a.map(d=>d.correctedData);n(p)};return e.jsxDEV(b,{className:"border-primary/20 bg-primary/5",children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(Je,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:124,columnNumber:11},this),"Correções Inteligentes Detectadas"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:123,columnNumber:9},this),e.jsxDEV(I,{children:"O sistema detectou e pode corrigir automaticamente alguns problemas nos dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:127,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:122,columnNumber:7},this),e.jsxDEV(g,{className:"space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxDEV(b,{className:"p-3 text-center",children:[e.jsxDEV("div",{className:"text-lg font-bold",children:m.total},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:136,columnNumber:13},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Total de linhas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:137,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:135,columnNumber:11},this),e.jsxDEV(b,{className:"p-3 text-center bg-success/5 border-success/20",children:[e.jsxDEV("div",{className:"text-lg font-bold text-success",children:m.valid},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:140,columnNumber:13},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Serão válidas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:143,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:139,columnNumber:11},this),e.jsxDEV(b,{className:"p-3 text-center bg-blue-500/5 border-blue-500/20",children:[e.jsxDEV("div",{className:"text-lg font-bold text-blue-600",children:m.withCorrections},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:146,columnNumber:13},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Com correções"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:149,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:145,columnNumber:11},this),e.jsxDEV(b,{className:"p-3 text-center bg-amber-500/5 border-amber-500/20",children:[e.jsxDEV("div",{className:"text-lg font-bold text-amber-600",children:m.inferred},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:152,columnNumber:13},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Inferências"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:155,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:151,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:134,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[e.jsxDEV(C,{className:l("auto_complete"),children:[m.autoComplete," Auto-completar"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:161,columnNumber:11},this),e.jsxDEV(C,{className:l("format"),children:[m.format," Formatação"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:164,columnNumber:11},this),e.jsxDEV(C,{className:l("infer"),children:[m.inferred," Inferências"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:167,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:160,columnNumber:9},this),e.jsxDEV(ae,{className:"border-success bg-success/5",children:[e.jsxDEV(Z,{className:"h-4 w-4 text-success"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:174,columnNumber:11},this),e.jsxDEV(re,{className:"text-success",children:[e.jsxDEV("strong",{children:"Pronto para aplicar:"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:176,columnNumber:13},this)," ",m.valid," de"," ",m.total," linhas serão válidas após as correções"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:175,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:173,columnNumber:9},this),e.jsxDEV("div",{className:"flex justify-center",children:e.jsxDEV(w,{variant:"outline",size:"sm",onClick:()=>r(!i),children:[i?e.jsxDEV(Ea,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:189,columnNumber:15},this):e.jsxDEV(fe,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:191,columnNumber:15},this),i?"Ocultar Detalhes":"Ver Detalhes"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:183,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:182,columnNumber:9},this),i&&e.jsxDEV(_e,{defaultValue:"corrections",className:"w-full",children:[e.jsxDEV(Te,{className:"grid w-full grid-cols-2",children:[e.jsxDEV(K,{value:"corrections",children:["Correções (",m.withCorrections,")"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:201,columnNumber:15},this),e.jsxDEV(K,{value:"samples",children:"Amostras (5)"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:204,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:200,columnNumber:13},this),e.jsxDEV(Q,{value:"corrections",className:"space-y-4",children:e.jsxDEV("div",{className:"max-h-96 overflow-y-auto",children:e.jsxDEV(De,{children:[e.jsxDEV(ke,{children:e.jsxDEV(J,{children:[e.jsxDEV(_,{children:"Linha"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:212,columnNumber:23},this),e.jsxDEV(_,{children:"Campo"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:213,columnNumber:23},this),e.jsxDEV(_,{children:"Tipo"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:214,columnNumber:23},this),e.jsxDEV(_,{children:"Original"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:215,columnNumber:23},this),e.jsxDEV(_,{children:"Corrigido"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:216,columnNumber:23},this),e.jsxDEV(_,{children:"Confiança"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:217,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:211,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:210,columnNumber:19},this),e.jsxDEV(he,{children:a.slice(0,50).map((p,d)=>p.corrections.map((f,h)=>e.jsxDEV(J,{children:[e.jsxDEV(S,{children:d+1},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:224,columnNumber:27},this),e.jsxDEV(S,{className:"font-mono text-sm",children:f.field},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:225,columnNumber:27},this),e.jsxDEV(S,{children:e.jsxDEV(C,{className:l(f.correctionType),variant:"outline",children:t(f.correctionType)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:229,columnNumber:29},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:228,columnNumber:27},this),e.jsxDEV(S,{className:"max-w-32 truncate",children:e.jsxDEV("code",{className:"text-xs bg-muted px-1 py-0.5 rounded",children:String(f.originalValue)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:241,columnNumber:29},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:240,columnNumber:27},this),e.jsxDEV(S,{className:"max-w-32 truncate",children:e.jsxDEV("code",{className:"text-xs bg-success/10 px-1 py-0.5 rounded",children:String(f.correctedValue)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:246,columnNumber:29},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:245,columnNumber:27},this),e.jsxDEV(S,{children:e.jsxDEV(C,{variant:"outline",children:[Math.round(f.confidence*100),"%"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:251,columnNumber:29},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:250,columnNumber:27},this)]},`${d}-${h}`,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:223,columnNumber:25},this)))},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:220,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:209,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:208,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:207,columnNumber:13},this),e.jsxDEV(Q,{value:"samples",className:"space-y-4",children:e.jsxDEV("div",{className:"max-h-96 overflow-y-auto space-y-4",children:a.slice(0,5).map((p,d)=>e.jsxDEV(b,{className:"p-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxDEV(C,{variant:"outline",children:["Linha ",d+1]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:268,columnNumber:23},this),p.isValid?e.jsxDEV(C,{className:"bg-success/10 text-success border-success/20",children:[e.jsxDEV(Z,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:271,columnNumber:27},this),"Válida"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:270,columnNumber:25},this):e.jsxDEV(C,{className:"bg-destructive/10 text-destructive border-destructive/20",children:[e.jsxDEV(ne,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:276,columnNumber:27},this),"Inválida"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:275,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:267,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium mb-1",children:"Dados Originais:"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:283,columnNumber:25},this),e.jsxDEV("pre",{className:"bg-muted p-2 rounded text-xs overflow-x-auto",children:JSON.stringify(p.originalData,null,2)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:284,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:282,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium mb-1",children:"Dados Corrigidos:"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:289,columnNumber:25},this),e.jsxDEV("pre",{className:"bg-success/10 p-2 rounded text-xs overflow-x-auto",children:JSON.stringify(p.correctedData,null,2)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:292,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:288,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:281,columnNumber:21},this),p.corrections.length>0&&e.jsxDEV("div",{className:"mt-2",children:[e.jsxDEV("div",{className:"font-medium mb-1",children:"Correções:"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:299,columnNumber:25},this),e.jsxDEV("div",{className:"flex flex-wrap gap-1",children:p.corrections.map((f,h)=>e.jsxDEV(C,{className:l(f.correctionType),variant:"outline",children:[f.field,":"," ",t(f.correctionType)]},h,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:302,columnNumber:29},this))},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:300,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:298,columnNumber:23},this)]},d,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:266,columnNumber:19},this))},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:264,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:263,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:199,columnNumber:11},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV(w,{variant:"outline",onClick:s,children:"Rejeitar Correções"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:327,columnNumber:11},this),e.jsxDEV(w,{onClick:o,className:"bg-success hover:bg-success/90",children:[e.jsxDEV(Je,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:334,columnNumber:13},this),"Aplicar Correções (",m.withCorrections,")"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:330,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:326,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:132,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/CorrectionInterface.tsx",lineNumber:121,columnNumber:5},this)}function pi({issues:a,onExportIssues:n}){const[s,i]=x.useState({severity:"all",sheet:"all",rule:"all",search:""}),r=x.useRef(null),m=x.useMemo(()=>[...new Set(a.map(j=>j.sheet))].sort(),[a]),l=x.useMemo(()=>[...new Set(a.map(j=>j.rule).filter(Boolean))].sort(),[a]),t=x.useMemo(()=>a.filter(j=>{if(s.severity!=="all"&&j.severity!==s.severity||s.sheet!=="all"&&j.sheet!==s.sheet||s.rule!=="all"&&j.rule!==s.rule)return!1;if(s.search){const c=s.search.toLowerCase(),v=j.message.toLowerCase().includes(c),u=j.column?.toLowerCase().includes(c),E=j.original?.toString().toLowerCase().includes(c);if(!v&&!u&&!E)return!1}return!0}),[a,s]),o=dr({count:t.length,getScrollElement:()=>r.current,estimateSize:()=>56,overscan:5}),p=j=>{switch(j){case"error":return e.jsxDEV(Xs,{className:"h-4 w-4 text-destructive"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:108,columnNumber:16},this);case"warning":return e.jsxDEV(ue,{className:"h-4 w-4 text-warning"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:110,columnNumber:16},this);case"info":return e.jsxDEV(Z,{className:"h-4 w-4 text-info"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:112,columnNumber:16},this)}},d=j=>{switch(j){case"error":return"destructive";case"warning":return"default";case"info":return"secondary"}},f=()=>{const c=[["Severidade","Aba","Linha","Coluna","Regra","Mensagem","Valor Original","Valor Corrigido"].join(","),...t.map(R=>[R.severity,R.sheet,R.row||"",R.column||"",R.rule||"",`"${R.message.replace(/"/g,'""')}"`,`"${(R.original||"").toString().replace(/"/g,'""')}"`,`"${(R.fixed||"").toString().replace(/"/g,'""')}"`].join(","))].join(`
`),v=new Blob([c],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a"),E=URL.createObjectURL(v);u.setAttribute("href",E),u.setAttribute("download",`assistjur-issues-${new Date().toISOString().split("T")[0]}.csv`),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u)},h=()=>{n?n():f()},N=()=>{i({severity:"all",sheet:"all",rule:"all",search:""})};return e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(Gs,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:190,columnNumber:13},this),"Issues Detectadas (",t.length," de ",a.length,")"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:189,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(w,{variant:"outline",size:"sm",onClick:N,children:"Limpar Filtros"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:194,columnNumber:13},this),e.jsxDEV(w,{variant:"outline",size:"sm",onClick:h,children:[e.jsxDEV(ge,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:198,columnNumber:15},this),"Exportar CSV"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:197,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:193,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:188,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-1 block",children:"Severidade"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:207,columnNumber:13},this),e.jsxDEV(te,{value:s.severity,onValueChange:j=>i(c=>({...c,severity:j})),children:[e.jsxDEV(oe,{children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:215,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:214,columnNumber:15},this),e.jsxDEV(me,{children:[e.jsxDEV(L,{value:"all",children:"Todas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:218,columnNumber:17},this),e.jsxDEV(L,{value:"error",children:"Erro"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:219,columnNumber:17},this),e.jsxDEV(L,{value:"warning",children:"Aviso"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:220,columnNumber:17},this),e.jsxDEV(L,{value:"info",children:"Info"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:221,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:217,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:208,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:206,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-1 block",children:"Aba"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:227,columnNumber:13},this),e.jsxDEV(te,{value:s.sheet,onValueChange:j=>i(c=>({...c,sheet:j})),children:[e.jsxDEV(oe,{children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:235,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:234,columnNumber:15},this),e.jsxDEV(me,{children:[e.jsxDEV(L,{value:"all",children:"Todas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:238,columnNumber:17},this),m.map(j=>e.jsxDEV(L,{value:j,children:j},j,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:240,columnNumber:19},this))]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:237,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:228,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:226,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-1 block",children:"Regra"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:249,columnNumber:13},this),e.jsxDEV(te,{value:s.rule,onValueChange:j=>i(c=>({...c,rule:j})),children:[e.jsxDEV(oe,{children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:257,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:256,columnNumber:15},this),e.jsxDEV(me,{children:[e.jsxDEV(L,{value:"all",children:"Todas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:260,columnNumber:17},this),l.map(j=>e.jsxDEV(L,{value:j,children:j},j,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:262,columnNumber:19},this))]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:259,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:250,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:248,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-1 block",children:"Buscar"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:271,columnNumber:13},this),e.jsxDEV(Y,{placeholder:"Buscar na mensagem, coluna ou valor...",value:s.search,onChange:j=>i(c=>({...c,search:j.target.value}))},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:272,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:270,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:205,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:187,columnNumber:7},this),e.jsxDEV(g,{children:[e.jsxDEV("div",{ref:r,className:"rounded-md border max-h-96 overflow-y-auto",children:e.jsxDEV(De,{children:[e.jsxDEV(ke,{children:e.jsxDEV(J,{children:[e.jsxDEV(_,{className:"w-20",children:"Severidade"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:291,columnNumber:17},this),e.jsxDEV(_,{className:"w-24",children:"Aba"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:292,columnNumber:17},this),e.jsxDEV(_,{className:"w-16",children:"Linha"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:293,columnNumber:17},this),e.jsxDEV(_,{className:"w-32",children:"Coluna"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:294,columnNumber:17},this),e.jsxDEV(_,{className:"w-24",children:"Regra"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:295,columnNumber:17},this),e.jsxDEV(_,{children:"Mensagem"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:296,columnNumber:17},this),e.jsxDEV(_,{className:"w-32",children:"Valor Original"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:297,columnNumber:17},this),e.jsxDEV(_,{className:"w-32",children:"Valor Corrigido"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:298,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:290,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:289,columnNumber:13},this),t.length===0?e.jsxDEV(he,{children:e.jsxDEV(J,{children:e.jsxDEV(S,{colSpan:8,className:"text-center text-muted-foreground py-6",children:a.length===0?"Nenhuma issue detectada":"Nenhuma issue corresponde aos filtros"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:304,columnNumber:19},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:303,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:302,columnNumber:15},this):e.jsxDEV(he,{style:{height:`${o.getTotalSize()}px`,position:"relative"},children:o.getVirtualItems().map(j=>{const c=t[j.index];return e.jsxDEV(J,{className:"absolute top-0 left-0 w-full",style:{transform:`translateY(${j.start}px)`},children:[e.jsxDEV(S,{children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[p(c.severity),e.jsxDEV(C,{variant:d(c.severity),className:"text-xs",children:c.severity.toUpperCase()},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:332,columnNumber:27},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:330,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:329,columnNumber:23},this),e.jsxDEV(S,{className:"font-medium",children:c.sheet},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:340,columnNumber:23},this),e.jsxDEV(S,{children:c.row||"-"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:343,columnNumber:23},this),e.jsxDEV(S,{children:c.column||"-"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:344,columnNumber:23},this),e.jsxDEV(S,{children:c.rule&&e.jsxDEV(C,{variant:"outline",className:"text-xs",children:c.rule},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:347,columnNumber:27},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:345,columnNumber:23},this),e.jsxDEV(S,{className:"max-w-xs",children:e.jsxDEV("div",{className:"truncate",title:c.message,children:c.message},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:353,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:352,columnNumber:23},this),e.jsxDEV(S,{className:"max-w-xs",children:c.original&&e.jsxDEV("div",{className:"truncate bg-muted px-2 py-1 rounded text-xs",title:c.original?.toString(),children:c.original?.toString()},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:359,columnNumber:27},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:357,columnNumber:23},this),e.jsxDEV(S,{className:"max-w-xs",children:c.fixed&&e.jsxDEV("div",{className:"truncate bg-success/10 px-2 py-1 rounded text-xs",title:c.fixed?.toString(),children:c.fixed?.toString()},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:369,columnNumber:27},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:367,columnNumber:23},this)]},j.key,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:324,columnNumber:21},this)})},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:315,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:288,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:284,columnNumber:9},this),t.length>0&&e.jsxDEV("div",{className:"mt-4 text-sm text-muted-foreground",children:["Mostrando ",t.length," de ",a.length," issues"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:386,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:283,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/IssuesDataTable.tsx",lineNumber:186,columnNumber:5},this)}function Ni(a){let n="",s=a;for(;s>=0;)n=String.fromCharCode(65+s%26)+n,s=Math.floor(s/26)-1;return n}function fi(a,n){const s=Ni(n),i=a+1;return`${s}${i}`}function xn(a){return/^[A-Z]+\d+$/.test(a)}function bi(a){if(a.length!==20)return!1;const n=a.split("").map(Number),s=n.slice(0,6),i=[2,3,4,5,6,7],r=s.reduce((d,f,h)=>d+f*i[h],0),m=r%11<2?0:11-r%11,l=n.slice(7,13),t=[2,3,4,5,6,7],o=l.reduce((d,f,h)=>d+f*t[h],0),p=o%11<2?0:11-o%11;return n[6]===m&&n[13]===p}function ba(a){return a.length!==20?a:`${a.slice(0,7)}-${a.slice(7,9)}.${a.slice(9,13)}.${a.slice(13,14)}.${a.slice(14,16)}.${a.slice(16)}`}function Be(a){return a?String(a).replace(/\D/g,""):""}function ze(a,n="final"){const s=Be(a),i=[];if(n==="correction"){if(s.length<15)return i.push(`CNJ muito curto: ${s.length} dígitos (mínimo 15 para correção)`),{isValid:!1,formatted:s,cleaned:s,errors:i};let m=s;return s.length<20&&(m=s.padEnd(20,"0")),{isValid:!0,formatted:ba(m),cleaned:m,errors:[]}}s.length!==20&&i.push(`CNJ deve ter exatamente 20 dígitos, encontrados: ${s.length}`),s.length===20&&!bi(s)&&i.push("CNJ com dígitos verificadores inválidos");const r=i.length===0;return{isValid:r,formatted:r?ba(s):s,cleaned:s,errors:i}}function xi(a){const n=ze(a,"correction");if(!n.isValid)return{corrected:Be(a),needsCorrection:!1,reason:n.errors.join("; ")};const s=Be(a),i=n.cleaned;return{corrected:i,needsCorrection:s!==i,reason:s!==i?`CNJ completado de ${s.length} para 20 dígitos`:void 0}}const xa={advogados_ativo:{canonical:"advogados_ativo",synonyms:["Advogados (Polo Ativo)","Advogados Polo Ativo","advogados_polo_ativo","advogados_ativo","Advogados_Ativo"],type:"array"},advogados_passivo:{canonical:"advogados_passivo",synonyms:["Advogados (Polo Passivo)","Advogados Polo Passivo","advogados_polo_passivo","advogados_passivo","Advogados_Passivo"],type:"array"},testemunhas_ativo:{canonical:"testemunhas_ativo",synonyms:["testemunhas_ativo","Testemunhas_Ativo","testemunhas_polo_ativo","Testemunhas (Polo Ativo)"],type:"array"},testemunhas_passivo:{canonical:"testemunhas_passivo",synonyms:["testemunhas_passivo","Testemunhas_Passivo","testemunhas_polo_passivo","Testemunhas (Polo Passivo)"],type:"array"},todas_testemunhas:{canonical:"todas_testemunhas",synonyms:["testemunhas_todas","Testemunhas_Todas","todas_testemunhas","Todas_Testemunhas","testemunhas_completas"],type:"array"},cnj:{canonical:"cnj",synonyms:["cnj","CNJ","numero_cnj","numero_processo"],type:"string"},reclamantes:{canonical:"reclamantes",synonyms:["reclamantes","Reclamantes","autores","requerentes","partes_ativas"],type:"array"},nome_testemunha:{canonical:"nome_testemunha",synonyms:["nome_testemunha","Nome_Testemunha","nome","testemunha","nome_completo"],type:"string"},qtd_depoimentos:{canonical:"qtd_depoimentos",synonyms:["qtd_depoimentos","quantidade_depoimentos","total_depoimentos","numero_depoimentos"],type:"number"}};function ji(a){if(xa[a])return a;const n=a.toLowerCase().trim();for(const[s,i]of Object.entries(xa))if(i.synonyms.some(m=>m.toLowerCase().trim()===n))return s;return null}function Wa(a,n){const s={};return a.forEach(i=>{const r=ji(i);r?s[r]=i:s[i]=i}),s}function Ja(a,n){if(!n)return a;const s={...a};return(!s.reu_nome||s.reu_nome.trim()==="")&&n.applyDefaultReuOnTestemunha&&n.defaultReuNome&&(s.reu_nome=n.defaultReuNome,s.__autofill={...s.__autofill||{},reu_nome:!0}),s}function ja(a,n,s){const i=Wa(a.headers);return n.map(r=>{const m={};Object.entries(i).forEach(([d,f])=>{m[d]=r[f]}),Ja(m,s);const l=m.cnj||"",o=ze(l,"correction").cleaned;return{cnj:o,cnj_digits:Be(o),reclamante_nome:m.reclamante_nome||"",reu_nome:m.reu_nome||"",comarca:m.comarca||"",tribunal:m.tribunal||"",vara:m.vara||"",fase:m.fase||"",status:m.status||"",observacoes:m.observacoes||""}}).filter(r=>{const m=ze(r.cnj,"correction"),l=r.reclamante_nome||r.reu_nome;return m.isValid||l})}function ha(a,n,s){const i=Wa(a.headers);return n.map(r=>{const m={};return Object.entries(i).forEach(([l,t])=>{m[l]=r[t]}),Ja(m,s),{cnj:m.cnj||"",cnj_digits:Be(m.cnj||""),nome_testemunha:m.nome_testemunha||"",reclamante_nome:m.reclamante_nome||"",reu_nome:m.reu_nome||"",observacoes:m.observacoes||""}})}async function hi(a,n){if(a.name.endsWith(".csv"))return new Promise((i,r)=>{Ta.parse(a,{header:!0,skipEmptyLines:!0,complete:m=>{i(m.data)},error:r})});const s=await os(()=>import("./xlsx-PER9UG_v.js"),[]);return new Promise((i,r)=>{const m=new FileReader;m.onload=l=>{try{const t=new Uint8Array(l.target?.result),p=s.read(t,{type:"array"}).Sheets[n.name];if(!p){r(new Error(`Sheet "${n.name}" not found`));return}const d=s.utils.sheet_to_json(p,{header:1}),f=d[0],N=d.slice(1).map(j=>{const c={};return f.forEach((v,u)=>{c[v]=j[u]}),c});i(N)}catch(t){r(t)}},m.onerror=r,m.readAsArrayBuffer(a)})}async function vi(a,n,s=null){const i=await hi(a,n);return n.model==="processo"?{processos:ja(n,i,s)}:n.model==="testemunha"?{testemunhas:ha(n,i,s)}:n.headers.some(m=>["comarca","tribunal","vara","status"].some(l=>m.toLowerCase().includes(l)))?{processos:ja(n,i,s)}:{testemunhas:ha(n,i,s)}}const Js=[{normalized:"cnj",synonyms:["CNJ","cnj","numero_cnj","num_cnj","processo","numero_processo"],required:!0,sheet:"processo"},{normalized:"uf",synonyms:["UF","uf","estado","unidade_federativa","sigla_estado"],required:!0,sheet:"processo"},{normalized:"comarca",synonyms:["comarca","Comarca","COMARCA","municipio","cidade"],required:!0,sheet:"processo"},{normalized:"reclamante_nome",synonyms:["reclamante_nome","Reclamante_Nome","reclamante","Reclamante","Reclamante_Limpo","reclamante_limpo","nome_reclamante","autor","nome_autor","requerente","nome_requerente"],required:!0,sheet:"processo"},{normalized:"reu_nome",synonyms:["reu_nome","Reu_Nome","reu","Reu","REU","reclamado","nome_reclamado","requerido","nome_requerido"],required:!1,sheet:"processo"},{normalized:"advogados_ativo",synonyms:["advogados_ativo","Advogados_Ativo","advogados_polo_ativo","advogado_reclamante","advogados_reclamante","advogado_autor","advogados_autor","representante_legal_ativo"],required:!1,sheet:"processo"},{normalized:"todas_testemunhas",synonyms:["todas_testemunhas","Todas_Testemunhas","testemunhas_todas","testemunhas","lista_testemunhas","nomes_testemunhas","testemunhas_processo","testemunhas_envolvidas"],required:!0,sheet:"processo"},{normalized:"fase",synonyms:["fase","Fase","fase_processual","etapa","situacao_processo"],required:!1,sheet:"processo"},{normalized:"status",synonyms:["status","Status","STATUS","situacao","estado_processo"],required:!1,sheet:"processo"},{normalized:"data_audiencia",synonyms:["data_audiencia","Data_Audiencia","data_da_audiencia","audiencia","proxima_audiencia","dt_audiencia"],required:!1,sheet:"processo"},{normalized:"observacoes",synonyms:["observacoes","Observacoes","observações","Observações","obs","comentarios","notas","anotacoes"],required:!1,sheet:"processo"},{normalized:"tribunal",synonyms:["tribunal","Tribunal","TRIBUNAL","orgao_julgador"],required:!1,sheet:"processo"},{normalized:"vara",synonyms:["vara","Vara","VARA","vara_trabalhista"],required:!1,sheet:"processo"},{normalized:"nome_testemunha",synonyms:["nome_testemunha","Nome_Testemunha","testemunha","nome_da_testemunha","testemunha_nome"],required:!0,sheet:"testemunha"},{normalized:"qtd_depoimentos",synonyms:["qtd_depoimentos","Qtd_Depoimentos","quantidade_depoimentos","numero_depoimentos","total_depoimentos","qtde_depoimentos","count_depoimentos"],required:!0,sheet:"testemunha"},{normalized:"cnjs_como_testemunha",synonyms:["cnjs_como_testemunha","CNJs_Como_Testemunha","cnj_como_testemunha","processos_como_testemunha","lista_cnjs","cnjs_testemunha","cnjs_depoimento","processos_testemunha"],required:!0,sheet:"testemunha"},{normalized:"reclamante_nome",synonyms:["reclamante_nome","Reclamante_Nome","reclamante","nome_reclamante","autor"],required:!1,sheet:"testemunha"},{normalized:"reu_nome",synonyms:["reu_nome","Reu_Nome","reu","nome_reu","reclamado"],required:!1,sheet:"testemunha"}];function gi(a,n){const s=a.trim(),i=Js.find(m=>(m.sheet===n||m.sheet==="both")&&m.synonyms.includes(s));if(i)return i.normalized;const r=Js.find(m=>(m.sheet===n||m.sheet==="both")&&m.synonyms.some(l=>l.toLowerCase()===s.toLowerCase()));return r?r.normalized:null}function wi(a){return Js.filter(n=>n.required&&(n.sheet===a||n.sheet==="both")).map(n=>n.normalized)}function Di(a,n){const s={},i=[],r=wi(n);a.forEach(t=>{const o=gi(t,n);o?s[t]=o:i.push(t)});const m=Object.values(s),l=r.filter(t=>!m.includes(t));return{mapped:s,unmapped:i,missing:l}}function ki(a,n){const s=Di(a,n),i={};return s.unmapped.forEach(r=>{const m=[];n==="processo"&&(r.toLowerCase().includes("reclamante")&&m.push("reclamante_nome"),(r.toLowerCase().includes("reu")||r.toLowerCase().includes("reclamado"))&&m.push("reu_nome"),(r.toLowerCase().includes("cnj")||r.toLowerCase().includes("processo"))&&m.push("cnj")),m.length>0&&(i[r]=m)}),{...s,suggestions:i}}function Vi(a,n,s){const i=[],r={...a};let m=!0;if(s==="processo"){if(r.cnj){const l=r.cnj,t=xi(l);t.needsCorrection&&i.push({field:"cnj",originalValue:l,correctedValue:t.corrected,correctionType:"auto_complete",confidence:.7}),r.cnj=t.corrected,r.cnj_digits=Be(r.cnj)}if(["reclamante_nome","reu_nome"].forEach(l=>{if(r[l]&&typeof r[l]=="string"){const t=r[l],o=t.trim().replace(/\s+/g," ");if(o!==t&&(r[l]=o,i.push({field:l,originalValue:t,correctedValue:o,correctionType:"format",confidence:.9})),o===o.toUpperCase()||o===o.toLowerCase()){const p=o.toLowerCase().replace(/\b\w/g,d=>d.toUpperCase());r[l]=p,i.push({field:l,originalValue:o,correctedValue:p,correctionType:"format",confidence:.8})}}l==="reclamante_nome"&&(!r[l]||String(r[l]).trim()==="")&&(m=!1)}),!r.reu_nome&&r.reclamante_nome){const l=r.reclamante_nome.toLowerCase();if(l.includes("vs")||l.includes("x ")){const t=l.split(/\s+(vs?\.?|x)\s+/i);t.length>=2&&(r.reu_nome=t[1].trim(),i.push({field:"reu_nome",originalValue:null,correctedValue:r.reu_nome,correctionType:"infer",confidence:.6}))}}["advogados_ativo","advogados_passivo","testemunhas_ativo","testemunhas_passivo"].forEach(l=>{if(r[l]&&typeof r[l]=="string"){const t=r[l],o=t.split(/[;,]/).map(p=>p.trim()).filter(Boolean);o.length>0&&(r[l]=o,i.push({field:l,originalValue:t,correctedValue:o,correctionType:"format",confidence:.9}))}})}else s==="testemunha"&&((!r.nome_testemunha||String(r.nome_testemunha).trim()==="")&&(m=!1),r.cnjs_como_testemunha&&(Array.isArray(r.cnjs_como_testemunha)?r.cnjs_como_testemunha:String(r.cnjs_como_testemunha).split(/[;,]/).map(o=>o.trim())).filter(o=>ze(o,"final").isValid).length===0&&(m=!1));return{originalData:a,correctedData:r,corrections:i,isValid:m}}async function Ga(a,n,s){if(!s)throw new Error("Arquivo é obrigatório para validação inteligente");let i=0,r=0;const m=[],l=[],t={processos:[],testemunhas:[]},o={};for(const c of a.sheets)try{const v=await vi(s,c,null),u=c.model==="testemunha"?"testemunha":"processo",E=ki(c.headers,u);E.missing.forEach(z=>{m.push({sheet:c.name,row:0,column:z,severity:"error",rule:"Campo obrigatório não encontrado",message:`Campo obrigatório "${z}" não foi encontrado nos cabeçalhos`,value:"N/A"})}),Object.entries(E.suggestions).forEach(([z,F])=>{m.push({sheet:c.name,row:0,column:z,severity:"warning",rule:"Campo não mapeado",message:`Campo "${z}" não foi mapeado. Sugestões: ${F.join(", ")}`,value:z})});const R=v.processos||v.testemunhas||[];o[c.name]=R.length,R.forEach((z,F)=>{const y=F+1;i++;const V=n.intelligentCorrections?Vi(z,F,u):{originalData:z,correctedData:z,corrections:[],isValid:!0};l.push(V);const O=ze(V.correctedData.cnj,"correction").isValid;if(V.isValid||O){r++;const q=V.correctedData.reclamante_nome||V.correctedData.reu_nome,G=V.correctedData.nome_testemunha;q&&(u==="processo"||!G)?(t.processos||(t.processos=[]),t.processos.push(V.correctedData)):G&&(u==="testemunha"||!q)?(t.testemunhas||(t.testemunhas=[]),t.testemunhas.push(V.correctedData)):O&&(u==="processo"?(t.processos||(t.processos=[]),t.processos.push(V.correctedData)):(t.testemunhas||(t.testemunhas=[]),t.testemunhas.push(V.correctedData)));const T=Be(V.correctedData.cnj);O&&T.length<20&&m.push({sheet:c.name,row:y,column:"cnj",severity:"warning",rule:"CNJ incompleto mas preservado",message:`CNJ tem ${T.length} dígitos (recomendado: 20). Dados preservados para revisão.`,value:V.correctedData.cnj||"N/A"}),V.corrections.forEach(ee=>{m.push({sheet:c.name,row:y,column:ee.field,severity:"info",rule:"Correção automática aplicada",message:`${ee.correctionType}: "${ee.originalValue}" → "${ee.correctedValue}" (confiança: ${Math.round(ee.confidence*100)}%)`,value:ee.originalValue})})}else u==="processo"&&(V.correctedData.reclamante_nome||m.push({sheet:c.name,row:y,column:"reclamante_nome",severity:"error",rule:"Nome do reclamante é obrigatório",message:'Campo "reclamante_nome" é obrigatório mas está vazio',value:V.correctedData.reclamante_nome||"N/A"}),V.correctedData.reu_nome||m.push({sheet:c.name,row:y,column:"reu_nome",severity:"warning",rule:"Nome do réu recomendado",message:'Campo "reu_nome" está vazio mas pode ser preenchido posteriormente',value:V.correctedData.reu_nome||"N/A"}),(!V.correctedData.cnj||!ze(V.correctedData.cnj,"final").isValid)&&m.push({sheet:c.name,row:y,column:"cnj",severity:"error",rule:"CNJ deve ter 20 dígitos",message:"CNJ deve ter formato válido com 20 dígitos numéricos",value:V.correctedData.cnj||"N/A"}))})}catch(v){m.push({sheet:c.name,row:0,column:"sistema",severity:"error",rule:"Erro no processamento",message:`Erro ao processar aba: ${v instanceof Error?v.message:"Erro desconhecido"}`,value:"N/A"})}const p=Object.values(o).reduce((c,v)=>c+v,0),d=Object.values(t).flat().length,f=p-d,h=l.filter(c=>c.corrections.length>0).length,N=l.reduce((c,v)=>c+v.corrections.length,0);return console.log(`🔍 Enhanced Validation Summary:
    📊 File Processing:
    - Original rows loaded: ${p}
    - Successfully processed: ${d}  
    - Filtered out (invalid): ${f}
    - Final valid rows: ${r}
    
    🔧 Corrections Applied:
    - Rows with corrections: ${h}
    - Individual corrections made: ${N}
    
    📈 Data Breakdown:
    - Processos: ${t.processos?.length||0}
    - Testemunhas: ${t.testemunhas?.length||0}`),{summary:{analyzed:p,valid:r,errors:m.filter(c=>c.severity==="error").length,warnings:m.filter(c=>c.severity==="warning").length,infos:m.filter(c=>c.severity==="info").length},issues:m,normalizedData:t,intelligentCorrections:l}}function Xa(){const[a,n]=x.useState(null),[s,i]=x.useState(!1),r=async()=>{i(!0);try{const t=await(await fetch("/template-test-exemplo.csv")).blob(),o=new File([t],"template-test-exemplo.csv",{type:"text/csv"}),p=await qa(o),d={sessionId:crypto.randomUUID(),fileName:o.name,fileSize:o.size,sheets:p,uploadedAt:new Date},f=await Ga(d,{explodeLists:!0,standardizeCNJ:!0,applyDefaultReu:!0,intelligentCorrections:!0},o);n({success:!0,sheets:p.length,analyzed:f.summary.analyzed,valid:f.summary.valid,errors:f.summary.errors,warnings:f.summary.warnings,corrections:f.intelligentCorrections?.length||0,correctionsApplied:f.intelligentCorrections?.filter(h=>h.corrections.length>0).length||0})}catch(m){n({success:!1,error:m instanceof Error?m.message:"Erro desconhecido"})}finally{i(!1)}};return e.jsxDEV(b,{className:"border-primary/20 bg-primary/5",children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(we,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:81,columnNumber:11},this),"Teste do Corretor Inteligente"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:80,columnNumber:9},this),e.jsxDEV(I,{children:"Valide se o template atualizado funciona corretamente com o novo sistema"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:84,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:79,columnNumber:7},this),e.jsxDEV(g,{className:"space-y-4",children:[e.jsxDEV(w,{onClick:r,disabled:s,className:"w-full",children:[e.jsxDEV(ge,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:95,columnNumber:11},this),s?"Testando Template...":"Testar Template Corrigido"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:90,columnNumber:9},this),a&&e.jsxDEV("div",{className:"space-y-4",children:[a.success?e.jsxDEV(ae,{className:"border-success bg-success/5",children:[e.jsxDEV(Z,{className:"h-4 w-4 text-success"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:103,columnNumber:17},this),e.jsxDEV(re,{className:"text-success",children:[e.jsxDEV("strong",{children:"✅ Teste Aprovado!"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:105,columnNumber:19},this)," Template funciona perfeitamente com o Corretor Inteligente"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:104,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:102,columnNumber:15},this):e.jsxDEV(ae,{variant:"destructive",children:[e.jsxDEV(ue,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:111,columnNumber:17},this),e.jsxDEV(re,{children:[e.jsxDEV("strong",{children:"❌ Teste Falhou:"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:113,columnNumber:19},this)," ",a.error]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:112,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:110,columnNumber:15},this),a.success&&e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxDEV(b,{className:"p-3 text-center",children:[e.jsxDEV("div",{className:"text-lg font-bold",children:a.sheets},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:121,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Abas detectadas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:122,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:120,columnNumber:17},this),e.jsxDEV(b,{className:"p-3 text-center",children:[e.jsxDEV("div",{className:"text-lg font-bold",children:a.analyzed},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:127,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Linhas analisadas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:128,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:126,columnNumber:17},this),e.jsxDEV(b,{className:"p-3 text-center bg-success/10 border-success/20",children:[e.jsxDEV("div",{className:"text-lg font-bold text-success",children:a.valid},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:133,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Linhas válidas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:136,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:132,columnNumber:17},this),e.jsxDEV(b,{className:"p-3 text-center bg-blue-500/10 border-blue-500/20",children:[e.jsxDEV("div",{className:"text-lg font-bold text-blue-600",children:a.correctionsApplied},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:141,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Correções aplicadas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:144,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:140,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:119,columnNumber:15},this),a.success&&e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[e.jsxDEV(C,{variant:"outline",className:"bg-success/10 text-success border-success/20",children:[a.errors," Erros"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:153,columnNumber:17},this),e.jsxDEV(C,{variant:"outline",className:"bg-warning/10 text-warning border-warning/20",children:[a.warnings," Avisos"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:159,columnNumber:17},this),e.jsxDEV(C,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/20",children:[a.corrections," Correções Detectadas"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:165,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:152,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:100,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:89,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/importer/ValidationTestButton.tsx",lineNumber:78,columnNumber:5},this)}function Ei(){const{session:a,file:n,validationResult:s,setValidationResult:i,setCurrentStep:r,isProcessing:m,setIsProcessing:l,setError:t}=fs(),[o,p]=x.useState(!1),[d,f]=x.useState([]);x.useEffect(()=>{a&&n&&!s&&h()},[a,n,s]),x.useEffect(()=>{if(s){const y={originalRows:s.summary.analyzed,processedRows:s.summary.valid,filteredRows:s.summary.analyzed-s.summary.valid,validRows:s.summary.valid,correctedRows:d.length,errorRows:s.summary.errors,warningRows:s.summary.warnings};rs.info("Detailed Validation Stats",y,"ValidationStep")}},[s,d]);const h=async()=>{if(!(!a||!n)){l(!0);try{const y=await Ga(a,{explodeLists:!0,standardizeCNJ:!0,applyDefaultReu:!0,intelligentCorrections:!0},n);y.intelligentCorrections&&y.intelligentCorrections.length>0&&(f(y.intelligentCorrections),y.intelligentCorrections.filter(O=>O.corrections.length>0).length>0&&p(!0));const V={summary:y.summary,issues:y.issues,normalizedData:y.normalizedData,downloadUrls:{fixedXlsx:"",reportCsv:"",reportJson:""}};i(V),U({title:"Validação inteligente concluída",description:`${y.summary.analyzed} registros analisados, ${y.summary.valid} válidos, ${y.intelligentCorrections?.filter(P=>P.corrections.length>0).length||0} correções sugeridas`}),rs.info("Final Validation Summary",{originalFile:n.name,fileSize:n.size,sheetsDetected:a.sheets.length,analyzed:y.summary.analyzed,valid:y.summary.valid,errors:y.summary.errors,warnings:y.summary.warnings,correctionsAvailable:y.intelligentCorrections?.length||0,correctionsWithChanges:y.intelligentCorrections?.filter(P=>P.corrections.length>0).length||0},"ValidationStep")}catch(y){const V=y instanceof Error?y.message:"Erro na validação",P=Es.handleAndNotify(y,"ValidationStep.performValidation");t(P.userMessage||V)}finally{l(!1)}}},N=async y=>{const V=d.filter(P=>P.corrections.length>0).length;try{const{generateReports:P}=await os(async()=>{const{generateReports:W}=await import("./report-DoG7o6mc.js");return{generateReports:W}},__vite__mapDeps([2,0,1,3,4,5,6,7,8])),O=y.filter(W=>{const be=ze(W.cnj,"correction"),pe=W.reclamante_nome||W.reu_nome;return be.isValid||pe}),q=y.filter(W=>{const be=ze(W.cnj,"correction"),pe=W.nome_testemunha;return be.isValid||pe}),G=new Map;d.forEach((W,be)=>{W.corrections.forEach(pe=>{const Ve=y[0]||{},qe=Object.keys(Ve).indexOf(pe.field);if(qe>=0){const $e=fi(be+1,qe);G.set($e,{address:$e,original:pe.originalValue,corrected:pe.correctedValue,reason:`${pe.correctionType}: ${pe.reason||"Correção automática"}`})}})});const T={...s,normalizedData:{processos:O.length>0?O:void 0,testemunhas:q.length>0?q:void 0},summary:{...s.summary,valid:O.length+q.length,errors:Math.max(0,s.summary.errors-V)}},ee=await P(T,n?.name||"arquivo_corrigido",G);T.downloadUrls=ee,i(T),p(!1);const H=O.length+q.length;U({title:"Correções aplicadas com sucesso",description:`${V} correções aplicadas. ${H} registros válidos prontos para importação. Downloads disponíveis.`})}catch(P){const O=Es.handleAndNotify(P,"ValidationStep.handleApplyCorrections");rs.error("Erro ao aplicar correções",{error:O.message,correctionsCount:d.length},"ValidationStep")}},j=()=>{p(!1),U({title:"Correções rejeitadas",description:"Continuando com os dados originais"})};if(!a||!n)return e.jsxDEV(ae,{variant:"destructive",children:[e.jsxDEV(ne,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:260,columnNumber:9},this),e.jsxDEV(re,{children:"Sessão ou arquivo não encontrado. Volte ao passo anterior."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:261,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:259,columnNumber:7},this);if(m||!s)return e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(Ds,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:273,columnNumber:13},this),"Validação e Normalização"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:272,columnNumber:11},this),e.jsxDEV(I,{children:"Verificando a qualidade e consistência dos dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:276,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:271,columnNumber:9},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"flex items-center justify-center py-12",children:e.jsxDEV("div",{className:"text-center space-y-4",children:[e.jsxDEV(Ie,{className:"h-12 w-12 animate-spin mx-auto text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:283,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:"Validando arquivo..."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:285,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-2",children:"Processando dados reais para validação completa"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:286,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:284,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:282,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:281,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:280,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:270,columnNumber:7},this);const{summary:c,issues:v}=s,u=c.errors>0,E=d.length>0&&d.some(y=>y.corrections.length>0),R=!o&&E,z=c.valid>0&&(!u||R),F=s.downloadUrls&&(s.downloadUrls.fixedXlsx||s.downloadUrls.reportCsv||s.downloadUrls.reportJson);return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxDEV(b,{className:"text-center p-4",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:c.analyzed.toLocaleString()},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:314,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Linhas analisadas"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:317,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:313,columnNumber:9},this),e.jsxDEV(b,{className:"text-center p-4 bg-success/5 border-success/20",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-success",children:c.valid.toLocaleString()},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:320,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Linhas válidas"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:323,columnNumber:11},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground mt-1",children:c.analyzed>0?`${Math.round(c.valid/c.analyzed*100)}%`:"0%"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:324,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:319,columnNumber:9},this),e.jsxDEV(b,{className:"text-center p-4 bg-destructive/5 border-destructive/20",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-destructive",children:c.errors},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:331,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Erros"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:334,columnNumber:11},this),c.errors>0&&e.jsxDEV("div",{className:"text-xs text-destructive mt-1",children:"Impedem publicação"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:336,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:330,columnNumber:9},this),e.jsxDEV(b,{className:"text-center p-4 bg-warning/5 border-warning/20",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-warning",children:c.warnings},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:342,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Avisos"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:345,columnNumber:11},this),c.warnings>0&&e.jsxDEV("div",{className:"text-xs text-warning mt-1",children:"Permitido publicar"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:347,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:341,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:312,columnNumber:7},this),o&&E&&e.jsxDEV(di,{corrections:d,onApplyCorrections:N,onReject:j},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:354,columnNumber:9},this),F&&e.jsxDEV(b,{className:"border-blue-500/20 bg-blue-500/5",children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(ge,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:366,columnNumber:15},this),"Downloads Disponíveis"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:365,columnNumber:13},this),e.jsxDEV(I,{children:"Baixe os arquivos processados e relatórios de correção"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:369,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:364,columnNumber:11},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.downloadUrls?.fixedXlsx&&e.jsxDEV(w,{asChild:!0,variant:"outline",className:"justify-start",children:e.jsxDEV("a",{href:s.downloadUrls.fixedXlsx,download:"arquivo_corrigido.xlsx",children:[e.jsxDEV(Ds,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:381,columnNumber:21},this),"Arquivo Corrigido"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:377,columnNumber:19},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:376,columnNumber:17},this),s.downloadUrls?.reportCsv&&e.jsxDEV(w,{asChild:!0,variant:"outline",className:"justify-start",children:e.jsxDEV("a",{href:s.downloadUrls.reportCsv,download:"relatorio_erros.csv",children:[e.jsxDEV(ne,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:392,columnNumber:21},this),"Relatório CSV"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:388,columnNumber:19},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:387,columnNumber:17},this),s.downloadUrls?.reportJson&&e.jsxDEV(w,{asChild:!0,variant:"outline",className:"justify-start",children:e.jsxDEV("a",{href:s.downloadUrls.reportJson,download:"relatorio_completo.json",children:[e.jsxDEV(gs,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:403,columnNumber:21},this),"Relatório JSON"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:399,columnNumber:19},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:398,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:374,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:373,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:363,columnNumber:9},this),z&&!o&&e.jsxDEV(ae,{className:"border-success bg-success/5",children:[e.jsxDEV(Z,{className:"h-4 w-4 text-success"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:416,columnNumber:11},this),e.jsxDEV(re,{className:"text-success",children:["✅ Arquivo pronto para publicação! ",c.valid," registros serão importados.",E&&R&&e.jsxDEV("div",{className:"mt-1 text-sm",children:"Correções automáticas aplicadas com sucesso."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:421,columnNumber:15},this),E&&!R&&e.jsxDEV(w,{variant:"link",size:"sm",className:"ml-2 p-0 h-auto text-success",onClick:()=>p(!0),children:[e.jsxDEV(Je,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:432,columnNumber:17},this),"Ver correções sugeridas"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:426,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:417,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:415,columnNumber:9},this),u&&o&&e.jsxDEV(ae,{variant:"destructive",children:[e.jsxDEV(ne,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:442,columnNumber:11},this),e.jsxDEV(re,{children:["❌ Corrija os erros antes de prosseguir. ",c.errors," problemas impedem a importação.",E&&e.jsxDEV(w,{variant:"link",size:"sm",className:"ml-2 p-0 h-auto text-destructive",onClick:()=>p(!0),children:[e.jsxDEV(Je,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:453,columnNumber:17},this),"Ver correções automáticas"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:447,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:443,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:441,columnNumber:9},this),u&&!o&&!R&&e.jsxDEV(ae,{variant:"destructive",children:[e.jsxDEV(ne,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:463,columnNumber:11},this),e.jsxDEV(re,{children:["❌ ",c.errors," problemas impedem a importação.",E&&e.jsxDEV(w,{variant:"link",size:"sm",className:"ml-2 p-0 h-auto text-destructive",onClick:()=>p(!0),children:[e.jsxDEV(Je,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:473,columnNumber:17},this),"Aplicar correções automáticas"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:467,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:464,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:462,columnNumber:9},this),v.length>0&&e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Problemas Detectados"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:485,columnNumber:13},this),e.jsxDEV(I,{children:"Revise e corrija os problemas antes de prosseguir"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:486,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:484,columnNumber:11},this),e.jsxDEV(g,{children:e.jsxDEV(pi,{issues:v.map(y=>({...y,message:y.message||y.rule}))},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:491,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:490,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:483,columnNumber:9},this),e.jsxDEV(Xa,{},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:502,columnNumber:7},this),e.jsxDEV(b,{className:"border-blue-500/20 bg-blue-500/5",children:e.jsxDEV(g,{className:"p-4",children:e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-blue-700",children:"Página de Teste Completa"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:509,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Acesse a página dedicada para testes detalhados do Corretor Inteligente"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:512,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:508,columnNumber:13},this),e.jsxDEV(w,{asChild:!0,variant:"outline",className:"border-blue-500/20 text-blue-700",children:e.jsxDEV("a",{href:"/admin/base-import/test",target:"_blank",rel:"noopener noreferrer",children:"Abrir Teste"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:522,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:517,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:507,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:506,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:505,columnNumber:7},this),z&&e.jsxDEV(b,{className:"border-primary/20 bg-primary/5",children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"text-sm flex items-center gap-2",children:[e.jsxDEV(Ie,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:539,columnNumber:15},this),"Otimização Opcional"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:538,columnNumber:13},this),e.jsxDEV(I,{children:"Execute uma revisão completa para detectar padrões suspeitos e otimizar a base"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:542,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:537,columnNumber:11},this),e.jsxDEV(g,{children:e.jsxDEV(Ua,{},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:548,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:547,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:536,columnNumber:9},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV(w,{variant:"outline",onClick:()=>r("upload"),children:"Voltar"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:555,columnNumber:9},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(w,{variant:"outline",onClick:h,disabled:m,children:[m&&e.jsxDEV(Ie,{className:"h-4 w-4 mr-2 animate-spin"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:565,columnNumber:15},this),"Revalidar"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:559,columnNumber:11},this),e.jsxDEV(w,{onClick:()=>r("preview"),disabled:!z,children:u&&!R?"Corrigir Erros Primeiro":"Continuar para Prévia"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:569,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:558,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:554,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/ValidationStep.tsx",lineNumber:310,columnNumber:5},this)}function yi(){const{validationResult:a,setCurrentStep:n}=fs(),[s,i]=x.useState("processos"),r=x.useMemo(()=>{if(!a?.normalizedData)return{processos:[],testemunhas:[]};const o=Array.isArray(a.normalizedData.processos)?a.normalizedData.processos:[],p=Array.isArray(a.normalizedData.testemunhas)?a.normalizedData.testemunhas:[];return{processos:o.slice(0,10),testemunhas:p.slice(0,10)}},[a]),m=x.useMemo(()=>{if(!a?.normalizedData)return{processos:0,testemunhas:0};const o=Array.isArray(a.normalizedData.processos)?a.normalizedData.processos:[],p=Array.isArray(a.normalizedData.testemunhas)?a.normalizedData.testemunhas:[];return{processos:o.length,testemunhas:p.length}},[a]);if(!a||!a.normalizedData)return e.jsxDEV(b,{children:e.jsxDEV(g,{className:"p-8 text-center",children:[e.jsxDEV(ne,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:70,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground mb-4",children:"Nenhum dado de validação disponível"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:71,columnNumber:11},this),e.jsxDEV(w,{onClick:()=>n("validation"),variant:"outline",children:"Voltar para Validação"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:74,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:69,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:68,columnNumber:7},this);if(!(m.processos>0||m.testemunhas>0))return e.jsxDEV(b,{children:e.jsxDEV(g,{className:"p-8 text-center",children:[e.jsxDEV(ne,{className:"h-12 w-12 mx-auto mb-4 text-warning"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:91,columnNumber:11},this),e.jsxDEV("p",{className:"text-lg font-medium mb-2",children:"Nenhum dado válido encontrado"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:92,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground mb-4",children:"Não foi possível processar dados válidos do arquivo enviado."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:95,columnNumber:11},this),e.jsxDEV(w,{onClick:()=>n("upload"),variant:"outline",children:"Enviar Novo Arquivo"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:98,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:90,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:89,columnNumber:7},this);const{summary:t}=a;return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxDEV(b,{className:"text-center p-4",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:t.valid.toLocaleString()},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:113,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Registros válidos"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:116,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:112,columnNumber:9},this),e.jsxDEV(b,{className:"text-center p-4",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:[t.analyzed>0?Math.round(t.valid/t.analyzed*100):0,"%"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:119,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Taxa de sucesso"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:125,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:118,columnNumber:9},this),e.jsxDEV(b,{className:"text-center p-4",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:t.errors+t.warnings},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:128,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Problemas detectados"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:131,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:127,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:111,columnNumber:7},this),e.jsxDEV(ae,{className:"border-primary bg-primary/5",children:[e.jsxDEV(fe,{className:"h-4 w-4 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:139,columnNumber:9},this),e.jsxDEV(re,{className:"text-primary",children:[e.jsxDEV("strong",{children:"Prévia da Importação:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:141,columnNumber:11},this)," ",t.valid," registros serão processados e inseridos na base de dados. Os dados passarão por validação final e normalização antes da inserção."]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:140,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:138,columnNumber:7},this),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(fe,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:151,columnNumber:13},this),"Prévia dos Dados"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:150,columnNumber:11},this),e.jsxDEV(I,{children:"Amostra dos dados processados e normalizados (primeiros 10 registros)"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:154,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:149,columnNumber:9},this),e.jsxDEV(g,{children:e.jsxDEV(_e,{value:s,onValueChange:i,children:[e.jsxDEV(Te,{className:"grid w-full grid-cols-2",children:[e.jsxDEV(K,{value:"processos",className:"flex items-center gap-2",children:[e.jsxDEV(ya,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:166,columnNumber:17},this),"Por Processo (",m.processos,")"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:162,columnNumber:15},this),e.jsxDEV(K,{value:"testemunhas",className:"flex items-center gap-2",children:[e.jsxDEV(ms,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:173,columnNumber:17},this),"Por Testemunha (",m.testemunhas,")"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:169,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:161,columnNumber:13},this),e.jsxDEV(Q,{value:"processos",className:"mt-6",children:r.processos.length>0?e.jsxDEV("div",{className:"border rounded-lg overflow-x-auto",children:e.jsxDEV(De,{children:[e.jsxDEV(ke,{children:e.jsxDEV(J,{children:[e.jsxDEV(_,{children:"CNJ"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:184,columnNumber:25},this),e.jsxDEV(_,{children:"Reclamante"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:185,columnNumber:25},this),e.jsxDEV(_,{children:"Réu"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:186,columnNumber:25},this),e.jsxDEV(_,{children:"Comarca"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:187,columnNumber:25},this),e.jsxDEV(_,{children:"Status"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:188,columnNumber:25},this),e.jsxDEV(_,{children:"Flags"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:189,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:183,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:182,columnNumber:21},this),e.jsxDEV(he,{children:r.processos.map((o,p)=>{let d="N/A";if(o.cnj_digits&&String(o.cnj_digits).length>=8)d=`****-**.${String(o.cnj_digits).slice(-8,-4)}.*.**.****`;else if(o.cnj){const f=String(o.cnj);d=f.length>8?`****${f.slice(-8)}`:f}return e.jsxDEV(J,{children:[e.jsxDEV(S,{className:"font-mono text-sm",children:d},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:211,columnNumber:31},this),e.jsxDEV(S,{children:o.reclamante_nome?o.reclamante_nome.length>25?o.reclamante_nome.substring(0,25)+"...":o.reclamante_nome:"N/A"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:214,columnNumber:31},this),e.jsxDEV(S,{children:o.reu_nome?o.reu_nome.length>25?o.reu_nome.substring(0,25)+"...":o.reu_nome:"N/A"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:224,columnNumber:31},this),e.jsxDEV(S,{children:o.comarca||"N/A"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:231,columnNumber:31},this),e.jsxDEV(S,{children:e.jsxDEV(C,{variant:"secondary",children:"Pronto para importar"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:233,columnNumber:33},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:232,columnNumber:31},this),e.jsxDEV(S,{children:e.jsxDEV("div",{className:"flex gap-1 flex-wrap",children:[o.triangulacao_confirmada&&e.jsxDEV(C,{variant:"outline",className:"text-xs",children:"Triangulação"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:240,columnNumber:37},this),o.troca_direta&&e.jsxDEV(C,{variant:"outline",className:"text-xs",children:"Troca Direta"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:248,columnNumber:37},this),o.prova_emprestada&&e.jsxDEV(C,{variant:"outline",className:"text-xs",children:"Prova Emprestada"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:256,columnNumber:37},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:238,columnNumber:33},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:237,columnNumber:31},this)]},p,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:210,columnNumber:29},this)})},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:192,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:181,columnNumber:19},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:180,columnNumber:17},this):e.jsxDEV(ae,{children:[e.jsxDEV(ne,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:274,columnNumber:19},this),e.jsxDEV(re,{children:"Nenhum processo válido encontrado para prévia."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:275,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:273,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:178,columnNumber:13},this),e.jsxDEV(Q,{value:"testemunhas",className:"mt-6",children:r.testemunhas.length>0?e.jsxDEV("div",{className:"border rounded-lg overflow-x-auto",children:e.jsxDEV(De,{children:[e.jsxDEV(ke,{children:e.jsxDEV(J,{children:[e.jsxDEV(_,{children:"Nome da Testemunha"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:288,columnNumber:25},this),e.jsxDEV(_,{children:"Qtd. Depoimentos"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:289,columnNumber:25},this),e.jsxDEV(_,{children:"CNJs como Testemunha"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:290,columnNumber:25},this),e.jsxDEV(_,{children:"Reclamante"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:291,columnNumber:25},this),e.jsxDEV(_,{children:"Flags"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:292,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:287,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:286,columnNumber:21},this),e.jsxDEV(he,{children:r.testemunhas.map((o,p)=>{const d=typeof o.qtd_depoimentos=="number"?o.qtd_depoimentos:parseInt(String(o.qtd_depoimentos||"0"),10)||0;let f="N/A";return o.cnjs_como_testemunha&&(Array.isArray(o.cnjs_como_testemunha)?f=`${o.cnjs_como_testemunha.length} CNJs`:f="1 CNJ"),e.jsxDEV(J,{children:[e.jsxDEV(S,{className:"font-medium",children:o.nome_testemunha||o.nome_civil||"N/A"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:321,columnNumber:31},this),e.jsxDEV(S,{children:e.jsxDEV(C,{variant:"outline",children:d},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:327,columnNumber:33},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:326,columnNumber:31},this),e.jsxDEV(S,{className:"max-w-xs",children:e.jsxDEV("div",{className:"text-sm text-muted-foreground truncate",children:f},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:332,columnNumber:33},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:331,columnNumber:31},this),e.jsxDEV(S,{children:o.reclamante_nome?o.reclamante_nome.length>25?o.reclamante_nome.substring(0,25)+"...":o.reclamante_nome:"N/A"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:336,columnNumber:31},this),e.jsxDEV(S,{children:e.jsxDEV("div",{className:"flex gap-1 flex-wrap",children:[o.e_prova_emprestada&&e.jsxDEV(C,{variant:"outline",className:"text-xs text-warning",children:"Prova Emprestada"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:349,columnNumber:37},this),d>10&&e.jsxDEV(C,{variant:"outline",className:"text-xs text-primary",children:"Alta Frequência"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:357,columnNumber:37},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:347,columnNumber:33},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:346,columnNumber:31},this)]},p,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:320,columnNumber:29},this)})},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:295,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:285,columnNumber:19},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:284,columnNumber:17},this):e.jsxDEV(ae,{children:[e.jsxDEV(ne,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:375,columnNumber:19},this),e.jsxDEV(re,{children:"Nenhuma testemunha válida encontrada para prévia."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:376,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:374,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:282,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:160,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:159,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:148,columnNumber:7},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV(w,{variant:"outline",onClick:()=>n("validation"),children:"Voltar para Validação"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:388,columnNumber:9},this),e.jsxDEV(w,{onClick:()=>n("publish"),className:"bg-success hover:bg-success/90",disabled:t.errors>0||t.valid===0,children:"Publicar Nova Versão"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:391,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:387,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PreviewStep.tsx",lineNumber:109,columnNumber:5},this)}function Ci(){const{session:a,file:n,validationResult:s,resetWizard:i,isProcessing:r,setIsProcessing:m,uploadProgress:l,setUploadProgress:t}=fs(),[o,p]=x.useState(!1),[d,f]=x.useState(null),h=async(j=0)=>{if(!(!n||!s||!a)){m(!0),t(0);try{const{data:{session:c}}=await M.auth.getSession();if(!c?.access_token)throw new Error("Sem sessão");t(10);const{data:u,error:E}=await M.functions.invoke("create-version",{headers:{"x-retry-count":j.toString()}});if(E)throw new Error("Falha ao criar nova versão: "+E.message);if(!u||!u.versionId)throw new Error("Resposta inválida da criação de versão: "+JSON.stringify(u));const R=s.normalizedData?.processos||[],z=s.normalizedData?.testemunhas||[];if(R.length===0&&z.length===0)throw new Error("Nenhum dado válido encontrado para importação. Verifique se o arquivo contém dados no formato correto.");t(30);const F=M.functions.invoke("import-into-version",{body:{versionId:u.versionId,processos:R,testemunhas:z,fileChecksum:c?.user?.id||"unknown",filename:n.name}}),y=new Promise((G,T)=>setTimeout(()=>T(new Error("Timeout na importação - arquivo muito grande ou conexão lenta")),48e4)),{data:V,error:P}=await Promise.race([F,y]);if(P){if((P.message?.includes("timeout")||P.message?.includes("network")||P.message?.includes("504")||P.message?.includes("502"))&&j<2)return U({title:"Conectividade instável",description:`Tentativa ${j+1}/3 - Tentando novamente...`}),await new Promise(G=>setTimeout(G,5e3)),h(j+1);throw new Error("Falha na importação: "+P.message)}if(!V||!V.summary)throw new Error("Resposta inválida da importação");t(80);const{data:O,error:q}=await M.functions.invoke("publish-version",{body:{versionId:u.versionId}});if(q)throw new Error("Falha ao publicar versão: "+q.message);t(100),f({...V,version:{id:u.versionId,number:u.number,publishedAt:O.publishedAt}}),p(!0),U({title:"Versão publicada com sucesso!",description:`Versão v${u.number} com ${V.summary?.imported||0} registros`}),localStorage.setItem("import_completed",Date.now().toString()),window.dispatchEvent(new Event("storage"))}catch(c){let v=c.message||"Falha ao publicar dados",u="Erro na publicação";c.message?.includes("timeout")?(u="Timeout na operação",v="A operação demorou muito para completar. Tente novamente com um arquivo menor ou verifique sua conexão."):c.message?.includes("504")&&(u="Servidor sobrecarregado",v="O servidor está processando muitos dados. Aguarde um momento e tente novamente."),U({title:u,description:v,variant:"destructive"})}finally{m(!1)}}},N=()=>{i(),U({title:"Nova importação iniciada",description:"Você pode fazer upload de um novo arquivo"})};return!a||!n||!s?e.jsxDEV(ae,{variant:"destructive",children:[e.jsxDEV(ne,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:209,columnNumber:9},this),e.jsxDEV(re,{children:"Dados da sessão não encontrados. Volte ao início do processo."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:210,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:208,columnNumber:7},this):o&&d?e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"text-center",children:[e.jsxDEV(k,{className:"flex items-center justify-center gap-2 text-success",children:[e.jsxDEV(pr,{className:"h-6 w-6"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:222,columnNumber:13},this),"Importação Concluída!"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:221,columnNumber:11},this),e.jsxDEV(I,{children:"Os dados foram importados com sucesso na base de dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:225,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:220,columnNumber:9},this),e.jsxDEV(g,{className:"space-y-6",children:[e.jsxDEV(ae,{className:"border-success bg-success/5",children:[e.jsxDEV(Z,{className:"h-4 w-4 text-success"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:231,columnNumber:13},this),e.jsxDEV(re,{className:"text-success",children:"✅ Importação realizada com sucesso! Os dados estão agora disponíveis para consulta."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:232,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:230,columnNumber:11},this),e.jsxDEV("div",{className:"bg-muted p-4 rounded-lg space-y-3",children:[e.jsxDEV("h4",{className:"font-medium",children:"Resumo da Importação:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:239,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Arquivo:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:242,columnNumber:17},this)," ",n.name]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:241,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Tamanho:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:245,columnNumber:17},this)," ",(n.size/1024/1024).toFixed(2)," ","MB"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:244,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Registros importados:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:249,columnNumber:17},this),e.jsxDEV("span",{className:"text-success font-semibold ml-1",children:d.summary?.valid_rows||s.summary.valid},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:250,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:248,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Taxa de sucesso:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:256,columnNumber:17},this),e.jsxDEV("span",{className:"text-success ml-1",children:s.summary.analyzed>0?`${Math.round(s.summary.valid/s.summary.analyzed*100)}%`:"0%"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:257,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:255,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:240,columnNumber:13},this),d.version&&e.jsxDEV("div",{className:"mt-4 p-3 bg-success/10 rounded-lg border border-success/20",children:e.jsxDEV("div",{className:"text-sm space-y-1",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Versão:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:269,columnNumber:21},this)," v",d.version.number]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:268,columnNumber:19},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"ID da versão:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:272,columnNumber:21},this)," ",d.version.id]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:271,columnNumber:19},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Publicada em:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:275,columnNumber:21},this)," ",new Date(d.version.publishedAt).toLocaleString("pt-BR")]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:274,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:267,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:266,columnNumber:15},this),d.summary&&e.jsxDEV("div",{className:"mt-4 p-3 bg-primary/10 rounded-lg",children:e.jsxDEV("div",{className:"text-sm space-y-1",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Processos:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:288,columnNumber:21},this)," ",d.summary.processos_count||d.imported||0]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:287,columnNumber:19},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Testemunhas:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:294,columnNumber:21},this)," ",d.summary.testemunhas_count||0]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:293,columnNumber:19},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Stubs criados:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:298,columnNumber:21},this)," ",d.summary.stubs_created||0]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:297,columnNumber:19},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Flags detectadas:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:302,columnNumber:21},this)," ",d.summary.flags_detected||0]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:301,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:286,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:285,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:238,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-4 justify-center",children:[e.jsxDEV(w,{onClick:N,className:"flex-1",children:"Nova Importação"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:311,columnNumber:13},this),e.jsxDEV(w,{variant:"outline",onClick:()=>window.location.href="/admin/versoes",className:"flex-1",children:"Ver Versões"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:314,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:310,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:229,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:219,columnNumber:7},this):e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(Z,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:331,columnNumber:11},this),"Publicar Nova Versão"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:330,columnNumber:9},this),e.jsxDEV(I,{children:"Confirme a publicação da nova versão da base de dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:334,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:329,columnNumber:7},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"space-y-6",children:r?e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV(Ie,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:411,columnNumber:15},this),e.jsxDEV("p",{className:"font-medium",children:"Publicando base de dados..."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:412,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-2",children:"Processando e importando todos os registros. Isso pode levar alguns minutos."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:413,columnNumber:15},this),e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV(cs,{value:l,className:"w-full"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:418,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-1",children:l<100?`Processando... ${Math.round(l)}%`:"Finalizando..."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:419,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:417,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:410,columnNumber:13},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ae,{children:[e.jsxDEV(ne,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:343,columnNumber:17},this),e.jsxDEV(re,{children:"Esta ação irá importar os dados validados para a base ativa. Todas as consultas passarão a incluir os novos registros."},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:344,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:342,columnNumber:15},this),e.jsxDEV("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxDEV("h4",{className:"font-medium mb-3",children:"Resumo da Importação:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:351,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Arquivo:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:354,columnNumber:21},this)," ",n.name]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:353,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Tamanho:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:357,columnNumber:21},this)," ",(n.size/1024/1024).toFixed(2)," MB"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:356,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Registros válidos:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:361,columnNumber:21},this),e.jsxDEV("span",{className:"text-success font-semibold ml-1",children:s.summary.valid.toLocaleString()},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:362,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:360,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Problemas:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:367,columnNumber:21},this),e.jsxDEV("span",{className:"text-warning ml-1",children:s.summary.errors+s.summary.warnings},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:368,columnNumber:21},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground ml-1",children:["(",s.summary.errors," erros,"," ",s.summary.warnings," avisos)"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:372,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:366,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:352,columnNumber:17},this),e.jsxDEV("div",{className:"mt-4 p-3 bg-gradient-to-r from-success/10 to-primary/10 rounded-lg",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"Qualidade dos Dados:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:381,columnNumber:21},this),e.jsxDEV("span",{className:"text-sm font-bold text-success",children:s.summary.analyzed>0?`${Math.round(s.summary.valid/s.summary.analyzed*100)}% aprovado`:"0% aprovado"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:384,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:380,columnNumber:19},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:379,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:350,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV(w,{variant:"outline",onClick:()=>window.history.back(),children:"Cancelar"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:394,columnNumber:17},this),e.jsxDEV(w,{onClick:()=>h(),disabled:s.summary.errors>0||s.summary.valid===0,className:"bg-success hover:bg-success/90",children:"Confirmar Publicação"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:397,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:393,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:341,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:339,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:338,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/steps/PublishStep.tsx",lineNumber:328,columnNumber:5},this)}function Si({progress:a,stage:n,stats:s={}}){const r=(()=>{switch(n){case"validating":return{title:"Validando dados",description:"Verificando estrutura e qualidade dos dados",icon:e.jsxDEV(ne,{className:"h-4 w-4 text-warning"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:32,columnNumber:17},this)};case"creating-version":return{title:"Criando nova versão",description:"Preparando ambiente para importação",icon:e.jsxDEV(Pe,{className:"h-4 w-4 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:38,columnNumber:17},this)};case"importing":return{title:"Importando dados",description:"Processando e salvando registros na base de dados",icon:e.jsxDEV(Ae,{className:"h-4 w-4 text-primary animate-spin"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:44,columnNumber:17},this)};case"publishing":return{title:"Publicando versão",description:"Ativando nova versão da base de dados",icon:e.jsxDEV(Z,{className:"h-4 w-4 text-success"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:50,columnNumber:17},this)};case"completed":return{title:"Importação concluída",description:"Todos os dados foram processados com sucesso",icon:e.jsxDEV(Z,{className:"h-4 w-4 text-success"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:56,columnNumber:17},this)};default:return{title:"Processando...",description:"Aguarde",icon:e.jsxDEV(Ae,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:62,columnNumber:17},this)}}})();return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[r.icon,e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h4",{className:"font-medium",children:r.title},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:74,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:r.description},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:75,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:73,columnNumber:9},this),e.jsxDEV(C,{variant:a===100?"default":"secondary",children:[Math.round(a),"%"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:79,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:71,columnNumber:7},this),e.jsxDEV(cs,{value:a,className:"w-full"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:84,columnNumber:7},this),(s.total||s.processed||s.errors)&&e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[s.total&&e.jsxDEV("div",{className:"bg-muted/50 p-2 rounded text-center",children:[e.jsxDEV("div",{className:"font-medium",children:s.total.toLocaleString()},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:90,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Total"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:91,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:89,columnNumber:13},this),s.processed&&e.jsxDEV("div",{className:"bg-success/10 p-2 rounded text-center border border-success/20",children:[e.jsxDEV("div",{className:"font-medium text-success",children:s.processed.toLocaleString()},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:96,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-success/80",children:"Processados"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:99,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:95,columnNumber:13},this),s.errors!==void 0&&e.jsxDEV("div",{className:"bg-destructive/10 p-2 rounded text-center border border-destructive/20",children:[e.jsxDEV("div",{className:"font-medium text-destructive",children:s.errors.toLocaleString()},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:104,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-destructive/80",children:"Erros"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:107,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:103,columnNumber:13},this),s.warnings!==void 0&&e.jsxDEV("div",{className:"bg-warning/10 p-2 rounded text-center border border-warning/20",children:[e.jsxDEV("div",{className:"font-medium text-warning",children:s.warnings.toLocaleString()},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:112,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-warning/80",children:"Avisos"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:115,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:111,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:87,columnNumber:9},this),n==="importing"&&s.processed&&s.total&&e.jsxDEV("div",{className:"text-xs text-muted-foreground text-center",children:["Processando registros... (",s.processed.toLocaleString()," de"," ",s.total.toLocaleString(),")"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:122,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImportProgressMonitor.tsx",lineNumber:70,columnNumber:5},this)}const bs=[{id:"upload",label:"Upload",icon:Va},{id:"validation",label:"Validação",icon:Ds},{id:"preview",label:"Prévia",icon:fe},{id:"publish",label:"Publicação",icon:Z}];function Pi(){const{currentStep:a,session:n,file:s,validationResult:i,isProcessing:r,uploadProgress:m}=fs(),l=x.useCallback(o=>{const p=bs.findIndex(f=>f.id===a),d=bs.findIndex(f=>f.id===o);return d<p?"completed":d===p?"current":"pending"},[a]),t=()=>{switch(a){case"upload":return e.jsxDEV(ui,{},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:57,columnNumber:16},this);case"validation":return n&&s?e.jsxDEV(Ei,{},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:59,columnNumber:34},this):null;case"preview":return n&&i?e.jsxDEV(yi,{},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:61,columnNumber:46},this):null;case"publish":return n&&i?e.jsxDEV(Ci,{},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:63,columnNumber:46},this):null;default:return null}};return e.jsxDEV("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxDEV("div",{className:"text-center space-y-2",children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight",children:"Importação de Dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:73,columnNumber:9},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Pipeline completo de análise de testemunhas e processos com detecção de padrões"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:76,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:72,columnNumber:7},this),e.jsxDEV(b,{children:e.jsxDEV(g,{className:"p-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:bs.map((o,p)=>{const d=l(o.id),f=p===bs.length-1;return e.jsxDEV(Qs.Fragment,{children:[e.jsxDEV("div",{className:"flex flex-col items-center",children:[e.jsxDEV("div",{className:`w-12 h-12 rounded-full flex items-center justify-center border-2 transition-colors ${d==="completed"?"bg-success border-success text-success-foreground":d==="current"?"bg-primary border-primary text-primary-foreground":"bg-muted border-border text-muted-foreground"}`,children:d==="completed"?e.jsxDEV(Z,{className:"h-6 w-6"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:103,columnNumber:25},this):e.jsxDEV(o.icon,{className:"h-6 w-6"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:105,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:93,columnNumber:21},this),e.jsxDEV("div",{className:"mt-3 text-center",children:e.jsxDEV("p",{className:`text-sm font-medium ${d==="current"?"text-primary":"text-muted-foreground"}`,children:o.label},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:109,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:108,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:92,columnNumber:19},this),!f&&e.jsxDEV("div",{className:`flex-1 h-px mx-4 ${d==="completed"?"bg-success":"bg-border"}`},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:121,columnNumber:21},this)]},o.id,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:91,columnNumber:17},this)})},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:85,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:84,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:83,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxDEV("div",{className:"lg:col-span-3",children:t()},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:136,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[r&&a==="publish"&&e.jsxDEV(b,{className:"border-primary/20 bg-primary/5",children:[e.jsxDEV(D,{className:"pb-3",children:e.jsxDEV(k,{className:"text-sm flex items-center gap-2 text-primary",children:[e.jsxDEV(Ie,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:145,columnNumber:19},this),"Progresso da Importação"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:144,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:143,columnNumber:15},this),e.jsxDEV(g,{children:e.jsxDEV(Si,{progress:m,stage:m<30?"importing":m<80?"creating-version":"publishing",stats:{total:i?.summary?.analyzed||0,processed:Math.floor(m/100*(i?.summary?.valid||0)),errors:i?.summary?.errors||0,warnings:i?.summary?.warnings||0}},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:150,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:149,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:142,columnNumber:13},this),e.jsxDEV(b,{className:"border-amber-200 bg-amber-50 dark:bg-amber-950",children:[e.jsxDEV(D,{className:"pb-3",children:e.jsxDEV(k,{className:"text-sm flex items-center gap-2 text-amber-800 dark:text-amber-200",children:[e.jsxDEV(Nr,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:176,columnNumber:17},this),"Compliance LGPD"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:175,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:174,columnNumber:13},this),e.jsxDEV(g,{className:"text-xs text-amber-700 dark:text-amber-300 space-y-2",children:[e.jsxDEV("p",{children:["🔒 ",e.jsxDEV("strong",{children:"Dados mascarados:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:182,columnNumber:20},this)," CPFs e informações sensíveis são automaticamente mascarados para proteção."]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:181,columnNumber:15},this),e.jsxDEV("p",{children:["⚠️ ",e.jsxDEV("strong",{children:"Validação obrigatória:"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:186,columnNumber:20},this)," Confirmação nos autos é obrigatória antes de decisões."]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:185,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:180,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:173,columnNumber:11},this),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"pb-3",children:e.jsxDEV(k,{className:"text-sm",children:"Template"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:194,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:193,columnNumber:13},this),e.jsxDEV(g,{children:e.jsxDEV(w,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{const o=document.createElement("a");o.href="/template-base-exemplo.csv",o.download="template-base-exemplo.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o)},children:[e.jsxDEV(ge,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:210,columnNumber:17},this),"Baixar Template"]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:197,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:196,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:192,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:139,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:135,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/features/importer/components/ImporterWizard.tsx",lineNumber:70,columnNumber:5},this)}const Ai=()=>e.jsxDEV(Pi,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ImportBase.tsx",lineNumber:4,columnNumber:10},void 0),jn=Object.freeze(Object.defineProperty({__proto__:null,default:Ai},Symbol.toStringTag,{value:"Module"})),_i=()=>{const[a,n]=x.useState([]),[s,i]=x.useState(!0),[r,m]=x.useState(null),{user:l}=de(),{toast:t}=Qe();x.useEffect(()=>{l&&o()},[l]);const o=async()=>{try{i(!0);const{data:N,error:j}=await M.from("versions").select("*").order("number",{ascending:!1});if(j)throw j;n(N||[]),m(N?.find(c=>c.status==="published")||null)}catch(N){console.error("Error fetching versions:",N),t({title:"Erro",description:"Falha ao carregar versões",variant:"destructive"})}finally{i(!1)}},p=N=>new Date(N).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),d=async N=>{try{const{error:j}=await M.functions.invoke("publish-version",{body:{versionId:N}});if(j)throw j;t({title:"Sucesso",description:"Versão publicada com sucesso"}),o()}catch(j){console.error("Error publishing version:",j),t({title:"Erro",description:"Falha ao publicar versão",variant:"destructive"})}},f=async(N,j)=>{try{const{error:c}=await M.functions.invoke("rollback-version",{body:{toVersionId:N}});if(c)throw c;t({title:"Sucesso",description:`Rollback para v${j} realizado com sucesso`}),o()}catch(c){console.error("Error rolling back:",c),t({title:"Erro",description:"Falha ao realizar rollback",variant:"destructive"})}},h=(N,j)=>{if(j&&N==="published")return e.jsxDEV(C,{className:"bg-success text-success-foreground",children:"ATIVA"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:128,columnNumber:9},void 0);switch(N){case"draft":return e.jsxDEV(C,{variant:"secondary",children:"RASCUNHO"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:134,columnNumber:16},void 0);case"published":case"archived":return e.jsxDEV(C,{variant:"outline",children:"ARQUIVADA"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:137,columnNumber:16},void 0);default:return e.jsxDEV(C,{variant:"secondary",children:N?.toUpperCase()},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:139,columnNumber:16},void 0)}};return s?e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight",children:"Versões & Rollback"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:147,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Carregando versões..."},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:150,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:146,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:145,columnNumber:7},void 0):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight",children:"Versões & Rollback"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:159,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Gerencie versões da base de dados e execute rollbacks quando necessário"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:162,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:158,columnNumber:7},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(fr,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:171,columnNumber:13},void 0),"Histórico de Versões"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:170,columnNumber:11},void 0),e.jsxDEV(I,{children:"Lista de todas as versões criadas e seus status"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:174,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:169,columnNumber:9},void 0),e.jsxDEV(g,{children:e.jsxDEV(De,{children:[e.jsxDEV(ke,{children:e.jsxDEV(J,{children:[e.jsxDEV(_,{children:"Versão"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:182,columnNumber:17},void 0),e.jsxDEV(_,{children:"Hash"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:183,columnNumber:17},void 0),e.jsxDEV(_,{children:"Status"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:184,columnNumber:17},void 0),e.jsxDEV(_,{children:"Registros"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:185,columnNumber:17},void 0),e.jsxDEV(_,{children:"Criada em"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:186,columnNumber:17},void 0),e.jsxDEV(_,{children:"Autor"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:187,columnNumber:17},void 0),e.jsxDEV(_,{children:"Ações"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:188,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:181,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:180,columnNumber:13},void 0),e.jsxDEV(he,{children:a.length>0?a.map(N=>e.jsxDEV(J,{children:[e.jsxDEV(S,{className:"font-medium",children:["v",N.number]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:195,columnNumber:21},void 0),e.jsxDEV(S,{children:e.jsxDEV("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:N.file_checksum?.slice(0,8)||"N/A"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:199,columnNumber:23},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:198,columnNumber:21},void 0),e.jsxDEV(S,{children:h(N.status,N.status==="published")},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:203,columnNumber:21},void 0),e.jsxDEV(S,{children:N.summary?.imported?.toLocaleString()||"N/A"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:209,columnNumber:21},void 0),e.jsxDEV(S,{children:p(N.created_at)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:212,columnNumber:21},void 0),e.jsxDEV(S,{children:N.summary?.created_by||"Sistema"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:213,columnNumber:21},void 0),e.jsxDEV(S,{children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(w,{variant:"ghost",size:"sm",title:"Visualizar",children:e.jsxDEV(fe,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:219,columnNumber:27},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:218,columnNumber:25},void 0),e.jsxDEV(w,{variant:"ghost",size:"sm",title:"Baixar",children:e.jsxDEV(ge,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:222,columnNumber:27},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:221,columnNumber:25},void 0),N.status==="draft"&&e.jsxDEV(w,{variant:"ghost",size:"sm",className:"text-success hover:text-success/80",onClick:()=>d(N.id),title:"Publicar versão",children:e.jsxDEV(Z,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:232,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:225,columnNumber:27},void 0),N.status==="archived"&&e.jsxDEV(w,{variant:"ghost",size:"sm",className:"text-primary hover:text-primary/80",onClick:()=>f(N.id,N.number),title:"Fazer rollback",children:e.jsxDEV(ts,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:245,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:236,columnNumber:27},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:217,columnNumber:23},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:216,columnNumber:21},void 0)]},N.id,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:194,columnNumber:19},void 0)):e.jsxDEV(J,{children:e.jsxDEV(S,{colSpan:7,className:"text-center text-muted-foreground",children:"Nenhuma versão encontrada"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:254,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:253,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:191,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:179,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:178,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:168,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Versão Ativa"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:270,columnNumber:13},void 0),e.jsxDEV(I,{children:"Informações da versão atualmente em produção"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:271,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:269,columnNumber:11},void 0),e.jsxDEV(g,{children:r?e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"Versão:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:279,columnNumber:19},void 0),e.jsxDEV(C,{className:"bg-success text-success-foreground",children:["v",r.number]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:280,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:278,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"Hash:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:285,columnNumber:19},void 0),e.jsxDEV("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:r.file_checksum?.slice(0,8)||"N/A"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:286,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:284,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"Registros:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:291,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm",children:r.summary?.imported?.toLocaleString()||"N/A"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:292,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:290,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"Publicada em:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:297,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm",children:p(r.published_at)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:298,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:296,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:277,columnNumber:15},void 0):e.jsxDEV("div",{className:"text-center text-muted-foreground py-4",children:"Nenhuma versão ativa encontrada"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:304,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:275,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:268,columnNumber:9},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Ações Rápidas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:313,columnNumber:13},void 0),e.jsxDEV(I,{children:"Operações frequentes com versões"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:314,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:312,columnNumber:11},void 0),e.jsxDEV(g,{className:"space-y-3",children:[e.jsxDEV(w,{variant:"outline",className:"w-full justify-start",children:[e.jsxDEV(ge,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:318,columnNumber:15},void 0),"Baixar Versão Ativa"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:317,columnNumber:13},void 0),e.jsxDEV(w,{variant:"outline",className:"w-full justify-start",children:[e.jsxDEV(fe,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:322,columnNumber:15},void 0),"Comparar Versões"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:321,columnNumber:13},void 0),a.find(N=>N.status==="archived")&&e.jsxDEV(w,{variant:"outline",className:"w-full justify-start text-primary hover:text-primary/80",onClick:()=>{const N=a.find(j=>j.status==="archived");N&&f(N.id,N.number)},children:[e.jsxDEV(ts,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:338,columnNumber:17},void 0),"Rollback Disponível"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:326,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:316,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:311,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:267,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Versions.tsx",lineNumber:157,columnNumber:5},void 0)},hn=Object.freeze(Object.defineProperty({__proto__:null,default:_i},Symbol.toStringTag,{value:"Module"})),Ti=({user:a,isOpen:n,onClose:s,onRoleChange:i,loading:r})=>{const[m,l]=x.useState("VIEWER"),[t,o]=x.useState("NONE");Qs.useEffect(()=>{a&&(l(a.role),o(a.data_access_level))},[a]);const p=async()=>{a&&(await i(a.user_id,m,t),s())};if(!a)return null;const d=h=>{switch(h){case"ADMIN":return"Acesso completo ao sistema, pode gerenciar usuários e configurações";case"ANALYST":return"Pode analisar dados, criar relatórios e fazer análises";case"VIEWER":return"Visualização limitada conforme nível de acesso aos dados";default:return""}},f=h=>{switch(h){case"FULL":return"Acesso completo a todos os dados, incluindo informações sensíveis";case"MASKED":return"Acesso aos dados com informações pessoais mascaradas";case"NONE":return"Sem acesso a dados pessoais ou sensíveis";default:return""}};return e.jsxDEV(Fe,{open:n,onOpenChange:s,children:e.jsxDEV(Ue,{className:"sm:max-w-[425px]",children:[e.jsxDEV(Ce,{children:[e.jsxDEV(Se,{className:"flex items-center gap-2",children:[e.jsxDEV(je,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:103,columnNumber:13},void 0),"Alterar Papel e Acesso"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:102,columnNumber:11},void 0),e.jsxDEV(us,{children:["Configurar papel e nível de acesso aos dados para"," ",e.jsxDEV("strong",{children:a.email},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:108,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:106,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:101,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(B,{children:"Papel Atual"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:114,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(C,{variant:a.role==="ADMIN"?"destructive":a.role==="ANALYST"?"default":"secondary",children:a.role},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:116,columnNumber:15},void 0),e.jsxDEV(C,{variant:"outline",children:a.data_access_level},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:127,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:115,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:113,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(B,{htmlFor:"role",children:"Novo Papel"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:132,columnNumber:13},void 0),e.jsxDEV(te,{value:m,onValueChange:h=>l(h),children:[e.jsxDEV(oe,{children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:140,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:139,columnNumber:15},void 0),e.jsxDEV(me,{children:[e.jsxDEV(L,{value:"VIEWER",children:"Visualizador"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:143,columnNumber:17},void 0),e.jsxDEV(L,{value:"ANALYST",children:"Analista"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:144,columnNumber:17},void 0),e.jsxDEV(L,{value:"ADMIN",children:"Administrador"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:145,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:142,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:133,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:d(m)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:148,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:131,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(B,{htmlFor:"dataAccess",children:"Nível de Acesso aos Dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:154,columnNumber:13},void 0),e.jsxDEV(te,{value:t,onValueChange:h=>o(h),children:[e.jsxDEV(oe,{children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:162,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:161,columnNumber:15},void 0),e.jsxDEV(me,{children:[e.jsxDEV(L,{value:"NONE",children:"Sem Acesso"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:165,columnNumber:17},void 0),e.jsxDEV(L,{value:"MASKED",children:"Dados Mascarados"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:166,columnNumber:17},void 0),e.jsxDEV(L,{value:"FULL",children:"Acesso Completo"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:167,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:164,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:155,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:f(t)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:170,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:153,columnNumber:11},void 0),(m!==a.role||t!==a.data_access_level)&&e.jsxDEV("div",{className:"p-3 bg-warning/10 border border-warning/20 rounded-md",children:e.jsxDEV("p",{className:"text-sm text-warning-foreground",children:[e.jsxDEV("strong",{children:"Atenção:"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:179,columnNumber:17},void 0)," Estas alterações entrarão em vigor imediatamente e afetarão o acesso do usuário ao sistema."]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:178,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:177,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:112,columnNumber:9},void 0),e.jsxDEV(Ys,{children:[e.jsxDEV(w,{variant:"outline",onClick:s,disabled:r,children:"Cancelar"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:187,columnNumber:11},void 0),e.jsxDEV(w,{onClick:p,disabled:r||m===a.role&&t===a.data_access_level,children:[r&&e.jsxDEV(ye,{className:"mr-2 h-4 w-4 animate-spin"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:198,columnNumber:25},void 0),"Confirmar Alteração"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:190,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:186,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:100,columnNumber:7},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RoleChangeModal.tsx",lineNumber:99,columnNumber:5},void 0)},Mi=({isOpen:a,onClose:n,onConfirm:s,title:i,description:r,confirmText:m="Confirmar",variant:l="default",loading:t=!1})=>e.jsxDEV(Zs,{open:a,onOpenChange:n,children:e.jsxDEV(ea,{children:[e.jsxDEV(sa,{children:[e.jsxDEV(aa,{children:i},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ConfirmActionModal.tsx",lineNumber:39,columnNumber:11},void 0),e.jsxDEV(ra,{children:r},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ConfirmActionModal.tsx",lineNumber:40,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ConfirmActionModal.tsx",lineNumber:38,columnNumber:9},void 0),e.jsxDEV(ia,{children:[e.jsxDEV(na,{disabled:t,children:"Cancelar"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ConfirmActionModal.tsx",lineNumber:43,columnNumber:11},void 0),e.jsxDEV(ys,{onClick:s,disabled:t,className:l==="destructive"?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"",children:[t&&e.jsxDEV(ye,{className:"mr-2 h-4 w-4 animate-spin"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ConfirmActionModal.tsx",lineNumber:53,columnNumber:25},void 0),m]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ConfirmActionModal.tsx",lineNumber:44,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ConfirmActionModal.tsx",lineNumber:42,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/ConfirmActionModal.tsx",lineNumber:37,columnNumber:7},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/ConfirmActionModal.tsx",lineNumber:36,columnNumber:5},void 0),Ii=()=>{const{profile:a}=de(),[n,s]=x.useState(!1),[i,r]=x.useState(""),[m,l]=x.useState("VIEWER"),[t,o]=x.useState("NONE"),[p,d]=x.useState(!0),[f,h]=x.useState(!1),[N,j]=x.useState(!1),[c,v]=x.useState(null),[u,E]=x.useState([]),[R,z]=x.useState([]),[F,y]=x.useState(""),[V,P]=x.useState("all"),[O,q]=x.useState("all"),[G,T]=x.useState(null),[ee,H]=x.useState(!1),[W,be]=x.useState(null);x.useEffect(()=>{a?.organization_id&&(pe(),Ve())},[a?.organization_id]);const pe=async()=>{try{const{data:A,error:se}=await M.from("organizations").select("*").eq("id",a?.organization_id).single();if(se)throw se;v(A)}catch{U({title:"Erro",description:"Não foi possível carregar dados da organização",variant:"destructive"})}finally{d(!1)}},Ve=async()=>{try{const{data:A,error:se}=await M.from("profiles").select("*").eq("organization_id",a?.organization_id).order("created_at",{ascending:!1});if(se)throw se;E(A||[]),z(A||[])}catch{U({title:"Erro",description:"Não foi possível carregar usuários",variant:"destructive"})}};x.useEffect(()=>{let A=u;F&&(A=A.filter(se=>se.email.toLowerCase().includes(F.toLowerCase())||se.user_id.toLowerCase().includes(F.toLowerCase()))),V!=="all"&&(A=A.filter(se=>V==="active"?se.is_active:!se.is_active)),O!=="all"&&(A=A.filter(se=>se.role===O)),z(A)},[u,F,V,O]);const He=async()=>{if(!(!c||!a?.organization_id)){h(!0);try{const{error:A}=await M.from("organizations").update({name:c.name,domain:c.domain,require_2fa:c.require_2fa,export_limit:c.export_limit,retention_months:c.retention_months}).eq("id",a.organization_id);if(A)throw A;U({title:"Sucesso",description:"Dados da organização salvos com sucesso"})}catch{U({title:"Erro",description:"Não foi possível salvar os dados",variant:"destructive"})}finally{h(!1)}}},qe=async()=>{if(!(!i||!a?.organization_id)){j(!0);try{if(c?.domain&&i.split("@")[1]!==c.domain){U({title:"Erro",description:`E-mail deve ser do domínio ${c.domain}`,variant:"destructive"});return}const{error:A}=await M.functions.invoke("user-invitations",{body:{email:i,role:m,data_access_level:t,org_id:a.organization_id}});if(A)throw A;U({title:"Convite enviado",description:`Convite enviado para ${i} com perfil ${m}`}),s(!1),r(""),l("VIEWER"),o("NONE")}catch(A){U({title:"Erro",description:A.message||"Não foi possível enviar o convite",variant:"destructive"})}finally{j(!1)}}},$e=async(A,se)=>{j(!0);try{const{data:Oe,error:Ke}=await M.functions.invoke("manage-user-roles",{body:{action:A,user_id:se}});if(Ke)throw Ke;U({title:"Sucesso",description:Oe.message}),await Ve()}catch(Oe){U({title:"Erro",description:Oe.message||"Não foi possível executar a ação",variant:"destructive"})}finally{j(!1),be(null)}},Is=async(A,se,Oe)=>{j(!0);try{const{data:Ke,error:la}=await M.functions.invoke("manage-user-roles",{body:{action:"change_role",user_id:A,role:se,data_access_level:Oe}});if(la)throw la;U({title:"Sucesso",description:Ke.message}),await Ve()}catch(Ke){U({title:"Erro",description:Ke.message||"Não foi possível alterar o papel",variant:"destructive"})}finally{j(!1)}},$=(A,se)=>{const Oe={activate:{title:"Ativar Usuário",description:`Tem certeza que deseja ativar o usuário ${A.email}? Ele poderá acessar o sistema novamente.`},deactivate:{title:"Desativar Usuário",description:`Tem certeza que deseja desativar o usuário ${A.email}? Ele perderá acesso ao sistema.`},delete:{title:"Revogar Acesso",description:`Tem certeza que deseja revogar completamente o acesso de ${A.email}? Esta ação não pode ser desfeita.`}};be({user:A,action:se,...Oe[se]})};if(p)return e.jsxDEV("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxDEV(ye,{className:"h-8 w-8 animate-spin"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:375,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:374,columnNumber:7},void 0);if(!c)return e.jsxDEV("div",{className:"text-center py-8",children:e.jsxDEV("p",{className:"text-muted-foreground",children:"Não foi possível carregar dados da organização"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:383,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:382,columnNumber:7},void 0);const X=A=>{switch(A){case"ADMIN":return e.jsxDEV(C,{className:"bg-destructive text-destructive-foreground",children:"Admin"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:394,columnNumber:11},void 0);case"ANALYST":return e.jsxDEV(C,{className:"bg-primary text-primary-foreground",children:"Analista"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:400,columnNumber:11},void 0);case"VIEWER":return e.jsxDEV(C,{variant:"secondary",children:"Visualizador"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:403,columnNumber:16},void 0);default:return e.jsxDEV(C,{variant:"outline",children:A},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:405,columnNumber:16},void 0)}},Me=A=>A?e.jsxDEV(C,{className:"bg-success text-success-foreground",children:"Ativo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:412,columnNumber:9},void 0):e.jsxDEV(C,{variant:"secondary",children:"Inativo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:415,columnNumber:14},void 0);return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight",children:"Organização & Acessos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:422,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Gerencie dados da organização, usuários e políticas de acesso"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:425,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:421,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(ks,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:434,columnNumber:15},void 0),"Dados da Organização"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:433,columnNumber:13},void 0),e.jsxDEV(I,{children:"Informações básicas e configurações da organização"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:437,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:432,columnNumber:11},void 0),e.jsxDEV(g,{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{htmlFor:"orgName",children:"Nome da Organização"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:444,columnNumber:17},void 0),e.jsxDEV(Y,{id:"orgName",value:c.name,onChange:A=>v({...c,name:A.target.value})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:445,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:443,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{htmlFor:"orgCode",children:"Código"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:454,columnNumber:17},void 0),e.jsxDEV(Y,{id:"orgCode",value:c.code,disabled:!0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:455,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:453,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:442,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{htmlFor:"domain",children:"Domínio Permitido"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:460,columnNumber:15},void 0),e.jsxDEV(Y,{id:"domain",value:c.domain||"",placeholder:"exemplo.com",onChange:A=>v({...c,domain:A.target.value})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:461,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:459,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{htmlFor:"retention",children:"Retenção de Dados (meses)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:472,columnNumber:15},void 0),e.jsxDEV(Y,{id:"retention",type:"number",value:c.retention_months,onChange:A=>v({...c,retention_months:parseInt(A.target.value)})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:473,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:471,columnNumber:13},void 0),e.jsxDEV(w,{className:"w-full",onClick:He,disabled:f,children:[f&&e.jsxDEV(ye,{className:"mr-2 h-4 w-4 animate-spin"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:491,columnNumber:26},void 0),"Salvar Alterações"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:486,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:441,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:431,columnNumber:9},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Políticas de Segurança"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:499,columnNumber:13},void 0),e.jsxDEV(I,{children:"Configure políticas de acesso e segurança"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:500,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:498,columnNumber:11},void 0),e.jsxDEV(g,{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"space-y-0.5",children:[e.jsxDEV(B,{children:"Exigir Autenticação 2FA"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:507,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Obrigatório para todos os usuários"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:508,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:506,columnNumber:15},void 0),e.jsxDEV(ds,{checked:c.require_2fa,onCheckedChange:A=>v({...c,require_2fa:A})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:512,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:505,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{children:"Limite de Export"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:521,columnNumber:15},void 0),e.jsxDEV(te,{value:c.export_limit,onValueChange:A=>v({...c,export_limit:A}),children:[e.jsxDEV(oe,{children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:529,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:528,columnNumber:17},void 0),e.jsxDEV(me,{children:[e.jsxDEV(L,{value:"ROLE_BASED",children:"Baseado no Papel"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:532,columnNumber:19},void 0),e.jsxDEV(L,{value:"UNLIMITED",children:"Ilimitado"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:533,columnNumber:19},void 0),e.jsxDEV(L,{value:"RESTRICTED",children:"Restrito"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:534,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:531,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:522,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:520,columnNumber:13},void 0),e.jsxDEV("div",{className:"pt-4 space-y-2",children:[e.jsxDEV("h4",{className:"font-medium",children:"Limites por Papel:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:540,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-sm space-y-1",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"VIEWER:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:543,columnNumber:19},void 0),e.jsxDEV("span",{children:"Copiar bloco"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:544,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:542,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"ANALYST:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:547,columnNumber:19},void 0),e.jsxDEV("span",{children:"Export CSV"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:548,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:546,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"ADMIN:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:551,columnNumber:19},void 0),e.jsxDEV("span",{children:"PDF/CSV completo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:552,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:550,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:541,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:539,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:504,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:497,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:430,columnNumber:7},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(ms,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:564,columnNumber:15},void 0),"Usuários & Acessos"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:563,columnNumber:13},void 0),e.jsxDEV(Fe,{open:n,onOpenChange:s,children:[e.jsxDEV(ta,{asChild:!0,children:e.jsxDEV(w,{children:[e.jsxDEV(Hs,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:573,columnNumber:19},void 0),"Convidar Usuário"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:572,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:571,columnNumber:15},void 0),e.jsxDEV(Ue,{children:[e.jsxDEV(Ce,{children:[e.jsxDEV(Se,{children:"Convidar Novo Usuário"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:579,columnNumber:19},void 0),e.jsxDEV(us,{children:"Envie um convite para um novo usuário com papel específico"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:580,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:578,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{htmlFor:"email",children:"E-mail"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:586,columnNumber:21},void 0),e.jsxDEV(Y,{id:"email",type:"email",value:i,onChange:A=>r(A.target.value),placeholder:"usuario@exemplo.com"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:587,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:585,columnNumber:19},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{children:"Papel Inicial"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:596,columnNumber:21},void 0),e.jsxDEV(te,{value:m,onValueChange:A=>l(A),children:[e.jsxDEV(oe,{children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:604,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:603,columnNumber:23},void 0),e.jsxDEV(me,{children:[e.jsxDEV(L,{value:"VIEWER",children:"Visualizador"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:607,columnNumber:25},void 0),e.jsxDEV(L,{value:"ANALYST",children:"Analista"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:608,columnNumber:25},void 0),e.jsxDEV(L,{value:"ADMIN",children:"Administrador"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:609,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:606,columnNumber:23},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:597,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:595,columnNumber:19},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{children:"Nível de Acesso aos Dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:614,columnNumber:21},void 0),e.jsxDEV(te,{value:t,onValueChange:A=>o(A),children:[e.jsxDEV(oe,{children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:622,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:621,columnNumber:23},void 0),e.jsxDEV(me,{children:[e.jsxDEV(L,{value:"NONE",children:"Sem Acesso"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:625,columnNumber:25},void 0),e.jsxDEV(L,{value:"MASKED",children:"Dados Mascarados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:626,columnNumber:25},void 0),e.jsxDEV(L,{value:"FULL",children:"Acesso Completo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:627,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:624,columnNumber:23},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:615,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:613,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:584,columnNumber:17},void 0),e.jsxDEV(Ys,{children:[e.jsxDEV(w,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:633,columnNumber:19},void 0),e.jsxDEV(w,{onClick:qe,disabled:N,children:[N&&e.jsxDEV(ye,{className:"h-4 w-4 mr-2 animate-spin"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:641,columnNumber:23},void 0),!N&&e.jsxDEV(br,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:643,columnNumber:40},void 0),"Enviar Convite"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:639,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:632,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:577,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:567,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:562,columnNumber:11},void 0),e.jsxDEV(I,{children:"Gerencie usuários, papéis e status de acesso"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:650,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:561,columnNumber:9},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"flex gap-4 mb-6",children:[e.jsxDEV("div",{className:"flex-1",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Ca,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:659,columnNumber:17},void 0),e.jsxDEV(Y,{placeholder:"Buscar por e-mail ou ID...",value:F,onChange:A=>y(A.target.value),className:"pl-10"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:660,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:658,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:657,columnNumber:13},void 0),e.jsxDEV(te,{value:V,onValueChange:A=>P(A),children:[e.jsxDEV(oe,{className:"w-[150px]",children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:675,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:674,columnNumber:15},void 0),e.jsxDEV(me,{children:[e.jsxDEV(L,{value:"all",children:"Todos Status"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:678,columnNumber:17},void 0),e.jsxDEV(L,{value:"active",children:"Ativos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:679,columnNumber:17},void 0),e.jsxDEV(L,{value:"inactive",children:"Inativos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:680,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:677,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:668,columnNumber:13},void 0),e.jsxDEV(te,{value:O,onValueChange:A=>q(A),children:[e.jsxDEV(oe,{className:"w-[150px]",children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:690,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:689,columnNumber:15},void 0),e.jsxDEV(me,{children:[e.jsxDEV(L,{value:"all",children:"Todos Papéis"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:693,columnNumber:17},void 0),e.jsxDEV(L,{value:"ADMIN",children:"Admin"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:694,columnNumber:17},void 0),e.jsxDEV(L,{value:"ANALYST",children:"Analista"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:695,columnNumber:17},void 0),e.jsxDEV(L,{value:"VIEWER",children:"Visualizador"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:696,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:692,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:683,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:656,columnNumber:11},void 0),e.jsxDEV(De,{children:[e.jsxDEV(ke,{children:e.jsxDEV(J,{children:[e.jsxDEV(_,{children:"Usuário"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:704,columnNumber:17},void 0),e.jsxDEV(_,{children:"E-mail"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:705,columnNumber:17},void 0),e.jsxDEV(_,{children:"Papel & Acesso"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:706,columnNumber:17},void 0),e.jsxDEV(_,{children:"Status"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:707,columnNumber:17},void 0),e.jsxDEV(_,{children:"Último Acesso"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:708,columnNumber:17},void 0),e.jsxDEV(_,{children:"Ações"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:709,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:703,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:702,columnNumber:13},void 0),e.jsxDEV(he,{children:R.length===0?e.jsxDEV(J,{children:e.jsxDEV(S,{colSpan:6,className:"text-center py-8",children:e.jsxDEV("p",{className:"text-muted-foreground",children:F||V!=="all"||O!=="all"?"Nenhum usuário encontrado com os filtros aplicados":"Nenhum usuário encontrado"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:716,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:715,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:714,columnNumber:17},void 0):R.map(A=>e.jsxDEV(J,{children:[e.jsxDEV(S,{className:"font-medium",children:A.email.split("@")[0]},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:728,columnNumber:21},void 0),e.jsxDEV(S,{children:A.email},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:731,columnNumber:21},void 0),e.jsxDEV(S,{children:e.jsxDEV("div",{className:"flex flex-col gap-1",children:[X(A.role),e.jsxDEV(C,{variant:"outline",className:"text-xs",children:A.data_access_level},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:735,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:733,columnNumber:23},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:732,columnNumber:21},void 0),e.jsxDEV(S,{children:Me(A.is_active)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:740,columnNumber:21},void 0),e.jsxDEV(S,{children:e.jsxDEV("div",{className:"text-sm",children:[e.jsxDEV("div",{children:["Criado:"," ",new Date(A.created_at).toLocaleDateString("pt-BR")]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:743,columnNumber:25},void 0),A.last_login_at&&e.jsxDEV("div",{className:"text-muted-foreground text-xs",children:["Login:"," ",new Date(A.last_login_at).toLocaleDateString("pt-BR")]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:750,columnNumber:27},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:742,columnNumber:23},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:741,columnNumber:21},void 0),e.jsxDEV(S,{children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[A.is_active?e.jsxDEV(w,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive-foreground hover:bg-destructive/10",title:"Desativar usuário",onClick:()=>$(A,"deactivate"),disabled:N||A.user_id===a?.user_id,children:e.jsxDEV(xr,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:784,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:772,columnNumber:27},void 0):e.jsxDEV(w,{variant:"ghost",size:"sm",title:"Ativar usuário",onClick:()=>$(A,"activate"),disabled:N,children:e.jsxDEV(Sa,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:769,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:762,columnNumber:27},void 0),e.jsxDEV(w,{variant:"ghost",size:"sm",className:"text-primary hover:text-primary-foreground hover:bg-primary/10",title:"Alterar papel",onClick:()=>{T(A),H(!0)},disabled:N,children:e.jsxDEV(je,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:798,columnNumber:27},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:787,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:760,columnNumber:23},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:759,columnNumber:21},void 0)]},A.id,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:727,columnNumber:19},void 0))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:712,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:701,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:654,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:560,columnNumber:7},void 0),e.jsxDEV(Ti,{user:G,isOpen:ee,onClose:()=>{H(!1),T(null)},onRoleChange:Is,loading:N},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:811,columnNumber:7},void 0),W&&e.jsxDEV(Mi,{isOpen:!!W,onClose:()=>be(null),onConfirm:()=>$e(W.action,W.user.user_id),title:W.title,description:W.description,confirmText:W.action==="delete"?"Revogar Acesso":"Confirmar",variant:W.action==="deactivate"||W.action==="delete"?"destructive":"default",loading:N},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:824,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Organization.tsx",lineNumber:420,columnNumber:5},void 0)},vn=Object.freeze(Object.defineProperty({__proto__:null,default:Ii},Symbol.toStringTag,{value:"Module"})),ve=x.forwardRef(({className:a,...n},s)=>e.jsxDEV(Pa,{ref:s,className:ce("relative flex w-full touch-none select-none items-center",a),...n,children:[e.jsxDEV(jr,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsxDEV(hr,{className:"absolute h-full bg-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/slider.tsx",lineNumber:19,columnNumber:7},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/slider.tsx",lineNumber:18,columnNumber:5},void 0),e.jsxDEV(vr,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/slider.tsx",lineNumber:21,columnNumber:5},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/ui/slider.tsx",lineNumber:10,columnNumber:3},void 0));ve.displayName=Pa.displayName;const Ri=()=>{const[a,n]=x.useState(6),[s,i]=x.useState(!0),[r,m]=x.useState({reclamante_foi_testemunha:30,troca_direta:40,triangulacao_confirmada:20,prova_emprestada:10}),[l,t]=x.useState({viewer_limit:50,analyst_limit:1e3,admin_limit:-1}),o=()=>{U({title:"Configurações salvas",description:"Os parâmetros do sistema foram atualizados com sucesso"})},p=()=>{n(6),i(!0),m({reclamante_foi_testemunha:30,troca_direta:40,triangulacao_confirmada:20,prova_emprestada:10}),U({title:"Configurações restauradas",description:"Parâmetros voltaram aos valores padrão"})},d=Object.values(r).reduce((f,h)=>f+h,0);return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight",children:"Parâmetros & Regras"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:78,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Configure parâmetros globais do sistema e regras de negócio"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:81,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:77,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(Ae,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:90,columnNumber:15},void 0),"Janela de Triangulação"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:89,columnNumber:13},void 0),e.jsxDEV(I,{children:"Período em meses considerado para análise de triangulação"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:93,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:88,columnNumber:11},void 0),e.jsxDEV(g,{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{children:["Meses: ",a]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:99,columnNumber:15},void 0),e.jsxDEV(ve,{value:[a],onValueChange:f=>n(f[0]),max:24,min:1,step:1},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:100,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxDEV("span",{children:"1 mês"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:108,columnNumber:17},void 0),e.jsxDEV("span",{children:"24 meses"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:109,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:107,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:98,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-3 bg-muted rounded-lg",children:e.jsxDEV("p",{className:"text-sm",children:[e.jsxDEV("strong",{children:"Impacto:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:115,columnNumber:17},void 0)," Processos e testemunhas dentro de"," ",a," meses serão considerados para identificação de padrões suspeitos."]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:114,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:113,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:97,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:87,columnNumber:9},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(je,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:126,columnNumber:15},void 0),"Configurações de Privacidade"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:125,columnNumber:13},void 0),e.jsxDEV(I,{children:"Controles de privacidade e proteção de dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:129,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:124,columnNumber:11},void 0),e.jsxDEV(g,{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"space-y-0.5",children:[e.jsxDEV(B,{children:"Máscara de CPF"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:136,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Ocultar últimos dígitos do CPF"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:137,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:135,columnNumber:15},void 0),e.jsxDEV(ds,{checked:s,onCheckedChange:i},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:141,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:134,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-3 bg-muted rounded-lg",children:e.jsxDEV("p",{className:"text-sm",children:[e.jsxDEV("strong",{children:"Exemplo:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:149,columnNumber:17},void 0)," ",s?"123.456.789-**":"123.456.789-00"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:148,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:147,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:133,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:123,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:86,columnNumber:7},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(gr,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:160,columnNumber:13},void 0),"Pesos do Score de Risco"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:159,columnNumber:11},void 0),e.jsxDEV(I,{children:"Configure a importância de cada indicador no cálculo do score final"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:163,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:158,columnNumber:9},void 0),e.jsxDEV(g,{className:"space-y-6",children:[e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{children:["Reclamante foi Testemunha:"," ",r.reclamante_foi_testemunha,"%"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:171,columnNumber:17},void 0),e.jsxDEV(ve,{value:[r.reclamante_foi_testemunha],onValueChange:f=>m(h=>({...h,reclamante_foi_testemunha:f[0]})),max:100,min:0,step:5},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:175,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:170,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{children:["Troca Direta: ",r.troca_direta,"%"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:190,columnNumber:17},void 0),e.jsxDEV(ve,{value:[r.troca_direta],onValueChange:f=>m(h=>({...h,troca_direta:f[0]})),max:100,min:0,step:5},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:191,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:189,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:169,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{children:["Triangulação Confirmada:"," ",r.triangulacao_confirmada,"%"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:208,columnNumber:17},void 0),e.jsxDEV(ve,{value:[r.triangulacao_confirmada],onValueChange:f=>m(h=>({...h,triangulacao_confirmada:f[0]})),max:100,min:0,step:5},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:212,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:207,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{children:["Prova Emprestada: ",r.prova_emprestada,"%"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:227,columnNumber:17},void 0),e.jsxDEV(ve,{value:[r.prova_emprestada],onValueChange:f=>m(h=>({...h,prova_emprestada:f[0]})),max:100,min:0,step:5},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:230,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:226,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:206,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:168,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:"Total dos pesos:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:247,columnNumber:13},void 0),e.jsxDEV(C,{variant:d===100?"default":"destructive",children:[d,"%"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:248,columnNumber:13},void 0),d!==100&&e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:"(deve somar 100%)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:252,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:246,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:167,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:157,columnNumber:7},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Limites de Export por Papel"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:262,columnNumber:11},void 0),e.jsxDEV(I,{children:"Configure limites de exportação por tipo de usuário"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:263,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:261,columnNumber:9},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{children:"VIEWER - Registros por export"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:270,columnNumber:15},void 0),e.jsxDEV(Y,{type:"number",value:l.viewer_limit,onChange:f=>t(h=>({...h,viewer_limit:parseInt(f.target.value)||0}))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:271,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:269,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{children:"ANALYST - Registros por export"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:284,columnNumber:15},void 0),e.jsxDEV(Y,{type:"number",value:l.analyst_limit,onChange:f=>t(h=>({...h,analyst_limit:parseInt(f.target.value)||0}))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:285,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:283,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{children:"ADMIN - Registros por export"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:298,columnNumber:15},void 0),e.jsxDEV(te,{value:l.admin_limit===-1?"unlimited":"limited",onValueChange:f=>t(h=>({...h,admin_limit:f==="unlimited"?-1:1e4})),children:[e.jsxDEV(oe,{children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:311,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:310,columnNumber:17},void 0),e.jsxDEV(me,{children:[e.jsxDEV(L,{value:"unlimited",children:"Ilimitado"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:314,columnNumber:19},void 0),e.jsxDEV(L,{value:"limited",children:"Com limite"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:315,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:313,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:299,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:297,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:268,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:267,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:260,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex gap-4",children:[e.jsxDEV(w,{onClick:o,className:"flex items-center gap-2",children:[e.jsxDEV(Aa,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:325,columnNumber:11},void 0),"Salvar Configurações"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:324,columnNumber:9},void 0),e.jsxDEV(w,{variant:"outline",onClick:p,className:"flex items-center gap-2",children:[e.jsxDEV(ts,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:333,columnNumber:11},void 0),"Restaurar Padrões"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:328,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:323,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/SystemConfig.tsx",lineNumber:76,columnNumber:5},void 0)},gn=Object.freeze(Object.defineProperty({__proto__:null,default:Ri},Symbol.toStringTag,{value:"Module"}));function zi(){de();const[a,n]=x.useState([]),[s,i]=x.useState([]),[r,m]=x.useState(!0),[l,t]=x.useState("all");x.useEffect(()=>{o()},[]);const o=async()=>{m(!0);try{const{data:N,error:j}=await M.from("lgpd_requests").select("*").order("created_at",{ascending:!1});j?console.error("Error fetching requests:",j):n(N||[]);const{data:c,error:v}=await M.from("data_access_logs").select("*").order("created_at",{ascending:!1}).limit(100);v?console.error("Error fetching logs:",v):i(c||[])}catch(N){console.error("Error fetching compliance data:",N),ie.error("Erro ao carregar dados de compliance")}finally{m(!1)}},p=N=>{const j={PENDING:{variant:"secondary",icon:Ae,text:"Pendente"},PROCESSING:{variant:"default",icon:fe,text:"Processando"},COMPLETED:{variant:"default",icon:Z,text:"Concluída"},REJECTED:{variant:"destructive",icon:Xs,text:"Rejeitada"}},c=j[N]||j.PENDING,v=c.icon,u=N==="COMPLETED"?"bg-success text-success-foreground":"";return e.jsxDEV(C,{variant:c.variant,className:u,children:[e.jsxDEV(v,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:121,columnNumber:9},this),c.text]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:120,columnNumber:7},this)},d=N=>({ACCESS:"Acesso aos Dados",RECTIFICATION:"Retificação",DELETION:"Exclusão",PORTABILITY:"Portabilidade"})[N]||N,f=l==="all"?a:a.filter(N=>N.status===l),h=async(N,j)=>{try{const{error:c}=await M.from("lgpd_requests").update({status:j,completed_at:j==="COMPLETED"?new Date().toISOString():null}).eq("id",N);if(c)throw c;ie.success("Status atualizado com sucesso"),o()}catch(c){console.error("Error updating status:",c),ie.error("Erro ao atualizar status")}};return r?e.jsxDEV("div",{className:"flex items-center justify-center h-96",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(je,{className:"h-12 w-12 mx-auto mb-4 animate-pulse text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:167,columnNumber:11},this),e.jsxDEV("p",{children:"Carregando dados de compliance..."},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:168,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:166,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:165,columnNumber:7},this):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsxDEV(je,{className:"h-8 w-8 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:179,columnNumber:11},this),"Compliance LGPD"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:178,columnNumber:9},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Gestão de solicitações e logs de acesso conforme a Lei Geral de Proteção de Dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:182,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:177,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxDEV(b,{children:e.jsxDEV(g,{className:"p-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-muted-foreground",children:"Total de Solicitações"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:194,columnNumber:17},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:a.length},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:197,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:193,columnNumber:15},this),e.jsxDEV(we,{className:"h-8 w-8 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:199,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:192,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:191,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:190,columnNumber:9},this),e.jsxDEV(b,{children:e.jsxDEV(g,{className:"p-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-muted-foreground",children:"Pendentes"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:208,columnNumber:17},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:a.filter(N=>N.status==="PENDING").length},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:211,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:207,columnNumber:15},this),e.jsxDEV(Ae,{className:"h-8 w-8 text-orange-500"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:215,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:206,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:205,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:204,columnNumber:9},this),e.jsxDEV(b,{children:e.jsxDEV(g,{className:"p-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-muted-foreground",children:"Concluídas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:224,columnNumber:17},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:a.filter(N=>N.status==="COMPLETED").length},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:227,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:223,columnNumber:15},this),e.jsxDEV(Z,{className:"h-8 w-8 text-success"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:231,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:222,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:221,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:220,columnNumber:9},this),e.jsxDEV(b,{children:e.jsxDEV(g,{className:"p-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-muted-foreground",children:"Logs de Acesso"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:240,columnNumber:17},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:s.length},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:243,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:239,columnNumber:15},this),e.jsxDEV(fe,{className:"h-8 w-8 text-blue-500"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:245,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:238,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:237,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:236,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:189,columnNumber:7},this),e.jsxDEV(_e,{defaultValue:"requests",className:"space-y-4",children:[e.jsxDEV(Te,{children:[e.jsxDEV(K,{value:"requests",children:"Solicitações LGPD"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:253,columnNumber:11},this),e.jsxDEV(K,{value:"logs",children:"Logs de Acesso"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:254,columnNumber:11},this),e.jsxDEV(K,{value:"settings",children:"Configurações"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:255,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:252,columnNumber:9},this),e.jsxDEV(Q,{value:"requests",className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV(te,{value:l,onValueChange:t,children:[e.jsxDEV(oe,{className:"w-48",children:e.jsxDEV(le,{placeholder:"Filtrar por status"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:262,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:261,columnNumber:15},this),e.jsxDEV(me,{children:[e.jsxDEV(L,{value:"all",children:"Todos os Status"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:265,columnNumber:17},this),e.jsxDEV(L,{value:"PENDING",children:"Pendentes"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:266,columnNumber:17},this),e.jsxDEV(L,{value:"PROCESSING",children:"Processando"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:267,columnNumber:17},this),e.jsxDEV(L,{value:"COMPLETED",children:"Concluídas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:268,columnNumber:17},this),e.jsxDEV(L,{value:"REJECTED",children:"Rejeitadas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:269,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:264,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:260,columnNumber:13},this),e.jsxDEV(w,{onClick:o,children:"Atualizar"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:272,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:259,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-4",children:f.length===0?e.jsxDEV(b,{children:e.jsxDEV(g,{className:"p-8 text-center",children:[e.jsxDEV(je,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:279,columnNumber:19},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Nenhuma solicitação LGPD encontrada"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:280,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:278,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:277,columnNumber:15},this):f.map(N=>e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(k,{className:"text-lg",children:d(N.request_type)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:291,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:["Solicitante: ",N.requested_by_email]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:294,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:290,columnNumber:23},this),e.jsxDEV("div",{className:"text-right space-y-2",children:[p(N.status),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(w,{size:"sm",variant:"outline",onClick:()=>h(N.id,"PROCESSING"),disabled:N.status==="COMPLETED",children:"Processar"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:301,columnNumber:27},this),e.jsxDEV(w,{size:"sm",variant:"default",onClick:()=>h(N.id,"COMPLETED"),disabled:N.status==="COMPLETED",children:"Concluir"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:311,columnNumber:27},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:300,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:298,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:289,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:288,columnNumber:19},this),e.jsxDEV(g,{children:[N.justification&&e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("h4",{className:"font-medium mb-2",children:"Justificativa:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:328,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:N.justification},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:329,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:327,columnNumber:23},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Criada em:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:336,columnNumber:25},this)," ",new Date(N.created_at).toLocaleString("pt-BR")]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:335,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Expira em:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:340,columnNumber:25},this)," ",new Date(N.expires_at).toLocaleString("pt-BR")]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:339,columnNumber:23},this),N.completed_at&&e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Concluída em:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:345,columnNumber:27},this)," ",new Date(N.completed_at).toLocaleString("pt-BR")]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:344,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:334,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:325,columnNumber:19},this)]},N.id,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:287,columnNumber:17},this))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:275,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:258,columnNumber:9},this),e.jsxDEV(Q,{value:"logs",className:"space-y-4",children:e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Logs de Acesso a Dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:362,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Registro de acessos para auditoria LGPD"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:363,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:361,columnNumber:13},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"space-y-2",children:s.slice(0,20).map(N=>e.jsxDEV("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium",children:N.accessed_table},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:375,columnNumber:23},this),e.jsxDEV("span",{className:"mx-2 text-muted-foreground",children:"•"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:376,columnNumber:23},this),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:N.access_type},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:377,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:374,columnNumber:21},this),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:new Date(N.created_at).toLocaleString("pt-BR")},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:381,columnNumber:21},this)]},N.id,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:370,columnNumber:19},this))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:368,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:367,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:360,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:359,columnNumber:9},this),e.jsxDEV(Q,{value:"settings",className:"space-y-4",children:[e.jsxDEV(ae,{children:[e.jsxDEV(ue,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:393,columnNumber:13},this),e.jsxDEV(re,{children:[e.jsxDEV("strong",{children:"Portal do Titular:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:395,columnNumber:15},this)," O portal público para solicitações LGPD está disponível em"," ",e.jsxDEV("a",{href:"/portal-titular",className:"text-primary underline",target:"_blank",children:"/portal-titular"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:397,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:394,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:392,columnNumber:11},this),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{children:"Configurações de Compliance"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:409,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:408,columnNumber:13},this),e.jsxDEV(g,{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h4",{className:"font-medium",children:"Retenção de Dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:413,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Dados são retidos por 24 meses após o fim da necessidade processual, conforme política de retenção configurada."},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:414,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:412,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h4",{className:"font-medium",children:"Anonimização Automática"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:421,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"CPFs, nomes e dados sensíveis são mascarados automaticamente em exports e relatórios por padrão."},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:422,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:420,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h4",{className:"font-medium",children:"Base Legal"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:429,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Art. 7º, VI da LGPD - Execução regular de direitos em processo judicial"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:430,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:428,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:411,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:407,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:391,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:251,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Compliance.tsx",lineNumber:175,columnNumber:5},this)}const wn=Object.freeze(Object.defineProperty({__proto__:null,default:zi},Symbol.toStringTag,{value:"Module"}));function va(){const a=[{title:"Compliance LGPD 85% Automatizada",description:"Sistema com políticas de retenção automática, anonimização de PII e auditoria completa",icon:je,metrics:["85% compliance automática","100% dados protegidos","0 vazamentos registrados"]},{title:"ROI Comprovado em Compliance",description:"Redução de 70% nos custos de adequação LGPD vs. consultoria tradicional",icon:We,metrics:["70% redução de custos","90% menos tempo de setup","100% auditável"]},{title:"Diferencial Competitivo",description:"Único sistema jurídico com LGPD by design para análise de testemunhas",icon:Dr,metrics:["1º no mercado","Tecnologia exclusiva","Certificação própria"]}],n=[{title:"Whitepaper: LGPD para Escritórios",description:"Guia completo de adequação LGPD para escritórios de advocacia",type:"PDF",pages:"24 páginas",icon:we,downloadUrl:"/whitepaper-assistjur.pdf"},{title:"Checklist de Compliance",description:"Lista verificação completa para auditoria LGPD interna",type:"Planilha",pages:"5 categorias",icon:Z,downloadUrl:"/checklist-compliance.xlsx"},{title:"Template de Políticas",description:"Modelos prontos de políticas de privacidade e retenção",type:"DOC",pages:"12 modelos",icon:we,downloadUrl:"/templates-politicas.docx"}],s=[{name:"Dr. Carlos Mendes",role:"Sócio, Mendes & Associados",quote:"Com o AssistJur.IA, nossa adequação LGPD foi 3x mais rápida que o esperado.",compliance:"100% conforme"},{name:"Dra. Ana Silva",role:"Coordenadora de Compliance",quote:"A auditoria automática nos deu total controle sobre os dados dos clientes.",compliance:"0 incidentes"}];return e.jsxDEV(Jr,{children:e.jsxDEV("div",{className:"container mx-auto p-6 space-y-8",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-8",children:[e.jsxDEV("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsxDEV(wr,{className:"w-6 h-6 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:111,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:110,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold",children:"Marketing Compliance"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:114,columnNumber:13},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Argumentário comercial e lead magnets para conversão"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:115,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:113,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:109,columnNumber:9},this),e.jsxDEV(_e,{defaultValue:"argumentario",className:"space-y-6",children:[e.jsxDEV(Te,{className:"grid w-full grid-cols-4",children:[e.jsxDEV(K,{value:"argumentario",children:"Argumentário"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:123,columnNumber:13},this),e.jsxDEV(K,{value:"leadmagnets",children:"Lead Magnets"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:124,columnNumber:13},this),e.jsxDEV(K,{value:"roi",children:"ROI Calculator"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:125,columnNumber:13},this),e.jsxDEV(K,{value:"cases",children:"Cases de Sucesso"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:126,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:122,columnNumber:11},this),e.jsxDEV(Q,{value:"argumentario",className:"space-y-6",children:[e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-1 lg:grid-cols-1",children:a.map((i,r)=>{const m=i.icon;return e.jsxDEV(b,{className:"border-l-4 border-l-primary",children:[e.jsxDEV(D,{children:e.jsxDEV("div",{className:"flex items-start gap-4",children:[e.jsxDEV("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsxDEV(m,{className:"w-6 h-6 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:139,columnNumber:27},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:138,columnNumber:25},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV(k,{className:"text-xl",children:i.title},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:142,columnNumber:27},this),e.jsxDEV(I,{className:"mt-2",children:i.description},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:143,columnNumber:27},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:141,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:137,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:136,columnNumber:21},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:i.metrics.map((l,t)=>e.jsxDEV(C,{variant:"secondary",children:l},t,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:152,columnNumber:27},this))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:150,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:149,columnNumber:21},this)]},r,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:135,columnNumber:19},this)})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:131,columnNumber:13},this),e.jsxDEV(b,{className:"bg-gradient-to-r from-primary/5 to-accent/5 border-primary/20",children:[e.jsxDEV(D,{children:e.jsxDEV(k,{className:"flex items-center gap-2",children:[e.jsxDEV(je,{className:"w-5 h-5 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:167,columnNumber:19},this),"Proposta de Valor Única"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:166,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:165,columnNumber:15},this),e.jsxDEV(g,{children:e.jsxDEV("p",{className:"text-lg leading-relaxed",children:[e.jsxDEV("strong",{children:"AssistJur.IA"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:173,columnNumber:19},this)," é o único sistema jurídico com"," ",e.jsxDEV(C,{variant:"outline",className:"mx-1",children:"LGPD by design"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:174,columnNumber:19},this),"que oferece ",e.jsxDEV("strong",{children:"85% de compliance automatizada"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:177,columnNumber:31},this)," ","para análise de testemunhas, com economia de"," ",e.jsxDEV("strong",{children:"70% nos custos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:179,columnNumber:19},this)," e"," ",e.jsxDEV("strong",{children:"90% menos tempo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:180,columnNumber:19},this)," de adequação."]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:172,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:171,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:164,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:130,columnNumber:11},this),e.jsxDEV(Q,{value:"leadmagnets",className:"space-y-6",children:[e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map((i,r)=>{const m=i.icon;return e.jsxDEV(b,{className:"group hover:shadow-lg transition-shadow",children:[e.jsxDEV(D,{children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-2 bg-accent/10 rounded-lg",children:e.jsxDEV(m,{className:"w-5 h-5 text-accent"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:199,columnNumber:27},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:198,columnNumber:25},this),e.jsxDEV("div",{children:e.jsxDEV(C,{variant:"outline",children:i.type},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:202,columnNumber:27},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:201,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:197,columnNumber:23},this),e.jsxDEV(k,{className:"text-lg",children:i.title},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:205,columnNumber:23},this),e.jsxDEV(I,{children:i.description},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:206,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:196,columnNumber:21},this),e.jsxDEV(g,{className:"space-y-4",children:[e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:["📄 ",i.pages]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:209,columnNumber:23},this),e.jsxDEV(w,{className:"w-full group-hover:bg-primary/90 transition-colors",onClick:()=>window.open(i.downloadUrl,"_blank"),children:[e.jsxDEV(ge,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:218,columnNumber:25},this),"Download Gratuito"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:212,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:208,columnNumber:21},this)]},r,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:192,columnNumber:19},this)})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:188,columnNumber:13},this),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{children:"Performance dos Lead Magnets"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:230,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:229,columnNumber:15},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-primary",children:"1,247"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:235,columnNumber:21},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Downloads totais"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:236,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:234,columnNumber:19},this),e.jsxDEV("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-accent",children:"32%"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:241,columnNumber:21},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Taxa de conversão"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:242,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:240,columnNumber:19},this),e.jsxDEV("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-primary",children:"89"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:247,columnNumber:21},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Leads qualificados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:248,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:246,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:233,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:232,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:228,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:187,columnNumber:11},this),e.jsxDEV(Q,{value:"roi",className:"space-y-6",children:e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Calculadora de ROI - Compliance LGPD"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:261,columnNumber:17},this),e.jsxDEV(I,{children:"Compare os custos de adequação LGPD: AssistJur.IA vs. Consultoria Tradicional"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:262,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:260,columnNumber:15},this),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-destructive",children:"Consultoria Tradicional"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:271,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Consultoria inicial:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:276,columnNumber:25},this),e.jsxDEV("span",{className:"font-medium",children:"R$ 25.000"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:277,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:275,columnNumber:23},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Implementação (6 meses):"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:280,columnNumber:25},this),e.jsxDEV("span",{className:"font-medium",children:"R$ 45.000"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:281,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:279,columnNumber:23},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Auditoria anual:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:284,columnNumber:25},this),e.jsxDEV("span",{className:"font-medium",children:"R$ 15.000"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:285,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:283,columnNumber:23},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Manutenção/ano:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:288,columnNumber:25},this),e.jsxDEV("span",{className:"font-medium",children:"R$ 12.000"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:289,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:287,columnNumber:23},this),e.jsxDEV("div",{className:"border-t pt-2",children:e.jsxDEV("div",{className:"flex justify-between text-lg font-bold text-destructive",children:[e.jsxDEV("span",{children:"Total (1º ano):"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:293,columnNumber:27},this),e.jsxDEV("span",{children:"R$ 97.000"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:294,columnNumber:27},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:292,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:291,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:274,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:270,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-primary",children:"AssistJur.IA"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:302,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Setup inicial:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:307,columnNumber:25},this),e.jsxDEV("span",{className:"font-medium",children:"R$ 0"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:308,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:306,columnNumber:23},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Implementação (1 semana):"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:311,columnNumber:25},this),e.jsxDEV("span",{className:"font-medium",children:"R$ 2.000"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:312,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:310,columnNumber:23},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Licença anual:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:315,columnNumber:25},this),e.jsxDEV("span",{className:"font-medium",children:"R$ 24.000"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:316,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:314,columnNumber:23},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Suporte incluído:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:319,columnNumber:25},this),e.jsxDEV("span",{className:"font-medium",children:"R$ 0"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:320,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:318,columnNumber:23},this),e.jsxDEV("div",{className:"border-t pt-2",children:e.jsxDEV("div",{className:"flex justify-between text-lg font-bold text-primary",children:[e.jsxDEV("span",{children:"Total (1º ano):"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:324,columnNumber:27},this),e.jsxDEV("span",{children:"R$ 26.000"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:325,columnNumber:27},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:323,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:322,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:305,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:301,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:268,columnNumber:17},this),e.jsxDEV("div",{className:"mt-8 p-6 bg-primary/5 rounded-lg border border-primary/20",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-3xl font-bold text-primary mb-2",children:"R$ 71.000 de economia"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:335,columnNumber:21},this),e.jsxDEV("div",{className:"text-lg text-muted-foreground",children:"73% menos custos no primeiro ano"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:338,columnNumber:21},this),e.jsxDEV("div",{className:"mt-4 text-sm text-muted-foreground",children:"+ 90% menos tempo de implementação + Compliance automática 24/7"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:341,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:334,columnNumber:19},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:333,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:267,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:259,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:258,columnNumber:11},this),e.jsxDEV(Q,{value:"cases",className:"space-y-6",children:[e.jsxDEV("div",{className:"grid gap-6",children:s.map((i,r)=>e.jsxDEV(b,{className:"border-l-4 border-l-accent",children:e.jsxDEV(g,{className:"pt-6",children:e.jsxDEV("div",{className:"flex items-start gap-4",children:[e.jsxDEV("div",{className:"p-2 bg-accent/10 rounded-full",children:e.jsxDEV(ms,{className:"w-5 h-5 text-accent"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:359,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:358,columnNumber:23},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("blockquote",{className:"text-lg italic mb-4",children:['"',i.quote,'"']},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:362,columnNumber:25},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-semibold",children:i.name},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:367,columnNumber:29},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:i.role},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:370,columnNumber:29},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:366,columnNumber:27},this),e.jsxDEV(C,{variant:"outline",className:"bg-primary/10",children:i.compliance},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:374,columnNumber:27},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:365,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:361,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:357,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:356,columnNumber:19},this)},r,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:355,columnNumber:17},this))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:353,columnNumber:13},this),e.jsxDEV(b,{className:"bg-gradient-to-r from-primary to-accent text-white",children:e.jsxDEV(g,{className:"pt-6",children:e.jsxDEV("div",{className:"text-center space-y-4",children:[e.jsxDEV("h3",{className:"text-2xl font-bold",children:"Pronto para 85% de Compliance Automatizada?"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:389,columnNumber:19},this),e.jsxDEV("p",{className:"text-lg opacity-90",children:"Junte-se aos escritórios que já economizam 70% em adequação LGPD"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:392,columnNumber:19},this),e.jsxDEV("div",{className:"flex gap-4 justify-center",children:[e.jsxDEV(w,{variant:"secondary",size:"lg",children:"Demonstração Gratuita"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:397,columnNumber:21},this),e.jsxDEV(w,{variant:"outline",size:"lg",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:"Falar com Especialista"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:400,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:396,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:388,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:387,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:386,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:352,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:121,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:107,columnNumber:7},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/MarketingCompliance.tsx",lineNumber:106,columnNumber:5},this)}const Dn=Object.freeze(Object.defineProperty({__proto__:null,MarketingCompliance:va,default:va},Symbol.toStringTag,{value:"Module"}));function Oi(){const{user:a}=de(),[n,s]=x.useState([]),[i,r]=x.useState([]),[m,l]=x.useState(!0),[t,o]=x.useState(null);x.useEffect(()=>{p()},[]);const p=async()=>{l(!0);try{const{data:c,error:v}=await M.from("retention_policies").select("*").order("table_name");v?(console.error("Error fetching policies:",v),ie.error("Erro ao carregar políticas de retenção")):s(c||[]);const{data:u,error:E}=await M.from("cleanup_logs").select("*").order("started_at",{ascending:!1}).limit(50);E?console.error("Error fetching logs:",E):r(u||[])}catch(c){console.error("Error fetching data:",c),ie.error("Erro ao carregar dados")}finally{l(!1)}},d=async(c,v)=>{try{const{error:u}=await M.from("retention_policies").update(v).eq("id",c);if(u)throw u;ie.success("Política atualizada com sucesso"),p()}catch(u){console.error("Error updating policy:",u),ie.error("Erro ao atualizar política")}},f=async c=>{o(c);try{const{data:v,error:u}=await M.functions.invoke("data-retention",{body:{action:"execute_cleanup",policyId:c}});if(u)throw u;ie.success(`Limpeza executada: ${v.result.records_affected} registros afetados`),p()}catch(v){console.error("Error executing cleanup:",v),ie.error("Erro ao executar limpeza")}finally{o(null)}},h=async()=>{o("batch");try{const{data:c,error:v}=await M.functions.invoke("data-retention",{body:{action:"batch_cleanup",orgId:a?.user_metadata?.organization_id}});if(v)throw v;ie.success(`Limpeza em lote executada: ${c.processed} políticas processadas`),p()}catch(c){console.error("Error executing batch cleanup:",c),ie.error("Erro ao executar limpeza em lote")}finally{o(null)}},N=c=>({processos:"Processos",audit_logs:"Logs de Auditoria",openai_logs:"Logs OpenAI",data_access_logs:"Logs de Acesso",lgpd_requests:"Solicitações LGPD"})[c]||c,j=c=>{switch(c){case"COMPLETED":return e.jsxDEV(C,{className:"bg-success",children:[e.jsxDEV(Z,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:182,columnNumber:13},this),"Concluído"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:181,columnNumber:11},this);case"FAILED":return e.jsxDEV(C,{variant:"destructive",children:[e.jsxDEV(ue,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:189,columnNumber:13},this),"Falhou"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:188,columnNumber:11},this);case"STARTED":return e.jsxDEV(C,{variant:"secondary",children:[e.jsxDEV(Ae,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:196,columnNumber:13},this),"Iniciado"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:195,columnNumber:11},this);default:return e.jsxDEV(C,{variant:"outline",children:c},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:201,columnNumber:16},this)}};return m?e.jsxDEV("div",{className:"flex items-center justify-center h-96",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(Pe,{className:"h-12 w-12 mx-auto mb-4 animate-pulse text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:209,columnNumber:11},this),e.jsxDEV("p",{children:"Carregando políticas de retenção..."},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:210,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:208,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:207,columnNumber:7},this):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsxDEV(Pe,{className:"h-8 w-8 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:222,columnNumber:13},this),"Retenção de Dados"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:221,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Gestão automatizada de políticas de retenção LGPD"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:225,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:220,columnNumber:9},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(w,{onClick:h,disabled:t==="batch",variant:"outline",children:[e.jsxDEV(ns,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:235,columnNumber:13},this),t==="batch"?"Executando...":"Limpeza em Lote"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:230,columnNumber:11},this),e.jsxDEV(w,{onClick:p,variant:"outline",children:"Atualizar"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:238,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:229,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:219,columnNumber:7},this),e.jsxDEV(ae,{children:[e.jsxDEV(je,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:246,columnNumber:9},this),e.jsxDEV(re,{children:[e.jsxDEV("strong",{children:"Compliance LGPD:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:248,columnNumber:11},this)," As políticas de retenção automatizada garantem o descarte seguro de dados após o prazo legal necessário, conforme Art. 6º, VII da LGPD."]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:247,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:245,columnNumber:7},this),e.jsxDEV(_e,{defaultValue:"policies",className:"space-y-4",children:[e.jsxDEV(Te,{children:[e.jsxDEV(K,{value:"policies",children:"Políticas de Retenção"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:256,columnNumber:11},this),e.jsxDEV(K,{value:"logs",children:"Histórico de Limpezas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:257,columnNumber:11},this),e.jsxDEV(K,{value:"settings",children:"Configurações"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:258,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:255,columnNumber:9},this),e.jsxDEV(Q,{value:"policies",className:"space-y-4",children:e.jsxDEV("div",{className:"grid gap-4",children:n.map(c=>e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(k,{className:"text-lg",children:N(c.table_name)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:268,columnNumber:23},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:["Retenção: ",c.retention_months," meses"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:271,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:267,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-sm",children:"Auto-limpeza:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:277,columnNumber:25},this),e.jsxDEV(ds,{checked:c.auto_cleanup,onCheckedChange:v=>d(c.id,{auto_cleanup:v})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:278,columnNumber:25},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:276,columnNumber:23},this),e.jsxDEV(w,{size:"sm",onClick:()=>f(c.id),disabled:t===c.id,variant:"outline",children:[e.jsxDEV(Le,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:293,columnNumber:25},this),t===c.id?"Executando...":"Executar Limpeza"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:287,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:275,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:266,columnNumber:19},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:265,columnNumber:17},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Retenção (meses):"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:304,columnNumber:23},this),e.jsxDEV(Y,{type:"number",value:c.retention_months,onChange:v=>d(c.id,{retention_months:parseInt(v.target.value)}),className:"mt-1",min:"1",max:"120"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:307,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:303,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Última Limpeza:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:321,columnNumber:23},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-1",children:c.last_cleanup_at?new Date(c.last_cleanup_at).toLocaleString("pt-BR"):"Nunca executada"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:324,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:320,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Próxima Limpeza:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:333,columnNumber:23},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-1",children:c.next_cleanup_at?new Date(c.next_cleanup_at).toLocaleString("pt-BR"):"Não agendada"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:336,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:332,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:302,columnNumber:19},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:301,columnNumber:17},this)]},c.id,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:264,columnNumber:15},this))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:262,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:261,columnNumber:9},this),e.jsxDEV(Q,{value:"logs",className:"space-y-4",children:e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Histórico de Limpezas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:354,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Registro das execuções de políticas de retenção"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:355,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:353,columnNumber:13},this),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"space-y-4",children:i.length===0?e.jsxDEV("p",{className:"text-center text-muted-foreground py-8",children:"Nenhuma limpeza executada ainda"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:362,columnNumber:19},this):i.map(c=>e.jsxDEV("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"font-medium",children:N(c.table_name)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:373,columnNumber:27},this),j(c.status)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:372,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:[c.records_affected," registros afetados"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:378,columnNumber:25},this),c.error_message&&e.jsxDEV("p",{className:"text-sm text-destructive",children:["Erro: ",c.error_message]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:382,columnNumber:27},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:371,columnNumber:23},this),e.jsxDEV("div",{className:"text-right text-sm text-muted-foreground",children:[e.jsxDEV("div",{children:["Iniciado:"," ",new Date(c.started_at).toLocaleString("pt-BR")]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:388,columnNumber:25},this),c.completed_at&&e.jsxDEV("div",{children:["Concluído:"," ",new Date(c.completed_at).toLocaleString("pt-BR")]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:393,columnNumber:27},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:387,columnNumber:23},this)]},c.id,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:367,columnNumber:21},this))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:360,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:359,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:352,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:351,columnNumber:9},this),e.jsxDEV(Q,{value:"settings",className:"space-y-4",children:e.jsxDEV("div",{className:"grid gap-6",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{children:"Configurações Globais"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:411,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:410,columnNumber:15},this),e.jsxDEV(g,{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h4",{className:"font-medium",children:"Períodos de Retenção Padrão"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:415,columnNumber:19},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxDEV("div",{children:"Processos: 60 meses (5 anos)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:417,columnNumber:21},this),e.jsxDEV("div",{children:"Logs de Auditoria: 24 meses"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:418,columnNumber:21},this),e.jsxDEV("div",{children:"Logs OpenAI: 12 meses"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:419,columnNumber:21},this),e.jsxDEV("div",{children:"Logs de Acesso: 24 meses"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:420,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:416,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:414,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h4",{className:"font-medium",children:"Frequência de Execução"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:425,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Políticas com auto-limpeza habilitada são executadas mensalmente"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:426,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:424,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h4",{className:"font-medium",children:"Segurança"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:433,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Dados críticos (processos ativos) são protegidos contra exclusão acidental. Logs de auditoria são mantidos para compliance regulatório."},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:434,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:432,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:413,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:409,columnNumber:13},this),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{children:"Compliance e Regulamentação"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:445,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:444,columnNumber:15},this),e.jsxDEV(g,{className:"space-y-4",children:[e.jsxDEV(ae,{children:[e.jsxDEV(we,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:449,columnNumber:19},this),e.jsxDEV(re,{children:[e.jsxDEV("strong",{children:"Base Legal LGPD:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:451,columnNumber:21},this),' Art. 6º, VII - "não conservação dos dados pessoais por tempo superior ao necessário para o alcance das finalidades para as quais foram coletados"']},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:450,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:448,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h4",{className:"font-medium",children:"Critérios de Retenção"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:459,columnNumber:19},this),e.jsxDEV("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxDEV("li",{children:"• Processos: Mantidos enquanto tramitam + 5 anos (prescrição)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:461,columnNumber:21},this),e.jsxDEV("li",{children:"• Logs de Auditoria: 2 anos para investigações"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:465,columnNumber:21},this),e.jsxDEV("li",{children:"• Dados de IA: 1 ano para melhorias do serviço"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:466,columnNumber:21},this),e.jsxDEV("li",{children:"• Solicitações LGPD: 3 anos para evidência de compliance"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:467,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:460,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:458,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:447,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:443,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:408,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:407,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:254,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/DataRetention.tsx",lineNumber:217,columnNumber:5},this)}const kn=Object.freeze(Object.defineProperty({__proto__:null,default:Oi},Symbol.toStringTag,{value:"Module"})),Bi=()=>{const{profile:a}=de(),n=As(),{data:s,isLoading:i}=Re({queryKey:["org-settings",a?.organization_id],queryFn:async()=>{const{data:t,error:o}=await M.from("org_settings").select("*").eq("org_id",a?.organization_id).single();if(o&&o.code!=="PGRST116")throw o;return t},enabled:!!a?.organization_id}),{data:r}=Re({queryKey:["usage-stats",a?.organization_id],queryFn:async()=>{const{data:t,error:o}=await M.from("openai_logs").select("*").eq("org_id",a?.organization_id).gte("created_at",new Date(Date.now()-864e5).toISOString()).order("created_at",{ascending:!1});if(o)throw o;const p=t?.reduce((f,h)=>f+(h.cost_cents||0),0)||0,d=t?.length?t.reduce((f,h)=>f+(h.duration_ms||0),0)/t.length:0;return{requests24h:t?.length||0,cost24h:p,avgLatency:Math.round(d),activeModel:s?.model||"gpt-4o-mini"}},enabled:!!a?.organization_id&&!!s}),m=Ee({mutationFn:async t=>{const{data:o,error:p}=await M.functions.invoke("admin-openai-settings",{body:{action:"toggle",enabled:t}});if(p)throw p;return o},onSuccess:()=>{n.invalidateQueries({queryKey:["org-settings"]}),U({title:"Configuração atualizada",description:"Integração OpenAI foi alterada com sucesso."})},onError:t=>{U({title:"Erro",description:t.message||"Falha ao alterar configuração",variant:"destructive"})}});if(i)return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:104,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:103,columnNumber:7},void 0);const l=s?.openai_enabled||!1;return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold",children:"Integração OpenAI"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:116,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Geренаre análises inteligentes com IA"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:117,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:115,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:l?"Ativo":"Desativado"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:122,columnNumber:11},void 0),e.jsxDEV(ds,{checked:l,onCheckedChange:t=>m.mutate(t),disabled:m.isPending},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:125,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:121,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:114,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Status da API"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:137,columnNumber:13},void 0),e.jsxDEV(as,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:138,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:136,columnNumber:11},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:e.jsxDEV(C,{variant:l?"default":"secondary",children:l?"Ativa":"Desativada"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:142,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:141,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-2",children:l?"A API da OpenAI está ativa para esta organização.":"Integração desativada"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:146,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:140,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:135,columnNumber:9},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Modelo Ativo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:156,columnNumber:13},void 0),e.jsxDEV(Vs,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:157,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:155,columnNumber:11},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:r?.activeModel||"N/A"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:160,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:["Latência média: ",r?.avgLatency||0,"ms"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:163,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:159,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:154,columnNumber:9},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Uso 24h"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:171,columnNumber:13},void 0),e.jsxDEV(as,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:172,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:170,columnNumber:11},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:r?.requests24h||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:175,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"requisições nas últimas 24h"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:178,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:174,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:169,columnNumber:9},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(k,{className:"text-sm font-medium",children:"Custo 24h"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:186,columnNumber:13},void 0),e.jsxDEV(Ps,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:187,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:185,columnNumber:11},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:["$",((r?.cost24h||0)/100).toFixed(2)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:190,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"estimado das últimas 24h"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:193,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:189,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:184,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:134,columnNumber:7},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Ações Rápidas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:203,columnNumber:11},void 0),e.jsxDEV(I,{children:"Configure e monitore sua integração OpenAI"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:204,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:202,columnNumber:9},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxDEV(w,{variant:"outline",className:"h-20 flex-col",asChild:!0,children:e.jsxDEV("a",{href:"/admin/ia/chaves",children:[e.jsxDEV(ks,{className:"h-6 w-6 mb-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:212,columnNumber:17},void 0),"Gerenciar Chaves"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:211,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:210,columnNumber:13},void 0),e.jsxDEV(w,{variant:"outline",className:"h-20 flex-col",asChild:!0,children:e.jsxDEV("a",{href:"/admin/ia/modelos",children:[e.jsxDEV(Vs,{className:"h-6 w-6 mb-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:219,columnNumber:17},void 0),"Configurar Modelos"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:218,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:217,columnNumber:13},void 0),e.jsxDEV(w,{variant:"outline",className:"h-20 flex-col",asChild:!0,children:e.jsxDEV("a",{href:"/admin/ia/prompt-studio",children:[e.jsxDEV(ks,{className:"h-6 w-6 mb-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:226,columnNumber:17},void 0),"Prompt Studio"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:225,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:224,columnNumber:13},void 0),e.jsxDEV(w,{variant:"outline",className:"h-20 flex-col",asChild:!0,children:e.jsxDEV("a",{href:"/admin/ia/testes",children:[e.jsxDEV(as,{className:"h-6 w-6 mb-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:233,columnNumber:17},void 0),"Playground"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:232,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:231,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:209,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:208,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:201,columnNumber:7},void 0),!l&&e.jsxDEV(b,{className:"border-orange-200 bg-orange-50",children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"text-orange-800",children:"Configuração Necessária"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:244,columnNumber:13},void 0),e.jsxDEV(I,{className:"text-orange-700",children:"Para usar a integração OpenAI, você precisa:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:247,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:243,columnNumber:11},void 0),e.jsxDEV(g,{className:"text-orange-700",children:e.jsxDEV("ol",{className:"list-decimal list-inside space-y-2",children:[e.jsxDEV("li",{children:["Adicionar uma chave API válida em"," ",e.jsxDEV("strong",{children:"Gerenciar Chaves"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:255,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:253,columnNumber:15},void 0),e.jsxDEV("li",{children:["Configurar o modelo desejado em"," ",e.jsxDEV("strong",{children:"Configurar Modelos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:259,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:257,columnNumber:15},void 0),e.jsxDEV("li",{children:"Ativar a integração usando o switch acima"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:261,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:252,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:251,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:242,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/OpenAI.tsx",lineNumber:112,columnNumber:5},void 0)},Vn=Object.freeze(Object.defineProperty({__proto__:null,default:Bi},Symbol.toStringTag,{value:"Module"})),Li=()=>{const{profile:a}=de(),n=As(),[s,i]=x.useState(!1),[r,m]=x.useState(!1),[l,t]=x.useState({alias:"",key:"",notes:""}),[o,p]=x.useState(null),{data:d,isLoading:f}=Re({queryKey:["openai-keys",a?.organization_id],queryFn:async()=>{const{data:u,error:E}=await M.from("openai_keys").select("*").eq("org_id",a?.organization_id).order("created_at",{ascending:!1});if(E)throw E;return u||[]},enabled:!!a?.organization_id}),h=Ee({mutationFn:async u=>{try{const{data:{session:E},error:R}=await M.auth.getSession();if(R)throw new Error("Falha na autenticação: "+R.message);let z=E;if(!z||!z.access_token){const{data:{session:y}}=await M.auth.refreshSession();if(!y)throw new Error("Sessão expirada. Faça login novamente.");z=y}const F=await M.functions.invoke("admin-openai-keys",{body:{action:"create",alias:u.alias,key:u.key,notes:u.notes},headers:{Authorization:`Bearer ${z.access_token}`}});if(F.error)throw new Error(`Erro na função: ${F.error.message||F.error}`);if(!F.data)throw new Error("Nenhum dado retornado da função");return F.data}catch(E){throw new Error(`Falha ao salvar chave: ${E instanceof Error?E.message:String(E)}`)}},onSuccess:()=>{n.invalidateQueries({queryKey:["openai-keys"]}),i(!1),t({alias:"",key:"",notes:""}),U({title:"Chave adicionada",description:"Chave API foi salva com sucesso."})},onError:u=>{U({title:"Erro",description:"Falha ao salvar chave: "+u.message,variant:"destructive"})}}),N=Ee({mutationFn:async u=>{const{data:E,error:R}=await M.functions.invoke("admin-openai-keys",{body:{action:"test",keyId:u}});if(R)throw R;return E},onSuccess:u=>{p(null),U({title:u.valid?"Chave válida":"Chave inválida",description:u.valid?"Conexão com OpenAI estabelecida com sucesso.":"Chave inválida (401). Verifique ou rotacione a credencial.",variant:u.valid?"default":"destructive"})},onError:u=>{p(null),U({title:"Erro no teste",description:"Falha ao testar chave: "+u.message,variant:"destructive"})}}),j=Ee({mutationFn:async u=>{const{error:E}=await M.functions.invoke("admin-openai-keys",{body:{action:"rotate",keyId:u}});if(E)throw E},onSuccess:()=>{n.invalidateQueries({queryKey:["openai-keys"]}),U({title:"Chave rotacionada",description:"Nova chave foi gerada e salva."})},onError:u=>{U({title:"Erro",description:"Falha ao rotacionar chave: "+u.message,variant:"destructive"})}}),c=Ee({mutationFn:async u=>{const{error:E}=await M.functions.invoke("admin-openai-keys",{body:{action:"delete",keyId:u}});if(E)throw E},onSuccess:()=>{n.invalidateQueries({queryKey:["openai-keys"]}),U({title:"Chave removida",description:"Chave API foi removida com sucesso."})},onError:u=>{U({title:"Erro",description:"Falha ao remover chave: "+u.message,variant:"destructive"})}}),v=u=>{p(u),N.mutate(u)};return f?e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:259,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:258,columnNumber:7},void 0):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold",children:"Gerenciar Chaves OpenAI"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:269,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Configure e monitore suas chaves da API OpenAI"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:270,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:268,columnNumber:9},void 0),e.jsxDEV(Fe,{open:s,onOpenChange:i,children:[e.jsxDEV(ta,{asChild:!0,children:e.jsxDEV(w,{children:[e.jsxDEV(Hs,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:278,columnNumber:15},void 0),"Adicionar Chave"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:277,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:276,columnNumber:11},void 0),e.jsxDEV(Ue,{children:[e.jsxDEV(Ce,{children:[e.jsxDEV(Se,{children:"Adicionar Nova Chave API"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:284,columnNumber:15},void 0),e.jsxDEV(us,{children:"As chaves são armazenadas apenas no servidor. Nunca exibimos o valor completo."},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:285,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:283,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV(B,{htmlFor:"alias",children:"Nome/Apelido"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:293,columnNumber:17},void 0),e.jsxDEV(Y,{id:"alias",placeholder:"Ex: Chave Principal",value:l.alias,onChange:u=>t({...l,alias:u.target.value})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:294,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:292,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV(B,{htmlFor:"key",children:"Chave API"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:305,columnNumber:17},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Y,{id:"key",type:r?"text":"password",placeholder:"sk-...",value:l.key,onChange:u=>t({...l,key:u.target.value})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:307,columnNumber:19},void 0),e.jsxDEV(w,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>m(!r),children:r?e.jsxDEV(Ea,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:324,columnNumber:23},void 0):e.jsxDEV(fe,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:326,columnNumber:23},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:316,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:306,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:304,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV(B,{htmlFor:"notes",children:"Notas (opcional)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:333,columnNumber:17},void 0),e.jsxDEV(Ia,{id:"notes",placeholder:"Descrição ou notas sobre esta chave...",value:l.notes,onChange:u=>t({...l,notes:u.target.value})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:334,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:332,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:291,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex justify-end space-x-2",children:[e.jsxDEV(w,{variant:"outline",onClick:()=>i(!1),children:"Cancelar"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:346,columnNumber:15},void 0),e.jsxDEV(w,{onClick:()=>{!l.alias||!l.key||h.mutate(l)},disabled:!l.alias||!l.key||h.isPending,children:h.isPending?"Salvando...":"Salvar Chave"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:352,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:345,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:282,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:275,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:267,columnNumber:7},void 0),e.jsxDEV(b,{className:"border-blue-200 bg-blue-50",children:e.jsxDEV(g,{className:"pt-6",children:e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV(ua,{className:"h-5 w-5 text-blue-600 mt-0.5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:375,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-blue-800 text-sm",children:[e.jsxDEV("p",{className:"font-medium mb-1",children:"Segurança das Chaves"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:377,columnNumber:15},void 0),e.jsxDEV("p",{children:"As chaves são armazenadas criptografadas no servidor e nunca expostas no cliente. Apenas os últimos 4 dígitos são exibidos para identificação."},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:378,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:376,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:374,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:373,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:372,columnNumber:7},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Chaves Cadastradas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:391,columnNumber:11},void 0),e.jsxDEV(I,{children:[d?.length||0," chave(s) configurada(s)"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:392,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:390,columnNumber:9},void 0),e.jsxDEV(g,{children:d?.length?e.jsxDEV(De,{children:[e.jsxDEV(ke,{children:e.jsxDEV(J,{children:[e.jsxDEV(_,{children:"Nome"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:409,columnNumber:19},void 0),e.jsxDEV(_,{children:"Chave"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:410,columnNumber:19},void 0),e.jsxDEV(_,{children:"Status"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:411,columnNumber:19},void 0),e.jsxDEV(_,{children:"Último Uso"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:412,columnNumber:19},void 0),e.jsxDEV(_,{children:"Criado"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:413,columnNumber:19},void 0),e.jsxDEV(_,{className:"text-right",children:"Ações"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:414,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:408,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:407,columnNumber:15},void 0),e.jsxDEV(he,{children:d.map(u=>e.jsxDEV(J,{children:[e.jsxDEV(S,{className:"font-medium",children:u.alias},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:420,columnNumber:21},void 0),e.jsxDEV(S,{className:"font-mono",children:["***",u.last_four]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:421,columnNumber:21},void 0),e.jsxDEV(S,{children:e.jsxDEV(C,{variant:u.is_active?"default":"secondary",children:u.is_active?"Ativa":"Inativa"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:425,columnNumber:23},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:424,columnNumber:21},void 0),e.jsxDEV(S,{children:u.last_used_at?Xe(new Date(u.last_used_at),"dd/MM/yyyy HH:mm",{locale:ls}):"Nunca"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:429,columnNumber:21},void 0),e.jsxDEV(S,{children:Xe(new Date(u.created_at),"dd/MM/yyyy",{locale:ls})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:438,columnNumber:21},void 0),e.jsxDEV(S,{className:"text-right",children:e.jsxDEV("div",{className:"flex justify-end space-x-2",children:[e.jsxDEV(w,{variant:"outline",size:"sm",onClick:()=>v(u.id),disabled:o===u.id,children:o===u.id?e.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:452,columnNumber:29},void 0):e.jsxDEV(kr,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:454,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:445,columnNumber:25},void 0),e.jsxDEV(w,{variant:"outline",size:"sm",onClick:()=>j.mutate(u.id),disabled:j.isPending,children:e.jsxDEV(Vr,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:464,columnNumber:27},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:458,columnNumber:25},void 0),e.jsxDEV(Zs,{children:[e.jsxDEV(Ma,{asChild:!0,children:e.jsxDEV(w,{variant:"outline",size:"sm",children:e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:470,columnNumber:31},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:469,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:468,columnNumber:27},void 0),e.jsxDEV(ea,{children:[e.jsxDEV(sa,{children:[e.jsxDEV(aa,{children:"Remover Chave"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:475,columnNumber:31},void 0),e.jsxDEV(ra,{children:['Tem certeza que deseja remover a chave "',u.alias,'"? Esta ação não pode ser desfeita.']},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:476,columnNumber:31},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:474,columnNumber:29},void 0),e.jsxDEV(ia,{children:[e.jsxDEV(na,{children:"Cancelar"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:482,columnNumber:31},void 0),e.jsxDEV(ys,{onClick:()=>c.mutate(u.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remover"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:483,columnNumber:31},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:481,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:473,columnNumber:27},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:467,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:444,columnNumber:23},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:443,columnNumber:21},void 0)]},u.id,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:419,columnNumber:19},void 0))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:417,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:406,columnNumber:13},void 0):e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsxDEV(ua,{className:"h-12 w-12 mx-auto mb-4 opacity-50"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:399,columnNumber:15},void 0),e.jsxDEV("p",{children:"Nenhuma chave API configurada"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:400,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm",children:"Adicione uma chave para começar a usar a integração OpenAI"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:401,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:398,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:396,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:389,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Keys.tsx",lineNumber:265,columnNumber:5},void 0)},En=Object.freeze(Object.defineProperty({__proto__:null,default:Li},Symbol.toStringTag,{value:"Module"})),xs=[{id:"gpt-5-2025-08-07",name:"GPT-5",description:"Modelo mais avançado e inteligente",costPer1k:.15,speed:"Rápido",category:"flagship"},{id:"gpt-5-mini-2025-08-07",name:"GPT-5 Mini",description:"Versão otimizada do GPT-5",costPer1k:.08,speed:"Muito Rápido",category:"flagship"},{id:"gpt-4.1-2025-04-14",name:"GPT-4.1",description:"Modelo confiável para resultados consistentes",costPer1k:.1,speed:"Rápido",category:"reliable"},{id:"o3-2025-04-16",name:"O3",description:"Modelo de raciocínio para problemas complexos",costPer1k:.25,speed:"Lento",category:"reasoning"},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Modelo legado rápido e econômico",costPer1k:.02,speed:"Muito Rápido",category:"legacy"}],Fi=()=>{const{profile:a}=de(),n=As(),[s,i]=x.useState({model:"gpt-4o-mini",fallback:[],temperature:.7,top_p:.9,max_output_tokens:2e3,streaming:!1,rate_per_min:60,budget_month_cents:1e4}),{data:r,isLoading:m}=Re({queryKey:["org-settings",a?.organization_id],queryFn:async()=>{const{data:p,error:d}=await M.from("org_settings").select("*").eq("org_id",a?.organization_id).single();if(d&&d.code!=="PGRST116")throw d;return p},enabled:!!a?.organization_id});Qs.useEffect(()=>{r&&i({model:r.model,fallback:r.fallback||[],temperature:r.temperature,top_p:r.top_p,max_output_tokens:r.max_output_tokens,streaming:r.streaming,rate_per_min:r.rate_per_min,budget_month_cents:r.budget_month_cents})},[r]);const l=Ee({mutationFn:async p=>{const{error:d}=await M.functions.invoke("admin-openai-settings",{body:{action:"update_models",settings:p,org_id:a?.organization_id}});if(d)throw d},onSuccess:()=>{n.invalidateQueries({queryKey:["org-settings"]}),U({title:"Configurações salvas",description:"Modelos e parâmetros foram atualizados."})},onError:p=>{U({title:"Erro",description:"Falha ao salvar: "+p.message,variant:"destructive"})}}),t=()=>{l.mutate(s)},o=xs.find(p=>p.id===s.model);return m?e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:157,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:156,columnNumber:7},void 0):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold",children:"Configurar Modelos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:167,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Selecione modelos, configure parâmetros e defina limites"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:168,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:166,columnNumber:9},void 0),e.jsxDEV(w,{onClick:t,disabled:l.isPending,children:l.isPending?"Salvando...":"Salvar Configurações"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:172,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:165,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center space-x-2",children:[e.jsxDEV(Ze,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:184,columnNumber:15},void 0),e.jsxDEV("span",{children:"Seleção de Modelo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:185,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:183,columnNumber:13},void 0),e.jsxDEV(I,{children:"Escolha o modelo principal e fallbacks"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:187,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:182,columnNumber:11},void 0),e.jsxDEV(g,{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV(B,{children:"Modelo Principal"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:193,columnNumber:15},void 0),e.jsxDEV(te,{value:s.model,onValueChange:p=>i({...s,model:p}),children:[e.jsxDEV(oe,{children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:201,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:200,columnNumber:17},void 0),e.jsxDEV(me,{children:xs.map(p=>e.jsxDEV(L,{value:p.id,children:e.jsxDEV("div",{className:"flex items-center justify-between w-full",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium",children:p.name},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:208,columnNumber:27},void 0),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:p.description},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:209,columnNumber:27},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:207,columnNumber:25},void 0),e.jsxDEV(C,{variant:"outline",className:"ml-2",children:["$",p.costPer1k,"/1k"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:213,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:206,columnNumber:23},void 0)},p.id,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:205,columnNumber:21},void 0))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:203,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:194,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:192,columnNumber:13},void 0),o&&e.jsxDEV("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsxDEV("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(Ps,{className:"h-3 w-3"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:227,columnNumber:21},void 0),e.jsxDEV("span",{children:["$",o.costPer1k,"/1k tokens"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:228,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:226,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(Ae,{className:"h-3 w-3"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:231,columnNumber:21},void 0),e.jsxDEV("span",{children:o.speed},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:232,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:230,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(Vs,{className:"h-3 w-3"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:235,columnNumber:21},void 0),e.jsxDEV("span",{className:"capitalize",children:o.category},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:236,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:234,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:225,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-2",children:o.description},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:239,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:224,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV(B,{children:"Modelos de Fallback (ordem de prioridade)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:246,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-2 mt-2",children:[s.fallback.map((p,d)=>e.jsxDEV("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[e.jsxDEV("span",{children:xs.find(f=>f.id===p)?.name||p},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:253,columnNumber:21},void 0),e.jsxDEV(w,{variant:"ghost",size:"sm",onClick:()=>{const f=[...s.fallback];f.splice(d,1),i({...s,fallback:f})},children:"Remover"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:257,columnNumber:21},void 0)]},d,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:249,columnNumber:19},void 0)),e.jsxDEV(te,{onValueChange:p=>{!s.fallback.includes(p)&&p!==s.model&&i({...s,fallback:[...s.fallback,p]})},children:[e.jsxDEV(oe,{children:e.jsxDEV(le,{placeholder:"Adicionar fallback"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:284,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:283,columnNumber:19},void 0),e.jsxDEV(me,{children:xs.filter(p=>p.id!==s.model&&!s.fallback.includes(p.id)).map(p=>e.jsxDEV(L,{value:p.id,children:p.name},p.id,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:292,columnNumber:23},void 0))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:286,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:270,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:247,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:245,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:191,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:181,columnNumber:9},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center space-x-2",children:[e.jsxDEV(ks,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:307,columnNumber:15},void 0),e.jsxDEV("span",{children:"Parâmetros do Modelo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:308,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:306,columnNumber:13},void 0),e.jsxDEV(I,{children:"Configure a personalidade e comportamento da IA"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:310,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:305,columnNumber:11},void 0),e.jsxDEV(g,{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-2",children:[e.jsxDEV(B,{children:"Temperature"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:317,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:s.temperature},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:318,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:316,columnNumber:15},void 0),e.jsxDEV(ve,{value:[s.temperature],onValueChange:([p])=>i({...s,temperature:p}),max:2,min:0,step:.1,className:"w-full"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:322,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"0 = mais determinístico, 2 = mais criativo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:332,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:315,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-2",children:[e.jsxDEV(B,{children:"Top P"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:339,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:s.top_p},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:340,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:338,columnNumber:15},void 0),e.jsxDEV(ve,{value:[s.top_p],onValueChange:([p])=>i({...s,top_p:p}),max:1,min:0,step:.1,className:"w-full"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:344,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"Controla a diversidade da resposta"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:354,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:337,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV(B,{htmlFor:"max_tokens",children:"Máximo de Tokens na Resposta"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:360,columnNumber:15},void 0),e.jsxDEV(Y,{id:"max_tokens",type:"number",value:s.max_output_tokens,onChange:p=>i({...s,max_output_tokens:parseInt(p.target.value)||2e3}),min:100,max:4e3},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:361,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"Limita o tamanho da resposta (100-4000)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:374,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:359,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(B,{children:"Streaming"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:381,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Resposta em tempo real"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:382,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:380,columnNumber:15},void 0),e.jsxDEV(ds,{checked:s.streaming,onCheckedChange:p=>i({...s,streaming:p})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:386,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:379,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:314,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:304,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:179,columnNumber:7},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Limites e Orçamento"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:400,columnNumber:11},void 0),e.jsxDEV(I,{children:"Configure rate limiting e controles de custo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:401,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:399,columnNumber:9},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxDEV("div",{children:[e.jsxDEV(B,{htmlFor:"rate_limit",children:"Rate Limit (requisições/minuto)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:408,columnNumber:15},void 0),e.jsxDEV(Y,{id:"rate_limit",type:"number",value:s.rate_per_min,onChange:p=>i({...s,rate_per_min:parseInt(p.target.value)||60}),min:1,max:1e3},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:411,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"Limite de requisições por minuto por usuário"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:424,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:407,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV(B,{htmlFor:"budget",children:"Orçamento Mensal (centavos USD)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:430,columnNumber:15},void 0),e.jsxDEV(Y,{id:"budget",type:"number",value:s.budget_month_cents,onChange:p=>i({...s,budget_month_cents:parseInt(p.target.value)||1e4}),min:100},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:431,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:["Limite de gasto mensal em centavos ($",(s.budget_month_cents/100).toFixed(2),")"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:443,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:429,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:406,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:405,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:398,columnNumber:7},void 0),e.jsxDEV(b,{className:"border-blue-200 bg-blue-50",children:[e.jsxDEV(D,{children:e.jsxDEV(k,{className:"text-blue-800",children:"Guia de Modelos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:455,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:454,columnNumber:9},void 0),e.jsxDEV(g,{className:"text-blue-700 space-y-2",children:[e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"GPT-5:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:459,columnNumber:13},void 0)," Use para casos que exigem máxima inteligência e raciocínio complexo"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:458,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"GPT-5 Mini:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:463,columnNumber:13},void 0)," Ideal para a maioria dos casos, balanceando qualidade e velocidade"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:462,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"GPT-4.1:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:467,columnNumber:13},void 0)," Confiável para resultados consistentes e bem testados"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:466,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"O3:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:471,columnNumber:13},void 0)," Especificamente para problemas que requerem raciocínio profundo"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:470,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"GPT-4o Mini:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:475,columnNumber:13},void 0)," Para casos simples onde velocidade e custo são prioridade"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:474,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:457,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:453,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Models.tsx",lineNumber:163,columnNumber:5},void 0)},yn=Object.freeze(Object.defineProperty({__proto__:null,default:Fi},Symbol.toStringTag,{value:"Module"})),Ls=[{id:"processo",name:"Processo (CNJ)",description:"Consultas por número de processo"},{id:"testemunha",name:"Testemunha (Nome)",description:"Consultas por nome de testemunha"},{id:"general",name:"Padrões Gerais",description:"Consultas gerais na base"}],Qa=["Basear exclusivamente nos dados da planilha fornecida","Não inventar ou inferir dados não presentes na base","Sempre mascarar números de CPF no formato XXX.XXX.XXX-XX",'Responder "não consta na base fornecida" quando dados não estão disponíveis',"Incluir rodapé obrigatório sobre validação nos autos"],Fs=`Você é um assistente especializado em análise de dados jurídicos. Sua função é consultar e analisar informações de uma planilha de processos e pessoas fornecida pelo usuário.

REGRAS FUNDAMENTAIS (NÃO EDITÁVEIS):
${Qa.map(a=>`- ${a}`).join(`
`)}

VARIÁVEIS DISPONÍVEIS:
- {cnj} - Número do processo
- {nome} - Nome da pessoa
- {comarca} - Comarca do processo
- {ano} - Ano de referência
- {janelaTriangulacao} - Período para análise de triangulação
- {politicaLGPD} - Diretrizes de proteção de dados

Sempre responda no formato JSON estruturado solicitado e inclua o rodapé obrigatório: "Informações baseadas na planilha carregada. Recomenda-se validação nos autos antes de qualquer medida processual."`,Ui=()=>{const{profile:a}=de(),n=As(),[s,i]=x.useState(!1),[,r]=x.useState(null),[m,l]=x.useState({v1:80,v2:20}),[t,o]=x.useState({label:"",content:Fs,template_type:"general"}),{data:p,isLoading:d}=Re({queryKey:["prompts",a?.organization_id],queryFn:async()=>{const{data:u,error:E}=await M.from("prompts").select("*").eq("org_id",a?.organization_id).order("created_at",{ascending:!1});if(E)throw E;return u||[]},enabled:!!a?.organization_id}),{data:f}=Re({queryKey:["org-settings",a?.organization_id],queryFn:async()=>{const{data:u,error:E}=await M.from("org_settings").select("prompt_active_id, ab_weights").eq("org_id",a?.organization_id).single();if(E&&E.code!=="PGRST116")throw E;return u},enabled:!!a?.organization_id}),h=Ee({mutationFn:async u=>{const{error:E}=await M.functions.invoke("admin-prompts",{body:{action:"create",...u,org_id:a?.organization_id}});if(E)throw E},onSuccess:()=>{n.invalidateQueries({queryKey:["prompts"]}),i(!1),o({label:"",content:Fs,template_type:"general"}),U({title:"Prompt criado",description:"Nova versão de prompt foi salva."})},onError:u=>{U({title:"Erro",description:"Falha ao criar prompt: "+u.message,variant:"destructive"})}}),N=Ee({mutationFn:async u=>{const{error:E}=await M.functions.invoke("admin-prompts",{body:{action:"activate",promptId:u,org_id:a?.organization_id}});if(E)throw E},onSuccess:()=>{n.invalidateQueries({queryKey:["org-settings"]}),n.invalidateQueries({queryKey:["prompts"]}),U({title:"Prompt ativado",description:"Prompt está agora ativo para consultas."})},onError:u=>{U({title:"Erro",description:"Falha ao ativar prompt: "+u.message,variant:"destructive"})}}),j=Ee({mutationFn:async u=>{const{error:E}=await M.functions.invoke("admin-prompts",{body:{action:"update_ab_weights",weights:u,org_id:a?.organization_id}});if(E)throw E},onSuccess:()=>{n.invalidateQueries({queryKey:["org-settings"]}),U({title:"A/B Test atualizado",description:"Pesos de distribuição foram salvos."})},onError:u=>{U({title:"Erro",description:"Falha ao atualizar A/B: "+u.message,variant:"destructive"})}}),c=p?.find(u=>u.id===f?.prompt_active_id),v=p?.reduce((u,E)=>(u[E.template_type]||(u[E.template_type]=[]),u[E.template_type].push(E),u),{})||{};return d?e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:247,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:246,columnNumber:7},void 0):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold",children:"Prompt Studio"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:257,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Gerencie prompts do sistema, templates e testes A/B"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:258,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:256,columnNumber:9},void 0),e.jsxDEV(Fe,{open:s,onOpenChange:i,children:[e.jsxDEV(ta,{asChild:!0,children:e.jsxDEV(w,{children:[e.jsxDEV(Hs,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:266,columnNumber:15},void 0),"Novo Prompt"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:265,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:264,columnNumber:11},void 0),e.jsxDEV(Ue,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxDEV(Ce,{children:[e.jsxDEV(Se,{children:"Criar Nova Versão de Prompt"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:272,columnNumber:15},void 0),e.jsxDEV(us,{children:"Configure um novo template de prompt para sua organização"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:273,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:271,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV(B,{htmlFor:"label",children:"Nome do Prompt"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:281,columnNumber:19},void 0),e.jsxDEV(Y,{id:"label",placeholder:"Ex: Análise CNJ v2.1",value:t.label,onChange:u=>o({...t,label:u.target.value})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:282,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:280,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV(B,{htmlFor:"type",children:"Tipo de Template"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:293,columnNumber:19},void 0),e.jsxDEV(te,{value:t.template_type,onValueChange:u=>o({...t,template_type:u}),children:[e.jsxDEV(oe,{children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:301,columnNumber:23},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:300,columnNumber:21},void 0),e.jsxDEV(me,{children:Ls.map(u=>e.jsxDEV(L,{value:u.id,children:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium",children:u.name},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:307,columnNumber:29},void 0),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:u.description},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:308,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:306,columnNumber:27},void 0)},u.id,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:305,columnNumber:25},void 0))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:303,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:294,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:292,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:279,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV(B,{htmlFor:"content",children:"Conteúdo do Prompt"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:320,columnNumber:17},void 0),e.jsxDEV(Ia,{id:"content",className:"min-h-[300px] font-mono text-sm",value:t.content,onChange:u=>o({...t,content:u.target.value})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:321,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:["Use variáveis como ","{cnj}",", ","{nome}",", ","{comarca}",", etc."]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:329,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:319,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:278,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex justify-end space-x-2",children:[e.jsxDEV(w,{variant:"outline",onClick:()=>i(!1),children:"Cancelar"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:336,columnNumber:15},void 0),e.jsxDEV(w,{onClick:()=>h.mutate(t),disabled:!t.label||!t.content||h.isPending,children:h.isPending?"Criando...":"Criar Prompt"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:342,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:335,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:270,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:263,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:255,columnNumber:7},void 0),e.jsxDEV(_e,{defaultValue:"templates",className:"space-y-4",children:[e.jsxDEV(Te,{children:[e.jsxDEV(K,{value:"templates",children:"Templates"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:359,columnNumber:11},void 0),e.jsxDEV(K,{value:"system",children:"Sistema Global"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:360,columnNumber:11},void 0),e.jsxDEV(K,{value:"ab-testing",children:"A/B Testing"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:361,columnNumber:11},void 0),e.jsxDEV(K,{value:"variables",children:"Variáveis"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:362,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:358,columnNumber:9},void 0),e.jsxDEV(Q,{value:"templates",className:"space-y-4",children:[c&&e.jsxDEV(b,{className:"border-green-200 bg-green-50",children:[e.jsxDEV(D,{children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(C,{variant:"default",children:"Ativo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:372,columnNumber:21},void 0),e.jsxDEV(k,{className:"text-green-800",children:c.label},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:373,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:371,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-sm text-green-700",children:["v",c.version," •"," ",Ls.find(u=>u.id===c.template_type)?.name]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:377,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:370,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:369,columnNumber:15},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"bg-white p-3 rounded border text-sm font-mono whitespace-pre-wrap text-green-800",children:[c.content.substring(0,200),"..."]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:388,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:387,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:368,columnNumber:13},void 0),Ls.map(u=>e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center space-x-2",children:[e.jsxDEV(we,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:400,columnNumber:19},void 0),e.jsxDEV("span",{children:u.name},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:401,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:399,columnNumber:17},void 0),e.jsxDEV(I,{children:u.description},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:403,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:398,columnNumber:15},void 0),e.jsxDEV(g,{children:v[u.id]?.length?e.jsxDEV(De,{children:[e.jsxDEV(ke,{children:e.jsxDEV(J,{children:[e.jsxDEV(_,{children:"Nome"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:415,columnNumber:25},void 0),e.jsxDEV(_,{children:"Versão"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:416,columnNumber:25},void 0),e.jsxDEV(_,{children:"Status"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:417,columnNumber:25},void 0),e.jsxDEV(_,{children:"Criado"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:418,columnNumber:25},void 0),e.jsxDEV(_,{className:"text-right",children:"Ações"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:419,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:414,columnNumber:23},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:413,columnNumber:21},void 0),e.jsxDEV(he,{children:v[u.id].map(E=>e.jsxDEV(J,{children:[e.jsxDEV(S,{className:"font-medium",children:E.label},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:425,columnNumber:27},void 0),e.jsxDEV(S,{children:["v",E.version]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:428,columnNumber:27},void 0),e.jsxDEV(S,{children:e.jsxDEV(C,{variant:E.is_active?"default":"secondary",children:E.is_active?"Ativo":"Inativo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:430,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:429,columnNumber:27},void 0),e.jsxDEV(S,{children:Xe(new Date(E.created_at),"dd/MM/yyyy",{locale:ls})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:438,columnNumber:27},void 0),e.jsxDEV(S,{className:"text-right",children:e.jsxDEV("div",{className:"flex justify-end space-x-2",children:[e.jsxDEV(w,{variant:"outline",size:"sm",onClick:()=>r(E),children:e.jsxDEV(_a,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:450,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:445,columnNumber:31},void 0),!E.is_active&&e.jsxDEV(w,{variant:"outline",size:"sm",onClick:()=>N.mutate(E.id),disabled:N.isPending,children:"Ativar"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:453,columnNumber:33},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:444,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:443,columnNumber:27},void 0)]},E.id,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:424,columnNumber:25},void 0))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:422,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:412,columnNumber:19},void 0):e.jsxDEV("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsxDEV(we,{className:"h-8 w-8 mx-auto mb-2 opacity-50"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:408,columnNumber:21},void 0),e.jsxDEV("p",{children:"Nenhum prompt para este tipo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:409,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:407,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:405,columnNumber:15},void 0)]},u.id,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:397,columnNumber:13},void 0))]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:365,columnNumber:9},void 0),e.jsxDEV(Q,{value:"system",className:"space-y-4",children:[e.jsxDEV(b,{className:"border-red-200 bg-red-50",children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center space-x-2 text-red-800",children:[e.jsxDEV(Er,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:481,columnNumber:17},void 0),e.jsxDEV("span",{children:"Guards do Sistema (Não Editáveis)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:482,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:480,columnNumber:15},void 0),e.jsxDEV(I,{className:"text-red-700",children:"Regras de segurança aplicadas automaticamente a todos os prompts"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:484,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:479,columnNumber:13},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"space-y-2",children:Qa.map((u,E)=>e.jsxDEV("div",{className:"flex items-start space-x-2 text-red-800",children:[e.jsxDEV(je,{className:"h-4 w-4 mt-0.5 flex-shrink-0"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:495,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-sm",children:u},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:496,columnNumber:21},void 0)]},E,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:491,columnNumber:19},void 0))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:489,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:488,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:478,columnNumber:11},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Prompt do Sistema Global"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:506,columnNumber:15},void 0),e.jsxDEV(I,{children:"Base aplicada a todos os prompts da organização"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:507,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:505,columnNumber:13},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"bg-muted p-4 rounded-lg font-mono text-sm whitespace-pre-wrap",children:Fs},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:512,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:511,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:504,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:476,columnNumber:9},void 0),e.jsxDEV(Q,{value:"ab-testing",className:"space-y-4",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{className:"flex items-center space-x-2",children:[e.jsxDEV(yr,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:523,columnNumber:17},void 0),e.jsxDEV("span",{children:"Teste A/B de Prompts"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:524,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:522,columnNumber:15},void 0),e.jsxDEV(I,{children:"Configure distribuição de tráfego entre diferentes versões"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:526,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:521,columnNumber:13},void 0),e.jsxDEV(g,{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-2",children:[e.jsxDEV(B,{children:"Versão 1 (Principal)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:533,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:[m.v1,"%"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:534,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:532,columnNumber:17},void 0),e.jsxDEV(ve,{value:[m.v1],onValueChange:([u])=>l({v1:u,v2:100-u}),max:100,min:0,step:5,className:"w-full"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:538,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:531,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-2",children:[e.jsxDEV(B,{children:"Versão 2 (Teste)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:552,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:[m.v2,"%"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:553,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:551,columnNumber:17},void 0),e.jsxDEV(ve,{value:[m.v2],onValueChange:([u])=>l({v1:100-u,v2:u}),max:100,min:0,step:5,className:"w-full"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:557,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:550,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:["Total: ",m.v1+m.v2,"%"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:570,columnNumber:17},void 0),e.jsxDEV(w,{onClick:()=>j.mutate(m),disabled:j.isPending,children:j.isPending?"Salvando...":"Salvar Configuração"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:573,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:569,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:530,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:520,columnNumber:11},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Métricas de Performance"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:588,columnNumber:15},void 0),e.jsxDEV(I,{children:"Comparação entre versões (últimos 7 dias)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:589,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:587,columnNumber:13},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsxDEV(Cr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:595,columnNumber:17},void 0),e.jsxDEV("p",{children:"Dados insuficientes para análise"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:596,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm",children:"Execute mais testes para ver métricas comparativas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:597,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:594,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:593,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:586,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:519,columnNumber:9},void 0),e.jsxDEV(Q,{value:"variables",className:"space-y-4",children:e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Variáveis Disponíveis"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:608,columnNumber:15},void 0),e.jsxDEV(I,{children:"Use estas variáveis em seus prompts para dados dinâmicos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:609,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:607,columnNumber:13},void 0),e.jsxDEV(g,{children:e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("code",{className:"bg-muted px-2 py-1 rounded font-mono text-sm",children:"{cnj}"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:617,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-1",children:"Número do processo CNJ formatado"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:620,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:616,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("code",{className:"bg-muted px-2 py-1 rounded font-mono text-sm",children:"{nome}"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:625,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-1",children:"Nome da pessoa para consulta"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:628,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:624,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("code",{className:"bg-muted px-2 py-1 rounded font-mono text-sm",children:"{comarca}"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:633,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-1",children:"Comarca do processo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:636,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:632,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:615,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("code",{className:"bg-muted px-2 py-1 rounded font-mono text-sm",children:"{ano}"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:643,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-1",children:"Ano de referência para filtros"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:646,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:642,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("code",{className:"bg-muted px-2 py-1 rounded font-mono text-sm",children:"{janelaTriangulacao}"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:651,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-1",children:"Período para análise de triangulação"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:654,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:650,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("code",{className:"bg-muted px-2 py-1 rounded font-mono text-sm",children:"{politicaLGPD}"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:659,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-1",children:"Diretrizes de proteção de dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:662,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:658,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:641,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:614,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:613,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:606,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:605,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:357,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/PromptStudio.tsx",lineNumber:253,columnNumber:5},void 0)},Cn=Object.freeze(Object.defineProperty({__proto__:null,default:Ui},Symbol.toStringTag,{value:"Module"})),qi=()=>{const{profile:a}=de(),[n,s]=x.useState({cnj:"",nome:"",comarca:"",ano:""}),[i,r]=x.useState(null),[m,l]=x.useState(!1),[t,o]=x.useState(null),p=async(d=!1)=>{l(!0);try{const{data:f,error:h}=await M.functions.invoke("admin-openai-test",{body:{input:n,streaming:d,org_id:a?.organization_id}});if(h)throw h;r(f.response),o(f.metrics),U({title:"Teste executado",description:`Resposta gerada em ${f.metrics?.duration_ms}ms`})}catch(f){U({title:"Erro no teste",description:f.message,variant:"destructive"})}finally{l(!1)}};return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold",children:"Playground de Testes"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:67,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-muted-foreground",children:"Teste a IA com dados reais da sua base"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:68,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:66,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Entrada de Teste"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:76,columnNumber:13},void 0),e.jsxDEV(I,{children:"Configure os dados para teste"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:77,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:75,columnNumber:11},void 0),e.jsxDEV(g,{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV(B,{children:"CNJ do Processo"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:81,columnNumber:15},void 0),e.jsxDEV(Y,{placeholder:"0000000-00.0000.0.00.0000",value:n.cnj,onChange:d=>s({...n,cnj:d.target.value})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:82,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:80,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV(B,{children:"Nome da Pessoa"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:91,columnNumber:15},void 0),e.jsxDEV(Y,{placeholder:"João da Silva",value:n.nome,onChange:d=>s({...n,nome:d.target.value})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:92,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:90,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV("div",{children:[e.jsxDEV(B,{children:"Comarca"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:102,columnNumber:17},void 0),e.jsxDEV(Y,{placeholder:"São Paulo",value:n.comarca,onChange:d=>s({...n,comarca:d.target.value})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:103,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:101,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV(B,{children:"Ano"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:112,columnNumber:17},void 0),e.jsxDEV(Y,{placeholder:"2024",value:n.ano,onChange:d=>s({...n,ano:d.target.value})},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:113,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:111,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:100,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex space-x-2",children:[e.jsxDEV(w,{onClick:()=>p(!1),disabled:m,className:"flex-1",children:[e.jsxDEV(ns,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:129,columnNumber:17},void 0),"Executar"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:124,columnNumber:15},void 0),e.jsxDEV(w,{onClick:()=>p(!0),disabled:m,variant:"outline",className:"flex-1",children:[e.jsxDEV(Vs,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:138,columnNumber:17},void 0),"Streaming"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:132,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:123,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:79,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:74,columnNumber:9},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"Resultado"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:147,columnNumber:13},void 0),e.jsxDEV(I,{children:"Resposta da IA"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:148,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:146,columnNumber:11},void 0),e.jsxDEV(g,{children:m?e.jsxDEV("div",{className:"flex items-center justify-center py-8",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:153,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:152,columnNumber:15},void 0):i?e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"bg-muted p-4 rounded-lg",children:e.jsxDEV("pre",{className:"whitespace-pre-wrap text-sm",children:JSON.stringify(i,null,2)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:158,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:157,columnNumber:17},void 0),t&&e.jsxDEV("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(Ae,{className:"h-3 w-3"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:166,columnNumber:23},void 0),e.jsxDEV("span",{children:[t.duration_ms,"ms"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:167,columnNumber:23},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:165,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV(Ps,{className:"h-3 w-3"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:170,columnNumber:23},void 0),e.jsxDEV("span",{children:[t.tokens_in+t.tokens_out," tokens"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:171,columnNumber:23},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:169,columnNumber:21},void 0),e.jsxDEV("div",{children:e.jsxDEV(C,{variant:"outline",children:t.model},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:176,columnNumber:23},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:175,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:164,columnNumber:19},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:156,columnNumber:15},void 0):e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsxDEV(ns,{className:"h-12 w-12 mx-auto mb-4 opacity-50"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:183,columnNumber:17},void 0),e.jsxDEV("p",{children:"Execute um teste para ver o resultado"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:184,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:182,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:150,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:145,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:73,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/openai/Playground.tsx",lineNumber:65,columnNumber:5},void 0)},Sn=Object.freeze(Object.defineProperty({__proto__:null,default:qi},Symbol.toStringTag,{value:"Module"}));function $i(){return e.jsxDEV("div",{className:"min-h-screen bg-background p-6",children:e.jsxDEV("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxDEV("div",{className:"text-center space-y-4",children:[e.jsxDEV("h1",{className:"text-3xl font-bold",children:"Validação do Corretor Inteligente"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:17,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Sistema completo de correção automática implementado com sucesso. Teste o template atualizado para validar todas as funcionalidades."},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:20,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:16,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxDEV(b,{className:"border-success/20 bg-success/5",children:[e.jsxDEV(D,{className:"pb-3",children:e.jsxDEV(k,{className:"flex items-center gap-2 text-success",children:[e.jsxDEV(Ds,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:31,columnNumber:17},this),"Template Corrigido"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:30,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:29,columnNumber:13},this),e.jsxDEV(g,{children:e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Campos legados adicionados (reclamante_nome, reu_nome) para compatibilidade total"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:36,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:35,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:28,columnNumber:11},this),e.jsxDEV(b,{className:"border-primary/20 bg-primary/5",children:[e.jsxDEV(D,{className:"pb-3",children:e.jsxDEV(k,{className:"flex items-center gap-2 text-primary",children:[e.jsxDEV(Je,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:46,columnNumber:17},this),"Corretor Inteligente"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:45,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:44,columnNumber:13},this),e.jsxDEV(g,{children:e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Sistema de correção automática com mapeamento flexível e validação real"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:51,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:50,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:43,columnNumber:11},this),e.jsxDEV(b,{className:"border-warning/20 bg-warning/5",children:[e.jsxDEV(D,{className:"pb-3",children:e.jsxDEV(k,{className:"flex items-center gap-2 text-warning",children:[e.jsxDEV(we,{className:"h-5 w-5"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:61,columnNumber:17},this),"Validação Completa"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:60,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:59,columnNumber:13},this),e.jsxDEV(g,{children:e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Processamento de arquivos reais CSV/XLSX com interface interativa"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:66,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:65,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:58,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:27,columnNumber:9},this),e.jsxDEV(Xa,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:75,columnNumber:9},this),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:[e.jsxDEV(k,{children:"✅ Implementação Concluída"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:80,columnNumber:13},this),e.jsxDEV(I,{children:"Resumo das funcionalidades implementadas no Corretor Inteligente"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:81,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:79,columnNumber:11},this),e.jsxDEV(g,{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("h3",{className:"font-semibold text-success",children:"🔧 Correções Implementadas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:88,columnNumber:17},this),e.jsxDEV("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsxDEV("li",{children:"• Template CSV atualizado com campos legados"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:92,columnNumber:19},this),e.jsxDEV("li",{children:"• Schema JSON expandido para compatibilidade"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:93,columnNumber:19},this),e.jsxDEV("li",{children:"• Builder XLSX sincronizado"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:94,columnNumber:19},this),e.jsxDEV("li",{children:"• Mapeamento inteligente de campos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:95,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:91,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:87,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("h3",{className:"font-semibold text-primary",children:"⚡ Funcionalidades Novas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:99,columnNumber:17},this),e.jsxDEV("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsxDEV("li",{children:"• Validação com dados reais (não mock)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:103,columnNumber:19},this),e.jsxDEV("li",{children:"• Correção automática de CNJ"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:104,columnNumber:19},this),e.jsxDEV("li",{children:"• Formatação inteligente de nomes"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:105,columnNumber:19},this),e.jsxDEV("li",{children:"• Interface interativa de correções"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:106,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:102,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:98,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:86,columnNumber:13},this),e.jsxDEV("div",{className:"border-t pt-4",children:e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:[e.jsxDEV("strong",{children:"Resultado:"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:113,columnNumber:17},this)," Sistema robusto que elimina os erros de importação, permitindo que usuários importem dados com correções automáticas e interface amigável para revisar todas as modificações antes da publicação."]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:112,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:111,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:85,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:78,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:14,columnNumber:7},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/ValidationTest.tsx",lineNumber:13,columnNumber:5},this)}const Pn=Object.freeze(Object.defineProperty({__proto__:null,default:$i},Symbol.toStringTag,{value:"Module"})),Ki=()=>{const[a,n]=x.useState(()=>new Date(Date.now()-6048e5).toISOString().slice(0,10)),[s,i]=x.useState(()=>new Date().toISOString().slice(0,10)),[r,m]=x.useState([]),l=async()=>{if(!await ss())return;m([{event:"page_view",count:150,unique_users:45},{event:"button_click",count:300,unique_users:80}])};return x.useEffect(()=>{l()},[]),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{children:"Metrics"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Metrics.tsx",lineNumber:36,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Metrics.tsx",lineNumber:35,columnNumber:7},void 0),e.jsxDEV(g,{children:[e.jsxDEV("div",{className:"flex gap-2 mb-4",children:[e.jsxDEV(Y,{type:"date",value:a,onChange:t=>n(t.target.value)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Metrics.tsx",lineNumber:40,columnNumber:11},void 0),e.jsxDEV(Y,{type:"date",value:s,onChange:t=>i(t.target.value)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Metrics.tsx",lineNumber:45,columnNumber:11},void 0),e.jsxDEV(w,{onClick:l,children:"Refresh"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Metrics.tsx",lineNumber:50,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Metrics.tsx",lineNumber:39,columnNumber:9},void 0),e.jsxDEV("ul",{children:r.map(t=>e.jsxDEV("li",{className:"py-1",children:[t.event,": ",t.count]},t.event,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Metrics.tsx",lineNumber:54,columnNumber:13},void 0))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/Metrics.tsx",lineNumber:52,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Metrics.tsx",lineNumber:38,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/Metrics.tsx",lineNumber:34,columnNumber:5},void 0)},An=Object.freeze(Object.defineProperty({__proto__:null,default:Ki},Symbol.toStringTag,{value:"Module"})),Wi=()=>{const[a,n]=x.useState([]);x.useEffect(()=>{const l=[{flag_id:"advanced-search",window:"7d",evaluations_count:150,unique_users:45,last_evaluated:new Date().toISOString()},{flag_id:"beta-features",window:"30d",evaluations_count:300,unique_users:80,last_evaluated:new Date().toISOString()}];n(l)},[]);const s=x.useMemo(()=>{const l={};for(const t of a)l[t.flag_id]||(l[t.flag_id]={flag_id:t.flag_id,eval_7d:0,eval_30d:0}),t.window==="7d"&&(l[t.flag_id].eval_7d=t.evaluations_count),t.window==="30d"&&(l[t.flag_id].eval_30d=t.evaluations_count);return Object.values(l)},[a]),i=a.filter(l=>l.window==="7d").reduce((l,t)=>l+t.evaluations_count,0),r=a.filter(l=>l.window==="30d").reduce((l,t)=>l+t.evaluations_count,0),m=a.filter(l=>l.window==="30d").reduce((l,t)=>l+t.unique_users,0);return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid gap-4 sm:grid-cols-3",children:[e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{children:"Avaliações 7d"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:72,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:71,columnNumber:11},void 0),e.jsxDEV(g,{className:"text-2xl font-bold",children:i},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:74,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:70,columnNumber:9},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{children:"Avaliações 30d"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:78,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:77,columnNumber:11},void 0),e.jsxDEV(g,{className:"text-2xl font-bold",children:r},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:80,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:76,columnNumber:9},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{children:"Usuários únicos 30d"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:84,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:83,columnNumber:11},void 0),e.jsxDEV(g,{className:"text-2xl font-bold",children:m},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:86,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:82,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:69,columnNumber:7},void 0),e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{children:"Avaliações por Flag"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:92,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:91,columnNumber:9},void 0),e.jsxDEV(g,{children:e.jsxDEV(ps,{className:"h-[300px]",config:{eval_7d:{label:"7d",color:"hsl(var(--chart-1))"},eval_30d:{label:"30d",color:"hsl(var(--chart-2))"}},children:e.jsxDEV(Da,{data:s,children:[e.jsxDEV(Cs,{strokeDasharray:"3 3"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:103,columnNumber:15},void 0),e.jsxDEV(Ss,{dataKey:"flag_id"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:104,columnNumber:15},void 0),e.jsxDEV(is,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:105,columnNumber:15},void 0),e.jsxDEV(Ns,{content:e.jsxDEV(Ts,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:106,columnNumber:38},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:106,columnNumber:15},void 0),e.jsxDEV(Us,{dataKey:"eval_7d",fill:"var(--color-eval_7d)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:107,columnNumber:15},void 0),e.jsxDEV(Us,{dataKey:"eval_30d",fill:"var(--color-eval_30d)"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:108,columnNumber:15},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:102,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:95,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:94,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:90,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/FeatureFlagMetrics.tsx",lineNumber:68,columnNumber:5},void 0)},_n=Object.freeze(Object.defineProperty({__proto__:null,default:Wi},Symbol.toStringTag,{value:"Module"}));function Ji(){const a=Sr();return x.useEffect(()=>{a("/admin/base/processos",{replace:!0})},[a]),null}const Tn=Object.freeze(Object.defineProperty({__proto__:null,default:Ji},Symbol.toStringTag,{value:"Module"}));function Gi(){const n=Pr().pathname.includes("/testemunhas")?"testemunhas":"processos";return e.jsxDEV("div",{className:"flex flex-col h-full bg-gradient-subtle",children:[e.jsxDEV("div",{className:"border-b bg-background",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-6",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("h1",{className:"text-2xl font-semibold text-foreground flex items-center gap-2",children:[e.jsxDEV(Pe,{className:"h-6 w-6 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:19,columnNumber:15},this),"Explorar Dados"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:18,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Revise, valide e gerencie dados pós-importação com controle de qualidade"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:22,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:17,columnNumber:11},this),e.jsxDEV(w,{variant:"outline",className:"gap-2",children:[e.jsxDEV(ws,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:29,columnNumber:13},this),"Exportar"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:28,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:16,columnNumber:9},this),e.jsxDEV("div",{className:"px-6",children:e.jsxDEV(_e,{value:n,className:"w-auto",children:e.jsxDEV(Te,{className:"grid w-fit grid-cols-2",children:[e.jsxDEV(K,{value:"processos",asChild:!0,children:e.jsxDEV(da,{to:"/admin/base/processos",className:"flex items-center gap-2",children:[e.jsxDEV(ya,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:43,columnNumber:19},this),e.jsxDEV("span",{className:"hidden sm:inline",children:"Processos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:44,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:39,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:38,columnNumber:15},this),e.jsxDEV(K,{value:"testemunhas",asChild:!0,children:e.jsxDEV(da,{to:"/admin/base/testemunhas",className:"flex items-center gap-2",children:[e.jsxDEV(ms,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:52,columnNumber:19},this),e.jsxDEV("span",{className:"hidden sm:inline",children:"Testemunhas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:53,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:48,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:47,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:37,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:36,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:35,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:15,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:e.jsxDEV(Ar,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:63,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:62,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/BaseLayout.tsx",lineNumber:13,columnNumber:5},this)}const Mn=Object.freeze(Object.defineProperty({__proto__:null,default:Gi},Symbol.toStringTag,{value:"Module"})),js=[{cnj:"5001234-12.2024.5.02.0001",reclamante:"João da Silva Santos",reclamada:"Empresa XYZ Ltda",testemunhas_ativas:["Maria Oliveira","Carlos Pereira"],testemunhas_passivas:["Ana Costa","Pedro Lima"],qtd_testemunhas:4,classificacao:"Atenção",classificacao_estrategica:"Média complexidade",created_at:new Date().toISOString()},{cnj:"5001235-13.2024.5.02.0001",reclamante:"Ana Paula Ferreira",reclamada:"Tech Solutions S.A.",testemunhas_ativas:["Roberto Silva"],testemunhas_passivas:["Lucia Santos","Fernando Costa","Mariana Oliveira"],qtd_testemunhas:4,classificacao:"Crítico",classificacao_estrategica:"Alta complexidade",created_at:new Date(Date.now()-864e5).toISOString()},{cnj:"5001236-14.2024.5.02.0001",reclamante:"Carlos Eduardo Souza",reclamada:"Indústria ABC Ltda",testemunhas_ativas:["Patricia Lima"],testemunhas_passivas:["José Maria"],qtd_testemunhas:2,classificacao:"Normal",classificacao_estrategica:"Baixa complexidade",created_at:new Date(Date.now()-1728e5).toISOString()}],Ne={uuid:xe().uuid("UUID inválido"),orgId:xe().min(1,"ID da organização é obrigatório"),cnj:xe().refine(a=>{const n=a.replace(/[^\d]/g,"");return n.length===20&&/^\d{20}$/.test(n)},"CNJ deve ter 20 dígitos numéricos"),nonEmptyString:xe().min(1,"Campo obrigatório").trim(),optionalString:xe().optional(),stringArray:zs(xe()),nonEmptyStringArray:zs(xe()).min(1,"Pelo menos um item é necessário"),page:es().int().min(1,"Página deve ser >= 1"),limit:es().int().min(1).max(100,"Limite máximo de 100 itens"),filters:_s({search:xe().optional(),classificacao:zs(xe()).optional(),qtdMin:es().int().min(0).optional(),qtdMax:es().int().min(0).optional()}).optional()};_s({cnj:Ne.cnj,reclamante:Ne.nonEmptyString,reclamada:Ne.nonEmptyString,testemunhas_ativas:Ne.stringArray,testemunhas_passivas:Ne.stringArray,qtd_testemunhas:es().int().min(0),classificacao:Ne.nonEmptyString,classificacao_estrategica:Ne.optionalString,created_at:xe()});const Xi=_s({filters:Ne.filters,page:Ne.page.default(1),limit:Ne.limit.default(50)});_s({id:Ne.uuid,organization_id:Ne.orgId,role:Fr(["admin","user","viewer"]),email:xe().email("E-mail inválido")});function Qi(a,n){const s=a.safeParse(n);if(!s.success){const i=s.error.issues.map(r=>`${r.path.join(".")}: ${r.message}`).join(", ");throw new Error(`Dados inválidos: ${i}`)}return s.data}function Hi(a={},n=50,s=1){const{profile:i}=de(),[r,m]=x.useState(s),{data:l,isLoading:t,error:o,refetch:p}=Re({queryKey:["assistjur-processos",i?.organization_id,a,r,n],queryFn:async()=>{if(!$s(i?.organization_id))throw Os.authentication("Organização não encontrada",{profile:i?.id});const d=Qi(Xi,{filters:a,page:r,limit:n});return await qr(async()=>{const{data:{session:f}}=await M.auth.getSession();if(!f?.access_token)throw Os.authentication("Sessão expirada");const N=await fetch("https://fgjypmlszuzkgvhuszxn.functions.supabase.co/assistjur-processos",{method:"POST",headers:{Authorization:`Bearer ${f.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(d)});if(!N.ok){const c=await N.json().catch(()=>({}));throw Os.system(c.detail||`HTTP ${N.status}: ${N.statusText}`,{status:N.status})}const j=await N.json();return!j?.data||j.data.length===0?{data:js,count:js.length,totalPages:1}:j},"AssistJurProcessos",{retries:2,timeout:3e4,fallback:{data:js,count:js.length,totalPages:1}})},enabled:!!i?.organization_id,retry:(d,f)=>f?.message?.includes("Sessão expirada")||f?.message?.includes("Acesso negado")?!1:d<2,staleTime:300*1e3});return{data:l?.data||[],totalCount:l?.count||0,currentPage:r,totalPages:l?.totalPages||1,isLoading:t,error:o,refetch:p,setPage:m}}const Ha=({className:a,...n})=>e.jsxDEV("nav",{role:"navigation","aria-label":"pagination",className:ce("mx-auto flex w-full justify-center",a),...n},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/pagination.tsx",lineNumber:8,columnNumber:3},void 0);Ha.displayName="Pagination";const Ya=x.forwardRef(({className:a,...n},s)=>e.jsxDEV("ul",{ref:s,className:ce("flex flex-row items-center gap-1",a),...n},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/pagination.tsx",lineNumber:21,columnNumber:3},void 0));Ya.displayName="PaginationContent";const vs=x.forwardRef(({className:a,...n},s)=>e.jsxDEV("li",{ref:s,className:ce("",a),...n},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/pagination.tsx",lineNumber:33,columnNumber:3},void 0));vs.displayName="PaginationItem";const Ms=({className:a,isActive:n,size:s="icon",...i})=>e.jsxDEV("a",{"aria-current":n?"page":void 0,className:ce(Ur({variant:n?"outline":"ghost",size:s}),a),...i},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/pagination.tsx",lineNumber:48,columnNumber:3},void 0);Ms.displayName="PaginationLink";const Za=({className:a,...n})=>e.jsxDEV(Ms,{"aria-label":"Go to previous page",size:"default",className:ce("gap-1 pl-2.5",a),...n,children:[e.jsxDEV(_r,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/pagination.tsx",lineNumber:72,columnNumber:5},void 0),e.jsxDEV("span",{children:"Previous"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/pagination.tsx",lineNumber:73,columnNumber:5},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/ui/pagination.tsx",lineNumber:66,columnNumber:3},void 0);Za.displayName="PaginationPrevious";const er=({className:a,...n})=>e.jsxDEV(Ms,{"aria-label":"Go to next page",size:"default",className:ce("gap-1 pr-2.5",a),...n,children:[e.jsxDEV("span",{children:"Next"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/pagination.tsx",lineNumber:88,columnNumber:5},void 0),e.jsxDEV(Tr,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/pagination.tsx",lineNumber:89,columnNumber:5},void 0)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/ui/pagination.tsx",lineNumber:82,columnNumber:3},void 0);er.displayName="PaginationNext";function Yi(){const[a,n]=Mr(),s={search:a.get("search")||void 0,classificacao:a.get("classificacao")?a.get("classificacao").split(","):void 0},i=Number(a.get("page")||"1"),[r,m]=x.useState(s),[l,t]=x.useState(!1),[o,p]=x.useState(!1),{data:d,totalCount:f,currentPage:h,totalPages:N,isLoading:j,error:c,setPage:v}=Hi(r,50,i);x.useEffect(()=>{const V={};r.search&&(V.search=r.search),r.classificacao?.length&&(V.classificacao=r.classificacao.join(",")),h>1&&(V.page=String(h)),n(V,{replace:!0})},[r,h,n]);const u=V=>{m(P=>({...P,search:V.trim()||void 0})),v(1)},E=V=>{m(V==="all"?P=>({...P,classificacao:void 0}):P=>({...P,classificacao:[V]})),v(1)},R=()=>{m({}),v(1)},z=V=>{switch(V?.toLowerCase()){case"crítico":return"destructive";case"atenção":return"secondary";case"observação":return"outline";default:return"secondary"}},F=()=>{try{const P=[["CNJ","Reclamante","Reclamada","Testemunhas Ativas","Testemunhas Passivas","Qtd Total","Classificação","Data Criação"].join(","),...d.map(G=>{const T=G;return[T.cnj,`"${T.reclamante}"`,`"${T.reclamada}"`,`"${T.testemunhas_ativas.join("; ")}"`,`"${T.testemunhas_passivas.join("; ")}"`,T.qtd_testemunhas,`"${T.classificacao}"`,Xe(new Date(T.created_at),"dd/MM/yyyy",{locale:ls})].join(",")})].join(`
`),O=new Blob([P],{type:"text/csv;charset=utf-8;"}),q=document.createElement("a");q.href=URL.createObjectURL(O),q.download=`assistjur-processos-${Xe(new Date,"yyyy-MM-dd")}.csv`,q.click(),ie.success(`Exportação concluída: ${d.length} processos`)}catch(V){console.error("Erro na exportação CSV:",V),ie.error("Erro ao exportar dados. Tente novamente.")}},y=()=>{window.open("https://supabase.com/dashboard/project/fgjypmlszuzkgvhuszxn/functions/assistjur-processos/logs","_blank"),ie.info("Abrindo logs da Edge Function...")};return c?e.jsxDEV(b,{className:"p-6",children:e.jsxDEV("div",{className:"text-center space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"text-destructive font-medium",children:"Erro ao carregar processos"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:171,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:c.message},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:174,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:170,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center justify-center gap-2",children:[e.jsxDEV(w,{variant:"outline",onClick:()=>window.location.reload(),children:"Tentar novamente"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:177,columnNumber:13},this),e.jsxDEV(w,{variant:"outline",onClick:y,size:"sm",children:[e.jsxDEV(Ir,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:181,columnNumber:15},this),"Abrir Logs"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:180,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:176,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:169,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:168,columnNumber:7},this):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV(b,{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Processos AssistJur.IA"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:196,columnNumber:13},this),e.jsxDEV("p",{className:"text-muted-foreground",children:[f," processos encontrados"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:197,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:195,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(w,{variant:"outline",onClick:()=>p(!o),children:[e.jsxDEV(Gs,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:206,columnNumber:15},this),"Filtros"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:202,columnNumber:13},this),e.jsxDEV(w,{variant:"outline",onClick:()=>t(!l),children:l?"Mostrar Dados":"Mascarar PII"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:209,columnNumber:13},this),e.jsxDEV(w,{variant:"outline",onClick:F,children:[e.jsxDEV(ge,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:216,columnNumber:15},this),"Exportar CSV"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:215,columnNumber:13},this),e.jsxDEV(w,{variant:"outline",onClick:y,size:"sm",children:[e.jsxDEV(Rr,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:220,columnNumber:15},this),"Abrir Logs"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:219,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:201,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:194,columnNumber:9},this),o&&e.jsxDEV("div",{className:"border-t pt-4 space-y-4",children:e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Buscar"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:231,columnNumber:17},this),e.jsxDEV(Y,{placeholder:"CNJ, reclamante, reclamada...",value:r.search||"",onChange:V=>u(V.target.value)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:232,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:230,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Classificação"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:240,columnNumber:17},this),e.jsxDEV(te,{value:r.classificacao?.[0]||"all",onValueChange:E,children:[e.jsxDEV(oe,{children:e.jsxDEV(le,{placeholder:"Todas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:248,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:247,columnNumber:19},this),e.jsxDEV(me,{children:[e.jsxDEV(L,{value:"all",children:"Todas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:251,columnNumber:21},this),e.jsxDEV(L,{value:"crítico",children:"Crítico"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:252,columnNumber:21},this),e.jsxDEV(L,{value:"atenção",children:"Atenção"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:253,columnNumber:21},this),e.jsxDEV(L,{value:"observação",children:"Observação"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:254,columnNumber:21},this),e.jsxDEV(L,{value:"normal",children:"Normal"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:255,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:250,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:243,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:239,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-end",children:e.jsxDEV(w,{variant:"outline",onClick:R,children:[e.jsxDEV(qs,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:262,columnNumber:19},this),"Limpar"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:261,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:260,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:229,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:228,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:193,columnNumber:7},this),e.jsxDEV(b,{children:[e.jsxDEV("div",{className:"border border-border/50 rounded-2xl overflow-hidden",children:e.jsxDEV(De,{children:[e.jsxDEV(ke,{children:e.jsxDEV(J,{className:"bg-muted/30",children:[e.jsxDEV(_,{className:"font-semibold",children:"CNJ"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:277,columnNumber:17},this),e.jsxDEV(_,{className:"font-semibold",children:"Reclamante"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:278,columnNumber:17},this),e.jsxDEV(_,{className:"font-semibold",children:"Reclamada"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:279,columnNumber:17},this),e.jsxDEV(_,{className:"font-semibold",children:"Testemunhas Ativas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:280,columnNumber:17},this),e.jsxDEV(_,{className:"font-semibold",children:"Testemunhas Passivas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:283,columnNumber:17},this),e.jsxDEV(_,{className:"font-semibold text-center",children:"Qtd Total"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:286,columnNumber:17},this),e.jsxDEV(_,{className:"font-semibold",children:"Classificação"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:289,columnNumber:17},this),e.jsxDEV(_,{className:"font-semibold",children:"Data"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:290,columnNumber:17},this),e.jsxDEV(_,{className:"font-semibold text-center",children:"Ações"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:291,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:276,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:275,columnNumber:13},this),e.jsxDEV(he,{children:j?Array.from({length:5}).map((V,P)=>e.jsxDEV(J,{children:[e.jsxDEV(S,{className:"h-16",children:e.jsxDEV("div",{className:"animate-pulse bg-muted rounded h-4 w-24"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:301,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:300,columnNumber:21},this),e.jsxDEV(S,{className:"h-16",children:e.jsxDEV("div",{className:"animate-pulse bg-muted rounded h-4 w-32"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:304,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:303,columnNumber:21},this),e.jsxDEV(S,{className:"h-16",children:e.jsxDEV("div",{className:"animate-pulse bg-muted rounded h-4 w-28"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:307,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:306,columnNumber:21},this),e.jsxDEV(S,{className:"h-16",children:e.jsxDEV("div",{className:"animate-pulse bg-muted rounded h-4 w-20"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:310,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:309,columnNumber:21},this),e.jsxDEV(S,{className:"h-16",children:e.jsxDEV("div",{className:"animate-pulse bg-muted rounded h-4 w-20"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:313,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:312,columnNumber:21},this),e.jsxDEV(S,{className:"h-16",children:e.jsxDEV("div",{className:"animate-pulse bg-muted rounded h-4 w-8"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:316,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:315,columnNumber:21},this),e.jsxDEV(S,{className:"h-16",children:e.jsxDEV("div",{className:"animate-pulse bg-muted rounded h-4 w-16"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:319,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:318,columnNumber:21},this),e.jsxDEV(S,{className:"h-16",children:e.jsxDEV("div",{className:"animate-pulse bg-muted rounded h-4 w-12"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:322,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:321,columnNumber:21},this),e.jsxDEV(S,{className:"h-16",children:e.jsxDEV("div",{className:"animate-pulse bg-muted rounded h-4 w-8"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:325,columnNumber:23},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:324,columnNumber:21},this)]},P,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:299,columnNumber:19},this)):d.length===0?e.jsxDEV(J,{children:e.jsxDEV(S,{colSpan:9,className:"text-center py-8",children:[e.jsxDEV("p",{className:"text-muted-foreground",children:"Nenhum processo encontrado"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:332,columnNumber:21},this),(r.search||r.classificacao)&&e.jsxDEV(w,{variant:"link",onClick:R,children:"Limpar filtros"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:336,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:331,columnNumber:19},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:330,columnNumber:17},this):d.map(V=>{const P=V;return e.jsxDEV(J,{className:"hover:bg-muted/20",children:[e.jsxDEV(S,{className:"font-mono text-xs max-w-[120px] truncate",children:hs(P.cnj,l)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:356,columnNumber:23},this),e.jsxDEV(S,{className:"font-medium max-w-[150px] truncate",children:hs(P.reclamante,l)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:359,columnNumber:23},this),e.jsxDEV(S,{className:"max-w-[150px] truncate",children:hs(P.reclamada,l)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:362,columnNumber:23},this),e.jsxDEV(S,{className:"max-w-[200px]",children:e.jsxDEV(Ks,{items:P.testemunhas_ativas,maxVisible:2,isPiiMasked:l},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:366,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:365,columnNumber:23},this),e.jsxDEV(S,{className:"max-w-[200px]",children:e.jsxDEV(Ks,{items:P.testemunhas_passivas,maxVisible:2,isPiiMasked:l},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:373,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:372,columnNumber:23},this),e.jsxDEV(S,{className:"text-center",children:e.jsxDEV(C,{variant:"secondary",className:"text-xs",children:P.qtd_testemunhas},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:380,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:379,columnNumber:23},this),e.jsxDEV(S,{children:e.jsxDEV(C,{variant:z(P.classificacao),className:"text-xs",children:P.classificacao},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:385,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:384,columnNumber:23},this),e.jsxDEV(S,{className:"text-xs text-muted-foreground",children:Xe(new Date(P.created_at),"dd/MM/yy",{locale:ls})},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:392,columnNumber:23},this),e.jsxDEV(S,{children:e.jsxDEV("div",{className:"flex items-center justify-center",children:e.jsxDEV(w,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsxDEV(fe,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:404,columnNumber:29},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:399,columnNumber:27},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:398,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:397,columnNumber:23},this)]},P.cnj,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:355,columnNumber:21},this)})},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:296,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:274,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:273,columnNumber:9},this),N>1&&e.jsxDEV("div",{className:"flex items-center justify-between p-4 border-t",children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:["Página ",h," de ",N," • ",f," registros"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:419,columnNumber:13},this),e.jsxDEV(Ha,{children:e.jsxDEV(Ya,{children:[e.jsxDEV(vs,{children:e.jsxDEV(Za,{href:"#","aria-disabled":h<=1,className:h<=1?"pointer-events-none opacity-50":"",onClick:V=>{V.preventDefault(),h>1&&v(h-1)}},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:425,columnNumber:19},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:424,columnNumber:17},this),Array.from({length:N},(V,P)=>e.jsxDEV(vs,{children:e.jsxDEV(Ms,{href:"#",isActive:h===P+1,onClick:O=>{O.preventDefault(),v(P+1)},children:P+1},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:439,columnNumber:21},this)},P,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:438,columnNumber:19},this)),e.jsxDEV(vs,{children:e.jsxDEV(er,{href:"#","aria-disabled":h>=N,className:h>=N?"pointer-events-none opacity-50":"",onClick:V=>{V.preventDefault(),h<N&&v(h+1)}},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:452,columnNumber:19},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:451,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:423,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:422,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:418,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:272,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/assistjur/ProcessosDataTable.tsx",lineNumber:191,columnNumber:5},this)}function sr({type:a,onSuccess:n,className:s}){const{profile:i,isAdmin:r}=de(),{toast:m}=Qe(),[l,t]=x.useState(!1),[o,p]=x.useState(null),[d,f]=x.useState(""),[h,N]=x.useState({understand:!1,irreversible:!1,backup:!1}),[j,c]=x.useState(!1),[v,u]=x.useState(!1),[E,R]=x.useState(0),[z,F]=x.useState("preview"),[y,V]=x.useState("soft"),[P,O]=x.useState(10);x.useEffect(()=>{},[r,i?.organization_id]);const q=i?.organization_id||"",G=d===q,T=Object.values(h).every(Boolean),ee=G&&T&&P===0,H=!!(r&&i?.organization_id);x.useEffect(()=>{if(z==="confirm"&&P>0){const $=setTimeout(()=>O(X=>X-1),1e3);return()=>clearTimeout($)}},[z,P]),x.useEffect(()=>{l&&!o&&H&&W()},[l,H]);const W=async()=>{if(!H){m({title:"Acesso negado",description:"Você precisa ser um administrador para executar esta operação",variant:"destructive"});return}u(!0);try{const{data:$,error:X}=await M.rpc("rpc_get_deletion_impact",{p_org_id:i.organization_id});if(X)throw X;p($)}catch($){m({title:"Erro ao carregar dados",description:$ instanceof Error?$.message:"Não foi possível carregar o impacto da exclusão",variant:"destructive"})}finally{u(!1)}},be=async()=>{if(i?.organization_id){c(!0),F("executing"),R(0);try{R(25);let $=null;try{const{data:X,error:Me}=await M.functions.invoke("processes-delete-all",{body:{confirm:i.organization_id,hard_delete:y==="hard"}});if(Me)throw Me;if(X?.error)throw new Error(X.message||X.error);$={success:X.success,deleted_count:X.deleted_count,operation_type:X.operation_type,message:X.message}}catch{const{data:Me,error:A}=await M.rpc("rpc_delete_all_processos",{p_org_id:i.organization_id,p_hard_delete:y==="hard"});if(A)throw A;$=Me}if(R(75),a==="processos"&&$){const{error:X}=await M.rpc("rpc_cleanup_derived_data",{p_org_id:i.organization_id})}R(100),$&&(m({title:"Exclusão concluída",description:`${$.deleted_count} registros foram ${y==="hard"?"permanentemente excluídos":"marcados para exclusão"}`}),n?.(),t(!1),Ve())}catch($){m({title:"Erro na exclusão",description:$ instanceof Error?$.message:"Erro desconhecido durante a exclusão",variant:"destructive"})}finally{c(!1)}}},pe=async()=>{if(i?.organization_id){c(!0),F("executing"),R(0);try{R(50);const{data:$,error:X}=await M.rpc("rpc_cleanup_derived_data",{p_org_id:i.organization_id});if(X)throw X;const Me=$;R(100),m({title:"Limpeza concluída",description:`${Me.deleted_count} registros de testemunhas órfãs foram removidos`}),n?.(),t(!1),Ve()}catch($){m({title:"Erro na limpeza",description:$ instanceof Error?$.message:"Erro desconhecido durante a limpeza",variant:"destructive"})}finally{c(!1)}}},Ve=()=>{F("preview"),f(""),N({understand:!1,irreversible:!1,backup:!1}),R(0),O(10),p(null)},He=()=>{j||(t(!1),Ve())},qe=()=>{switch(a){case"processos":return"Excluir Todos os Processos";case"testemunhas":return"Limpar Dados de Testemunhas";default:return"Excluir Dados"}},$e=()=>{switch(a){case"processos":return"Exclusão em Massa - Processos";case"testemunhas":return"Limpeza de Dados - Testemunhas";default:return"Exclusão em Massa"}},Is=()=>{switch(a){case"processos":return"Esta operação irá excluir todos os processos da organização";case"testemunhas":return"Esta operação irá limpar dados de testemunhas órfãs (sem processos associados)";default:return"Esta operação irá excluir dados da organização"}};return e.jsxDEV(Zs,{open:l,onOpenChange:He,children:[e.jsxDEV(Ma,{asChild:!0,children:e.jsxDEV(w,{variant:"destructive",size:"sm",className:s,onClick:()=>t(!0),disabled:!H,title:H?"":"Acesso negado - apenas administradores",children:[e.jsxDEV(Le,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:332,columnNumber:11},this),qe()]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:324,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:323,columnNumber:7},this),e.jsxDEV(ea,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxDEV(sa,{children:[e.jsxDEV(aa,{className:"flex items-center gap-2",children:[e.jsxDEV(ue,{className:"h-5 w-5 text-destructive"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:340,columnNumber:13},this),$e()]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:339,columnNumber:11},this),e.jsxDEV(ra,{children:Is()},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:343,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:338,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[z==="preview"&&v&&e.jsxDEV(b,{children:e.jsxDEV(g,{className:"pt-6",children:e.jsxDEV("div",{className:"flex items-center justify-center py-8",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:352,columnNumber:19},this),e.jsxDEV("span",{className:"ml-2",children:"Carregando dados..."},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:353,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:351,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:350,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:349,columnNumber:13},this),z==="preview"&&!H&&e.jsxDEV(b,{children:e.jsxDEV(g,{className:"pt-6",children:e.jsxDEV("div",{className:"flex items-center justify-center py-8 text-destructive",children:[e.jsxDEV(ue,{className:"h-8 w-8 mr-2"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:364,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-semibold",children:"Acesso Negado"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:366,columnNumber:21},this),e.jsxDEV("div",{className:"text-sm",children:"Apenas administradores podem executar esta operação"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:367,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:365,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:363,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:362,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:361,columnNumber:13},this),z==="preview"&&o&&H&&e.jsxDEV(b,{children:[e.jsxDEV(D,{children:e.jsxDEV(k,{className:"text-base flex items-center gap-2",children:[e.jsxDEV(Pe,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:381,columnNumber:19},this),"Impacto da Operação"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:380,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:379,columnNumber:15},this),e.jsxDEV(g,{className:"space-y-3",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV(B,{children:"Processos Ativos"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:388,columnNumber:21},this),e.jsxDEV("div",{className:"text-lg font-semibold",children:o.active_processos},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:389,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:387,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV(B,{children:"Processos Já Excluídos"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:394,columnNumber:21},this),e.jsxDEV("div",{className:"text-lg font-semibold text-muted-foreground",children:o.soft_deleted_processos},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:395,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:393,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV(B,{children:"Registros de Pessoas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:400,columnNumber:21},this),e.jsxDEV("div",{className:"text-lg font-semibold",children:o.total_pessoas},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:401,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:399,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV(B,{children:"Tempo Estimado"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:406,columnNumber:21},this),e.jsxDEV("div",{className:"text-lg font-semibold",children:[o.estimated_deletion_time_minutes," min"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:407,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:405,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:386,columnNumber:17},this),a==="processos"&&e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV(B,{children:"Tipo de Exclusão"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:415,columnNumber:21},this),e.jsxDEV("div",{className:"flex gap-2 mt-2",children:[e.jsxDEV(w,{variant:y==="soft"?"default":"outline",size:"sm",onClick:()=>V("soft"),children:"Exclusão Reversível (Recomendado)"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:417,columnNumber:23},this),e.jsxDEV(w,{variant:y==="hard"?"destructive":"outline",size:"sm",onClick:()=>V("hard"),children:"Exclusão Permanente"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:426,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:416,columnNumber:21},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-2",children:y==="soft"?"Os dados serão marcados como excluídos mas podem ser restaurados":"Os dados serão permanentemente removidos do banco de dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:436,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:414,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:385,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:378,columnNumber:13},this),z==="confirm"&&e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-destructive mb-2",children:[e.jsxDEV(ue,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:452,columnNumber:19},this),e.jsxDEV("span",{className:"font-semibold",children:"ATENÇÃO: Operação Crítica"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:453,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:451,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-destructive/80",children:["Esta é uma operação irreversível que afetará"," ",o?.active_processos," processos ativos.",y==="hard"&&" A exclusão será PERMANENTE."]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:457,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:450,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(B,{htmlFor:"confirmation",children:["Para confirmar, digite o ID da organização:"," ",e.jsxDEV("code",{children:q},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:468,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:466,columnNumber:19},this),e.jsxDEV(Y,{id:"confirmation",value:d,onChange:$=>f($.target.value),placeholder:"Digite o ID da organização"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:470,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:465,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Ge,{id:"understand",checked:h.understand,onCheckedChange:$=>N(X=>({...X,understand:$}))},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:480,columnNumber:21},this),e.jsxDEV(B,{htmlFor:"understand",className:"text-sm",children:"Eu entendo que esta operação não pode ser desfeita"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:490,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:479,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Ge,{id:"irreversible",checked:h.irreversible,onCheckedChange:$=>N(X=>({...X,irreversible:$}))},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:496,columnNumber:21},this),e.jsxDEV(B,{htmlFor:"irreversible",className:"text-sm",children:"Eu confirmo que tenho autorização para executar esta operação"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:506,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:495,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Ge,{id:"backup",checked:h.backup,onCheckedChange:$=>N(X=>({...X,backup:$}))},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:513,columnNumber:21},this),e.jsxDEV(B,{htmlFor:"backup",className:"text-sm",children:"Eu confirmo que foi feito backup dos dados (se necessário)"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:523,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:512,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:478,columnNumber:17},this),P>0&&e.jsxDEV("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsxDEV(Ae,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:531,columnNumber:21},this),e.jsxDEV("span",{className:"text-sm",children:["Aguarde ",P,"s antes de prosseguir"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:532,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:530,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:464,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:449,columnNumber:13},this),z==="executing"&&e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"mb-2",children:"Executando operação..."},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:545,columnNumber:17},this),e.jsxDEV(cs,{value:E,className:"w-full"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:546,columnNumber:17},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground mt-1",children:[E,"% concluído"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:547,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:544,columnNumber:15},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:543,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:346,columnNumber:9},this),e.jsxDEV(ia,{children:[e.jsxDEV(na,{onClick:He,disabled:j,children:"Cancelar"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:556,columnNumber:11},this),z==="preview"&&H&&o&&e.jsxDEV(ys,{onClick:()=>F("confirm"),className:"bg-destructive hover:bg-destructive/90",children:"Continuar"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:561,columnNumber:13},this),z==="confirm"&&e.jsxDEV(ys,{onClick:a==="processos"?be:pe,disabled:!ee||j,className:"bg-destructive hover:bg-destructive/90",children:P>0?`Aguarde ${P}s`:"Executar Exclusão"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:570,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:555,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:337,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/BulkDeleteManager.tsx",lineNumber:322,columnNumber:5},this)}function Zi({onSuccess:a,className:n}){const{profile:s}=de(),{toast:i}=Qe(),[r,m]=x.useState(!1),l=async()=>{if(!s?.organization_id){i({title:"Erro",description:"Organização não encontrada",variant:"destructive"});return}m(!0);try{const{data:t,error:o}=await M.rpc("rpc_restore_all_processos",{p_org_id:s.organization_id});if(o)throw o;const p=t;if(p.success)i({title:"Restauração concluída",description:`${p.restored_count} processos foram restaurados com sucesso`}),a?.();else throw new Error(p.message)}catch(t){console.error("Error restoring processes:",t),i({title:"Erro na restauração",description:t instanceof Error?t.message:"Erro desconhecido durante a restauração",variant:"destructive"})}finally{m(!1)}};return e.jsxDEV(w,{variant:"outline",size:"sm",onClick:l,disabled:r,className:n,children:[e.jsxDEV(ts,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`},void 0,!1,{fileName:"/workspaces/assitjur/src/components/admin/RestoreButton.tsx",lineNumber:75,columnNumber:7},this),r?"Restaurando...":"Restaurar Excluídos"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/admin/RestoreButton.tsx",lineNumber:68,columnNumber:5},this)}function en(){return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV(b,{children:e.jsxDEV(D,{children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(k,{children:"Gestão de Processos - AssistJur.IA"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/ProcessosTable.tsx",lineNumber:13,columnNumber:15},this),e.jsxDEV("p",{className:"text-muted-foreground text-sm",children:"Visualizar e gerenciar processos do pipeline AssistJur.IA"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/ProcessosTable.tsx",lineNumber:14,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/ProcessosTable.tsx",lineNumber:12,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(Zi,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/ProcessosTable.tsx",lineNumber:19,columnNumber:15},this),e.jsxDEV(sr,{type:"processos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/ProcessosTable.tsx",lineNumber:20,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/ProcessosTable.tsx",lineNumber:18,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/ProcessosTable.tsx",lineNumber:11,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/ProcessosTable.tsx",lineNumber:10,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/ProcessosTable.tsx",lineNumber:9,columnNumber:7},this),e.jsxDEV(Yi,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/ProcessosTable.tsx",lineNumber:26,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/ProcessosTable.tsx",lineNumber:8,columnNumber:5},this)}const In=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"})),ga=[{value:"ERROR",label:"Erro",color:"bg-destructive text-destructive-foreground"},{value:"WARNING",label:"Atenção",color:"bg-warning text-warning-foreground"},{value:"INFO",label:"Info",color:"bg-primary text-primary-foreground"},{value:"OK",label:"OK",color:"bg-success text-success-foreground"}];function sn({searchTerm:a,onSearchChange:n,selectedSeverity:s,onSeverityChange:i,onClearFilters:r,hasActiveFilters:m}){const[l,t]=x.useState(!1),o=d=>{const f=s.includes(d)?s.filter(h=>h!==d):[...s,d];i(f)},p=d=>{i(s.filter(f=>f!==d))};return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:61,columnNumber:9},this),e.jsxDEV(Y,{placeholder:"Buscar por CNJ, reclamante, réu ou testemunha...",value:a,onChange:d=>n(d.target.value),className:"pl-10 pr-4 h-10"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:62,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:60,columnNumber:7},this),e.jsxDEV("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxDEV($r,{open:l,onOpenChange:t,children:[e.jsxDEV(Kr,{asChild:!0,children:e.jsxDEV(w,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsxDEV(Gs,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:75,columnNumber:15},this),"Filtros",m&&e.jsxDEV(C,{variant:"secondary",className:"ml-1 px-1.5 py-0.5 text-xs",children:s.length},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:78,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:74,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:73,columnNumber:11},this),e.jsxDEV(Wr,{className:"w-80 p-4",align:"start",children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h4",{className:"font-semibold text-sm",children:"Filtrar por Severidade"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:89,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:ga.map(d=>e.jsxDEV(w,{variant:s.includes(d.value)?"default":"outline",size:"sm",onClick:()=>o(d.value),className:"justify-start gap-2",children:[e.jsxDEV("div",{className:`w-2 h-2 rounded-full ${d.color}`},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:104,columnNumber:21},this),d.label]},d.value,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:93,columnNumber:19},this))},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:91,columnNumber:15},this),e.jsxDEV("div",{className:"flex justify-between pt-2 border-t",children:[e.jsxDEV(w,{variant:"ghost",size:"sm",className:"gap-2",children:[e.jsxDEV(Aa,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:112,columnNumber:19},this),"Salvar Filtro"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:111,columnNumber:17},this),e.jsxDEV(w,{variant:"ghost",size:"sm",className:"gap-2",children:[e.jsxDEV(zr,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:116,columnNumber:19},this),"Filtros Salvos"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:115,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:110,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:88,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:87,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:72,columnNumber:9},this),s.map(d=>{const f=ga.find(h=>h.value===d);return e.jsxDEV(C,{variant:"secondary",className:"gap-1",children:[e.jsxDEV("div",{className:`w-2 h-2 rounded-full ${f?.color}`},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:129,columnNumber:15},this),f?.label,e.jsxDEV(w,{variant:"ghost",size:"sm",className:"h-auto p-0 ml-1 hover:bg-transparent",onClick:()=>p(d),children:e.jsxDEV(qs,{className:"h-3 w-3"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:137,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:131,columnNumber:15},this)]},d,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:128,columnNumber:13},this)}),m&&e.jsxDEV(w,{variant:"ghost",size:"sm",onClick:r,className:"gap-2 text-muted-foreground",children:[e.jsxDEV(qs,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:150,columnNumber:13},this),"Limpar Filtros"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:144,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:71,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/SearchFilters.tsx",lineNumber:58,columnNumber:5},this)}function an({selectedCount:a,onRevalidate:n,onNormalizeCNJ:s,onFillDefaultReu:i,onMergeDuplicates:r,onDelete:m,onExport:l,isLoading:t=!1,showTestemunhaActions:o=!1}){return a===0?e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-muted/30 border rounded-lg",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxDEV(je,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:41,columnNumber:11},this),"Selecione registros para executar ações em massa"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:40,columnNumber:9},this),e.jsxDEV(w,{variant:"outline",size:"sm",onClick:l,className:"gap-2",children:[e.jsxDEV(ws,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:50,columnNumber:11},this),"Exportar Todos"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:44,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:39,columnNumber:7},this):e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-primary/5 border border-primary/20 rounded-lg",children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:e.jsxDEV(C,{variant:"outline",className:"bg-primary/10 text-primary border-primary/30",children:[a," selecionado",a>1?"s":""]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:61,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:60,columnNumber:9},this),e.jsxDEV(pa,{orientation:"vertical",className:"h-6"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:69,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(w,{variant:"outline",size:"sm",onClick:n,disabled:t,className:"gap-2",children:[e.jsxDEV(ts,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:80,columnNumber:13},this),"Revalidar"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:73,columnNumber:11},this),e.jsxDEV(w,{variant:"outline",size:"sm",onClick:s,disabled:t,className:"gap-2",children:[e.jsxDEV(Or,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:91,columnNumber:13},this),"Normalizar CNJ"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:84,columnNumber:11},this),o&&i&&e.jsxDEV(w,{variant:"outline",size:"sm",onClick:i,disabled:t,className:"gap-2",children:[e.jsxDEV(Sa,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:104,columnNumber:15},this),"Aplicar Réu Padrão"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:97,columnNumber:13},this),e.jsxDEV(pa,{orientation:"vertical",className:"h-6"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:109,columnNumber:11},this),e.jsxDEV(w,{variant:"outline",size:"sm",onClick:r,disabled:t,className:"gap-2",children:[e.jsxDEV(Br,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:119,columnNumber:13},this),"Mesclar Duplicados"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:112,columnNumber:11},this),e.jsxDEV(w,{variant:"outline",size:"sm",onClick:m,disabled:t,className:"gap-2 text-destructive hover:text-destructive",children:[e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:130,columnNumber:13},this),"Excluir"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:123,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:71,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:59,columnNumber:7},this),e.jsxDEV(w,{variant:"outline",size:"sm",onClick:l,className:"gap-2",children:[e.jsxDEV(ws,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:137,columnNumber:9},this),"Exportar Seleção"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:136,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/BulkActions.tsx",lineNumber:58,columnNumber:5},this)}const rn={OK:{icon:Lr,label:"OK",className:"bg-success text-success-foreground hover:bg-success/90"},WARNING:{icon:ue,label:"Atenção",className:"bg-warning text-warning-foreground hover:bg-warning/90"},ERROR:{icon:ne,label:"Erro",className:"bg-destructive text-destructive-foreground hover:bg-destructive/90"},INFO:{icon:gs,label:"Info",className:"bg-primary text-primary-foreground hover:bg-primary/90"}};function nn({severity:a,score:n,className:s="",size:i="default"}){const r=rn[a],m=r.icon,l=i==="sm"?"text-xs px-2 py-0.5":"text-sm px-2.5 py-1";return e.jsxDEV(C,{className:`
        ${r.className} 
        ${l}
        font-semibold 
        shadow-sm 
        flex items-center gap-1.5
        ${s}
      `,children:[e.jsxDEV(m,{className:i==="sm"?"h-3 w-3":"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/QualityChips.tsx",lineNumber:60,columnNumber:7},this),e.jsxDEV("span",{children:r.label},void 0,!1,{fileName:"/workspaces/assitjur/src/components/data-explorer/QualityChips.tsx",lineNumber:61,columnNumber:7},this),n!==void 0&&e.jsxDEV("span",{className:"ml-1 opacity-90",children:["(",n,")"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/QualityChips.tsx",lineNumber:63,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/data-explorer/QualityChips.tsx",lineNumber:50,columnNumber:5},this)}function tn(){const{profile:a}=de(),{toast:n}=Qe(),[s,i]=x.useState(""),[r,m]=x.useState([]),[l,t]=x.useState(new Set),[o,p]=x.useState(1),[d]=x.useState(50),[f,h]=x.useState(!1),{data:N,isLoading:j,error:c,refetch:v}=Re({queryKey:["admin-testemunhas",a?.organization_id,s,o,d],queryFn:async()=>{if(!a?.organization_id)throw new Error("Organização não encontrada");const{data:T}=await M.auth.getSession(),ee=T?.session?.access_token;if(!ee)throw new Error("Usuário não autenticado");const{data:H,error:W}=await M.functions.invoke("mapa-testemunhas-testemunhas",{body:{paginacao:{page:o,limit:d},filtros:{search:s.trim()||void 0}},headers:{"Content-Type":"application/json",Authorization:`Bearer ${ee}`}});if(W)throw W;return H},enabled:!!a?.organization_id,staleTime:300*1e3}),u=N?.data||[],E=N?.total_witnesses||0,R=N?.total_processos||0,z=async()=>{if(l.size!==0)try{n({title:"Funcionalidade em desenvolvimento",description:"Aplicar réu padrão será implementado em breve"})}catch(T){n({title:"Erro ao aplicar réu padrão",description:T instanceof Error?T.message:"Erro desconhecido",variant:"destructive"})}},F=T=>{const ee=new Set(l);ee.has(T)?ee.delete(T):ee.add(T),t(ee)},y=()=>{l.size===u?.length?t(new Set):t(new Set(u?.map(T=>T.nome_testemunha)))},V=s.trim()!=="",P=()=>{i(""),m([]),p(1)},O=({value:T})=>T===null?e.jsxDEV("span",{className:"text-muted-foreground",children:"—"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:138,columnNumber:32},this):T?e.jsxDEV(Z,{className:"h-4 w-4 text-success"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:140,columnNumber:7},this):e.jsxDEV(Xs,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:142,columnNumber:7},this),q=T=>{switch(T?.toLowerCase()){case"crítico":return"destructive";case"atenção":return"secondary";case"observação":return"outline";default:return"secondary"}},G=T=>{switch(T?.toLowerCase()){case"crítico":return"ERROR";case"atenção":return"WARNING";case"observação":return"INFO";default:return"OK"}};return c?e.jsxDEV("div",{className:"p-6 text-center",children:[e.jsxDEV("p",{className:"text-destructive",children:["Erro ao carregar dados: ",c.message]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:175,columnNumber:9},this),e.jsxDEV(w,{variant:"outline",onClick:()=>v(),children:"Tentar novamente"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:178,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:174,columnNumber:7},this):e.jsxDEV("div",{className:"p-6 space-y-6",children:[e.jsxDEV(b,{className:"p-6",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Gestão de Testemunhas"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:190,columnNumber:13},this),e.jsxDEV("p",{className:"text-muted-foreground",children:[E," testemunhas encontradas em ",R," ","processos da organização"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:191,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:189,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(sr,{type:"testemunhas",onSuccess:()=>v()},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:197,columnNumber:13},this),e.jsxDEV(w,{variant:"outline",onClick:()=>h(!f),children:f?"Mostrar Dados":"Mascarar PII"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:198,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:196,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:188,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:187,columnNumber:7},this),e.jsxDEV(sn,{searchTerm:s,onSearchChange:i,selectedSeverity:r,onSeverityChange:m,onClearFilters:P,hasActiveFilters:V},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:208,columnNumber:7},this),e.jsxDEV(an,{selectedCount:l.size,onRevalidate:()=>v(),onNormalizeCNJ:()=>{},onFillDefaultReu:z,onMergeDuplicates:()=>{},onDelete:()=>{},onExport:()=>{},isLoading:j,showTestemunhaActions:!0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:217,columnNumber:7},this),e.jsxDEV("div",{className:"border border-border/50 rounded-2xl overflow-hidden",children:e.jsxDEV(De,{children:[e.jsxDEV(ke,{children:e.jsxDEV(J,{className:"bg-muted/30",children:[e.jsxDEV(_,{className:"w-12",children:e.jsxDEV(Ge,{checked:u?.length>0&&l.size===u.length,onCheckedChange:y},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:234,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:233,columnNumber:15},this),e.jsxDEV(_,{className:"font-semibold",children:"Nome da Testemunha"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:242,columnNumber:15},this),e.jsxDEV(_,{className:"font-semibold text-center",children:"Qtd Depoimentos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:245,columnNumber:15},this),e.jsxDEV(_,{className:"font-semibold text-center",children:"Ambos os Polos"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:248,columnNumber:15},this),e.jsxDEV(_,{className:"font-semibold text-center",children:"Já Foi Reclamante"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:251,columnNumber:15},this),e.jsxDEV(_,{className:"font-semibold",children:"CNJs como Testemunha"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:254,columnNumber:15},this),e.jsxDEV(_,{className:"font-semibold",children:"Classificação"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:257,columnNumber:15},this),e.jsxDEV(_,{className:"font-semibold",children:"Qualidade"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:258,columnNumber:15},this),e.jsxDEV(_,{className:"font-semibold text-center",children:"Ações"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:259,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:232,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:231,columnNumber:11},this),e.jsxDEV(he,{children:j?Array.from({length:5}).map((T,ee)=>e.jsxDEV(J,{children:e.jsxDEV(S,{colSpan:9,className:"h-16",children:e.jsxDEV("div",{className:"animate-pulse bg-muted rounded h-4 w-full"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:267,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:266,columnNumber:19},this)},ee,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:265,columnNumber:17},this)):u?.length===0?e.jsxDEV(J,{children:e.jsxDEV(S,{colSpan:9,className:"text-center py-8",children:[e.jsxDEV("p",{className:"text-muted-foreground",children:"Nenhuma testemunha encontrada"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:274,columnNumber:19},this),V&&e.jsxDEV(w,{variant:"link",onClick:P,children:"Limpar filtros"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:278,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:273,columnNumber:17},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:272,columnNumber:15},this):u?.map(T=>e.jsxDEV(J,{className:"hover:bg-muted/20",children:[e.jsxDEV(S,{children:e.jsxDEV(Ge,{checked:l.has(T.nome_testemunha),onCheckedChange:()=>F(T.nome_testemunha)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:291,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:290,columnNumber:19},this),e.jsxDEV(S,{className:"font-medium max-w-[200px] truncate",children:hs(T.nome_testemunha,f)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:298,columnNumber:19},this),e.jsxDEV(S,{className:"text-center",children:e.jsxDEV(C,{variant:"secondary",className:"text-xs",children:T.qtd_depoimentos||0},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:302,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:301,columnNumber:19},this),e.jsxDEV(S,{className:"text-center",children:e.jsxDEV(O,{value:T.foi_testemunha_em_ambos_polos},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:307,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:306,columnNumber:19},this),e.jsxDEV(S,{className:"text-center",children:e.jsxDEV(O,{value:T.ja_foi_reclamante},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:312,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:311,columnNumber:19},this),e.jsxDEV(S,{children:e.jsxDEV(Ks,{items:T.cnjs_como_testemunha??null,maxVisible:2,isPiiMasked:f},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:315,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:314,columnNumber:19},this),e.jsxDEV(S,{children:e.jsxDEV(C,{variant:q(T.classificacao_estrategica??null),className:"text-xs",children:T.classificacao_estrategica||"Normal"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:322,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:321,columnNumber:19},this),e.jsxDEV(S,{children:e.jsxDEV(nn,{severity:G(T.classificacao_estrategica??null),score:T.qtd_depoimentos?Math.min(100,T.qtd_depoimentos*20):50,size:"sm"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:332,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:331,columnNumber:19},this),e.jsxDEV(S,{children:e.jsxDEV("div",{className:"flex items-center justify-center gap-1",children:[e.jsxDEV(w,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsxDEV(fe,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:347,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:346,columnNumber:23},this),e.jsxDEV(w,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsxDEV(_a,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:350,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:349,columnNumber:23},this),e.jsxDEV(w,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:e.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:357,columnNumber:25},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:352,columnNumber:23},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:345,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:344,columnNumber:19},this)]},T.nome_testemunha,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:286,columnNumber:17},this))},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:262,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:230,columnNumber:9},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:229,columnNumber:7},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:["Mostrando ",u?.length||0," de ",E," ","testemunhas"]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:370,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(w,{variant:"outline",size:"sm",onClick:()=>p(Math.max(1,o-1)),disabled:o<=1,children:"Anterior"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:375,columnNumber:11},this),e.jsxDEV("span",{className:"text-sm",children:["Página ",o," de ",Math.ceil(E/d)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:383,columnNumber:11},this),e.jsxDEV(w,{variant:"outline",size:"sm",onClick:()=>p(o+1),disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:386,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:374,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:369,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/admin/base/TestemunhasTable.tsx",lineNumber:186,columnNumber:5},this)}const Rn=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"}));export{bn as A,Mn as B,wn as C,fn as D,_n as F,jn as I,En as K,Dn as M,vn as O,Cn as P,gn as S,Rn as T,hn as V,kn as a,Vn as b,yn as c,Sn as d,Pn as e,An as f,Tn as g,In as h,xn as i};
