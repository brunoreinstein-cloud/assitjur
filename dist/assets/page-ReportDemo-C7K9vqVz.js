import{N as de,O as Ct,P as Mt,k as v,B as _,m as Dt,D as Me,e as kt,a as P,b as O,c as A,C as T,d as I,s as Pt,x as X}from"./page-About-BlYnpLxn.js";import{r as h,j as e,c4 as Ot,S as se,bI as le,U as Q,h as Ne,c5 as At,F as oe,bs as Tt,c6 as It,bW as Rt,c7 as Et,bM as z,c as K,c8 as zt,c9 as Lt,u as Ve,ca as Wt,bO as He,cb as pe,by as $e,cc as Ft,bY as Yt,cd as Oe,ce as Bt,bi as Ge,al as Xe,x as qt,af as U,bm as Vt,v as Qe,a7 as Ue,L as Ht,cf as xe,C as $t,bu as V,bG as Gt,cg as Xt,aA as Qt,ch as Ut,ci as Je,cj as Jt,bw as Kt,i as Ke,B as Ze,O as Zt,e as re,k as _e,aa as ea,Z as Ae,d as ta,D as Te,ck as aa,cl as sa}from"./vendor-BIe5zH3B.js";import{I as F,u as De,d as na,L as M,C as ge}from"./page-Login-CfUEEn7u.js";import{T as ra}from"./page-PortalTitular-Dsis4zrC.js";import{T as he,q as ia,r as oa,s as L,t as Z,u as ee,v as te,C as ca,w as da,x as la,y as ma,z as ua,B as ha,E as et,F as tt,G as at,H as J,I as Se,J as st,K as fa,L as pa,M as xa,N as ga,O as ba,P as va,Q as ja,R as wa,U as ya,V as Na,e as be,S as _a,a as Sa,b as Ca,c as Ma,d as ve}from"./page-MapaPage-DKxXJ27T.js";import{S as Ie,A as Da,a as ka}from"./page-Profile-Q-iZ0qzZ.js";import{P as Pa,a as Oa,b as Aa}from"./page-DemoMapaTestemunhas-Dib0UK8t.js";const Ta={type:"tween",duration:.2,ease:"easeInOut"};function ke(t){if(typeof window>"u")return!1;const a=de();switch(t){case"essential":return!0;case"analytics":return a.measure===!0;case"marketing":return a.marketing===!0;default:return!1}}function Ia(t){if(!ke("analytics")){t?.opt_out_capturing?.();return}t?.opt_in_capturing?.()}function Ra(t,a){if(!ke("analytics")||typeof window>"u")return;const s=a?Object.fromEntries(Object.entries(a).filter(([n])=>!["email","name","phone","cpf","cnpj"].includes(n.toLowerCase()))):{};fetch("/api/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:t,data:s,timestamp:new Date().toISOString()})}).catch(()=>{})}function Ea(){typeof window>"u"||Ct(t=>{const a=window.posthog;a&&(t.measure?a.opt_in_capturing():a.opt_out_capturing());const s=window.gtag;s&&s("consent","update",{analytics_storage:t.measure?"granted":"denied",ad_storage:t.marketing?"granted":"denied",ad_user_data:t.marketing?"granted":"denied",ad_personalization:t.marketing?"granted":"denied"});const n=window.fbq;n&&(t.marketing?n("consent","grant"):n("consent","revoke"));const r=window.hj;r&&(t.measure?r("stateChange","consent_granted"):r("stateChange","consent_revoked"));const i=window.Intercom;i&&(t.measure?i("show"):i("hide"))})}function kr(){if(typeof window>"u")return;Ea();const t=de(),a=window.posthog;a&&Ia(a),t.measure&&Ra("page_view",{url:window.location.href,referrer:document.referrer})}function nt(t){typeof window>"u"||(La(t),ke("analytics")&&Fa(t),Ya(t))}function za(){nt({event:"consent_banner_shown",category:"essential",timestamp:new Date().toISOString(),userAgent:navigator.userAgent,sessionId:rt()})}function Re(t,a,s){nt({event:s?"consent_granted":"consent_revoked",category:t,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,sessionId:rt(),previousConsent:a,newConsent:s})}function La(t){try{const a=Wa();a.push(t),a.length>100&&a.splice(0,a.length-100),localStorage.setItem("assistjur_consent_events",JSON.stringify(a))}catch{}}function Wa(){try{const t=localStorage.getItem("assistjur_consent_events");return t?JSON.parse(t):[]}catch{return[]}}function Fa(t){window.gtag&&window.gtag("event","consent_event",{event_type:t.event,category:t.category,timestamp:t.timestamp}),fetch("/api/consent-events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch(()=>{})}function Ya(t){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"consent_analytics",consent_event:t})}function rt(){try{let t=sessionStorage.getItem("assistjur_session_id");return t||(t=Math.random().toString(36).substring(2,15),sessionStorage.setItem("assistjur_session_id",t)),t}catch{return"unknown"}}var Ba={};const it=h.createContext(void 0);function Pr({children:t}){const a=typeof window>"u",[s,n]=h.useState(null),[r,i]=h.useState(!1);h.useEffect(()=>{if(!a)try{const o=de();o.measure!==void 0||o.marketing!==void 0?n({analytics:o.measure??!1,ads:o.marketing??!1}):(i(!0),za())}catch(o){console.error("Error loading consent preferences:",o),n({analytics:!1,ads:!1})}},[a]);const c=o=>{if(!a)try{const d=de();d.measure!==o.analytics&&Re("analytics",d.measure??!1,o.analytics),d.marketing!==o.ads&&Re("marketing",d.marketing??!1,o.ads),Mt({measure:o.analytics,marketing:o.ads}),n(o)}catch(d){console.error("Error saving consent preferences:",d),n(o)}};return h.createElement(it.Provider,{value:{preferences:s,open:r,setOpen:i,save:c}},t)}const je={preferences:null,open:!1,setOpen:()=>{},save:()=>{}};function qa(){const t=h.useContext(it);return typeof window>"u"||typeof process<"u"&&Ba?.PRERENDER==="1"||!t?je:t}const Va=h.createContext(void 0),Ha=()=>{const t=h.useContext(Va);if(!t)throw new Error("useMultiTenant must be used within MultiTenantProvider");return t},$=typeof window<"u";function Ee(){return $?document:null}function ze(){return $?localStorage:null}const we=768;function $a(){const[t,a]=h.useState(void 0);return h.useEffect(()=>{if(!$)return;const s=window.matchMedia(`(max-width: ${we-1}px)`),n=()=>{a(window.innerWidth<we)};return s.addEventListener("change",n),a(window.innerWidth<we),()=>s.removeEventListener("change",n)},[]),!!t}const Ga="sidebar:state",Xa=3600*24*7,Qa="16rem",Ua="18rem",Ja="3rem",Ka="b",ot=h.createContext(null);function G(){const t=h.useContext(ot);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const ct=h.forwardRef(({defaultOpen:t=!0,open:a,onOpenChange:s,className:n,style:r,children:i,...c},o)=>{const d=$a(),[p,u]=h.useState(!1),[l,f]=h.useState(t),w=a??l,y=h.useCallback(C=>{const S=typeof C=="function"?C(w):C;s?s(S):f(S),document.cookie=`${Ga}=${S}; path=/; max-age=${Xa}`},[s,w]),j=h.useCallback(()=>d?u(C=>!C):y(C=>!C),[d,y,u]);h.useEffect(()=>{const C=S=>{S.key===Ka&&(S.metaKey||S.ctrlKey)&&(S.preventDefault(),j())};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[j]);const B=w?"expanded":"collapsed",N=h.useMemo(()=>({state:B,open:w,setOpen:y,isMobile:d,openMobile:p,setOpenMobile:u,toggleSidebar:j}),[B,w,y,d,p,u,j]);return e.jsx(ot.Provider,{value:N,children:e.jsx(he,{delayDuration:0,children:e.jsx("div",{style:{"--sidebar-width":Qa,"--sidebar-width-icon":Ja,...r},className:v("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",n),ref:o,...c,children:i})})})});ct.displayName="SidebarProvider";const dt=h.forwardRef(({side:t="left",variant:a="sidebar",collapsible:s="offcanvas",className:n,children:r,...i},c)=>{const{isMobile:o,state:d,openMobile:p,setOpenMobile:u}=G();return s==="none"?e.jsx("div",{className:v("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:c,...i,children:r}):o?e.jsx(ia,{open:p,onOpenChange:u,...i,children:e.jsx(oa,{id:"menu","data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":Ua},side:t,children:e.jsx("div",{className:"flex h-full w-full flex-col",children:r})})}):e.jsxs("div",{ref:c,className:"group peer hidden md:block text-sidebar-foreground","data-state":d,"data-collapsible":d==="collapsed"?s:"","data-variant":a,"data-side":t,children:[e.jsx("div",{className:v("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",a==="floating"||a==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),e.jsx("div",{className:v("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",a==="floating"||a==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...i,children:e.jsx("div",{id:"menu","data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:r})})]})});dt.displayName="Sidebar";const lt=h.forwardRef(({className:t,onClick:a,...s},n)=>{const{toggleSidebar:r}=G();return e.jsxs(_,{ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:v("h-7 w-7",t),onClick:i=>{a?.(i),r()},...s,children:[e.jsx(Ot,{"aria-hidden":"true",focusable:"false"}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});lt.displayName="SidebarTrigger";const Za=h.forwardRef(({className:t,...a},s)=>{const{toggleSidebar:n}=G();return e.jsx("button",{ref:s,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:v("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...a})});Za.displayName="SidebarRail";const es=h.forwardRef(({className:t,...a},s)=>e.jsx("main",{ref:s,className:v("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...a}));es.displayName="SidebarInset";const ts=h.forwardRef(({className:t,...a},s)=>e.jsx(F,{ref:s,"data-sidebar":"input",className:v("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...a}));ts.displayName="SidebarInput";const mt=h.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,"data-sidebar":"header",className:v("flex flex-col gap-2 p-2",t),...a}));mt.displayName="SidebarHeader";const ut=h.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,"data-sidebar":"footer",className:v("flex flex-col gap-2 p-2",t),...a}));ut.displayName="SidebarFooter";const as=h.forwardRef(({className:t,...a},s)=>e.jsx(L,{ref:s,"data-sidebar":"separator",className:v("mx-2 w-auto bg-sidebar-border",t),...a}));as.displayName="SidebarSeparator";const ht=h.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,"data-sidebar":"content",className:v("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...a}));ht.displayName="SidebarContent";const ft=h.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,"data-sidebar":"group",className:v("relative flex w-full min-w-0 flex-col p-2",t),...a}));ft.displayName="SidebarGroup";const pt=h.forwardRef(({className:t,asChild:a=!1,...s},n)=>{const r=a?se:"div";return e.jsx(r,{ref:n,"data-sidebar":"group-label",className:v("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...s})});pt.displayName="SidebarGroupLabel";const ss=h.forwardRef(({className:t,asChild:a=!1,...s},n)=>{const r=a?se:"button";return e.jsx(r,{ref:n,"data-sidebar":"group-action",className:v("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...s})});ss.displayName="SidebarGroupAction";const xt=h.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,"data-sidebar":"group-content",className:v("w-full text-sm",t),...a}));xt.displayName="SidebarGroupContent";const gt=h.forwardRef(({className:t,...a},s)=>e.jsx("ul",{ref:s,"data-sidebar":"menu",className:v("flex w-full min-w-0 flex-col gap-1",t),...a}));gt.displayName="SidebarMenu";const Ce=h.forwardRef(({className:t,...a},s)=>e.jsx("li",{ref:s,"data-sidebar":"menu-item",className:v("group/menu-item relative",t),...a}));Ce.displayName="SidebarMenuItem";const ns=Dt("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),rs=h.forwardRef(({asChild:t=!1,isActive:a=!1,variant:s="default",size:n="default",tooltip:r,className:i,...c},o)=>{const d=t?se:"button",{isMobile:p,state:u}=G(),l=e.jsx(d,{ref:o,"data-sidebar":"menu-button","data-size":n,"data-active":a,className:v(ns({variant:s,size:n}),i),...c});return r?(typeof r=="string"&&(r={children:r}),e.jsxs(Z,{children:[e.jsx(ee,{asChild:!0,children:l}),e.jsx(te,{side:"right",align:"center",hidden:u!=="collapsed"||p,...r})]})):l});rs.displayName="SidebarMenuButton";const is=h.forwardRef(({className:t,asChild:a=!1,showOnHover:s=!1,...n},r)=>{const i=a?se:"button";return e.jsx(i,{ref:r,"data-sidebar":"menu-action",className:v("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...n})});is.displayName="SidebarMenuAction";const os=h.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,"data-sidebar":"menu-badge",className:v("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...a}));os.displayName="SidebarMenuBadge";const cs=h.forwardRef(({className:t,showIcon:a=!1,...s},n)=>{const r=h.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return e.jsxs("div",{ref:n,"data-sidebar":"menu-skeleton",className:v("rounded-md h-8 flex gap-2 px-2 items-center",t),...s,children:[a&&e.jsx(Ie,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),e.jsx(Ie,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":r}})]})});cs.displayName="SidebarMenuSkeleton";const ds=h.forwardRef(({className:t,...a},s)=>e.jsx("ul",{ref:s,"data-sidebar":"menu-sub",className:v("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...a}));ds.displayName="SidebarMenuSub";const ls=h.forwardRef(({...t},a)=>e.jsx("li",{ref:a,...t}));ls.displayName="SidebarMenuSubItem";const ms=h.forwardRef(({asChild:t=!1,size:a="md",isActive:s,className:n,...r},i)=>{const c=t?se:"a";return e.jsx(c,{ref:i,"data-sidebar":"menu-sub-button","data-size":a,"data-active":s,className:v("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",a==="sm"&&"text-xs",a==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n),...r})});ms.displayName="SidebarMenuSubButton";function bt(){const{user:t,hasRole:a,isAdmin:s,isSuperAdmin:n}=De(),r=o=>!o.permission||n||s?!0:{canViewAnalytics:a("ADMIN")||a("ANALYST"),canManageData:a("ADMIN")||a("ANALYST"),canImportData:a("ADMIN")||a("ANALYST"),canViewVersions:a("ADMIN")||a("ANALYST"),canManageOrg:a("ADMIN"),canManagePermissions:a("ADMIN"),canViewLogs:a("ADMIN"),canManageSettings:a("ADMIN")}[o.permission]||!1;return{canAccess:r,getPermissionTooltip:o=>r(o)?o.description||o.label:"Sem permissão para acessar esta funcionalidade",hasAnyPermissionInGroup:o=>o.some(d=>r(d)),user:t,isAdmin:s,isSuperAdmin:n,userRole:t?.user_metadata?.role||"VIEWER"}}const Pe=[{title:"Operação",items:[{label:"Início",to:"/app/dashboard",icon:le,description:"Visão geral"},{label:"Mapa de Testemunhas",to:"/app/mapa-testemunhas",icon:Q,description:"Análise de vínculos e padrões com assistente integrado"}]},{title:"Análises",items:[{label:"Painel",to:"/app/admin",icon:Ne,description:"Dashboard executivo",permission:"canViewAnalytics"},{label:"Relatórios",to:"/app/admin/analytics",icon:At,description:"Análises detalhadas",permission:"canViewAnalytics"}]},{title:"Dados",items:[{label:"Base de Dados",to:"/app/admin/base",icon:oe,description:"Gestão de dados centralizados",permission:"canManageData"},{label:"Importação",to:"/app/admin/base-import",icon:Tt,description:"Upload e validação de planilhas",permission:"canImportData"},{label:"Versões",to:"/app/admin/versoes",icon:It,description:"Histórico e rollback",permission:"canViewVersions",badge:"2"}]},{title:"Administração",items:[{label:"Organização",to:"/app/admin/organization",icon:Rt,description:"Configurações organizacionais",permission:"canManageOrg"},{label:"Logs",to:"/app/admin/logs",icon:Et,description:"Auditoria e monitoramento",permission:"canViewLogs",badge:3},{label:"Configurações",to:"/app/settings",icon:z,description:"Configurações da organização",permission:"canManageSettings"}]}];Pe.flatMap(t=>t.items);function us(){const[t,a]=K.useState("light");K.useEffect(()=>{if(!$)return;const n=ze(),r=Ee(),i=n?.getItem("theme"),c=typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",o=i||c;a(o),r&&r.documentElement.classList.toggle("dark",o==="dark")},[]);const s=()=>{const n=t==="light"?"dark":"light";if(a(n),$){const r=ze(),i=Ee();r&&r.setItem("theme",n),i&&i.documentElement.classList.toggle("dark",n==="dark")}};return e.jsx(he,{children:e.jsxs(Z,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"ghost",size:"sm",onClick:s,className:"h-8 w-8 p-0 hover:bg-sidebar-accent","aria-label":`Alternar para tema ${t==="light"?"escuro":"claro"}`,children:t==="light"?e.jsx(zt,{className:"h-4 w-4"}):e.jsx(Lt,{className:"h-4 w-4"})})}),e.jsx(te,{side:"top",children:e.jsxs("p",{children:["Alternar tema (",t==="light"?"escuro":"claro",")"]})})]})})}function hs(){const[t,a]=K.useState(!1),s=Ve(),{canAccess:n}=bt();K.useEffect(()=>{const i=c=>{c.key==="k"&&(c.metaKey||c.ctrlKey)&&(c.preventDefault(),a(o=>!o))};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[]);const r=i=>{a(!1),s(i)};return e.jsxs(e.Fragment,{children:[e.jsx(he,{children:e.jsxs(Z,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>a(!0),className:"h-8 w-8 p-0 hover:bg-sidebar-accent","aria-label":"Abrir pesquisa (Cmd+K)",children:e.jsx(Wt,{className:"h-4 w-4"})})}),e.jsx(te,{side:"top",children:e.jsx("p",{children:"Pesquisar (⌘K)"})})]})}),e.jsxs(ca,{open:t,onOpenChange:a,children:[e.jsx(da,{placeholder:"Pesquisar páginas..."}),e.jsxs(la,{children:[e.jsx(ma,{children:"Nenhum resultado encontrado."}),Pe.map(i=>{const c=i.items.filter(n);return c.length===0?null:e.jsx(ua,{heading:i.title,children:c.map(o=>e.jsxs(ha,{onSelect:()=>r(o.to),className:"flex items-center gap-3 cursor-pointer",children:[e.jsx(o.icon,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:o.label}),o.description&&e.jsx("div",{className:"text-xs text-muted-foreground",children:o.description})]}),o.badge&&e.jsx("div",{className:"ml-auto",children:e.jsx("div",{className:"bg-primary text-primary-foreground text-xs px-1.5 py-0.5 rounded-full",children:o.badge})})]},o.to))},i.title)})]})]})]})}function fs(){const{open:t}=G(),a=He(),{setOpen:s}=qa(),n=()=>{typeof s=="function"&&s(!0)},{user:r,signOut:i,isAdmin:c}=De(),{canAccess:o,getPermissionTooltip:d,userRole:p}=bt(),{toast:u}=Me(),l=async()=>{try{await i(),u({title:"Logout realizado com sucesso",description:"Você foi desconectado da aplicação."})}catch{u({title:"Erro ao fazer logout",description:"Ocorreu um erro. Tente novamente.",variant:"destructive"})}},f=j=>{switch(j){case"ADMIN":return"destructive";case"ANALYST":return"default";case"VIEWER":return"secondary";default:return"secondary"}},w=j=>{switch(j){case"ADMIN":return"Admin";case"ANALYST":return"Analyst";case"VIEWER":return"Viewer";default:return"Usuário"}},y=j=>j==="/"?a.pathname==="/":a.pathname.startsWith(j);return e.jsx(he,{children:e.jsxs(dt,{variant:"sidebar",className:`bg-sidebar border-sidebar-border transition-all duration-300 ${t?"w-60":"w-[72px]"}`,children:[e.jsx(mt,{className:"border-b border-sidebar-border p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(kt,{variation:"mark",size:"md",className:"flex-shrink-0"}),t&&e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-lg font-semibold text-sidebar-foreground truncate",children:"AssistJur.IA"}),e.jsx("p",{className:"text-xs text-sidebar-foreground/60",children:"Legal Intelligence"})]})]})}),e.jsx(ht,{className:"p-2 space-y-2",children:Pe.map(j=>j.items.filter(o).length===0?null:e.jsxs(ft,{children:[e.jsx(pt,{className:"text-[11px] uppercase tracking-wider text-muted-foreground/80 px-3 pt-4 pb-1",children:t&&j.title}),e.jsx(xt,{children:e.jsx(gt,{children:j.items.map(N=>{const C=o(N),S=y(N.to);if(!C)return e.jsx(Ce,{children:e.jsxs(Z,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 text-sm text-muted-foreground/50 cursor-not-allowed rounded-md",children:[e.jsx(N.icon,{className:"h-4 w-4"}),t&&e.jsx("span",{children:N.label})]})}),e.jsx(te,{side:"right",children:e.jsx("p",{children:d(N)})})]})},N.to);const m=e.jsxs(pe,{to:N.to,className:`flex items-center gap-3 px-3 py-2 rounded-md text-sm transition-colors group ${S?"bg-primary/10 text-foreground border-l-2 border-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,"aria-current":S?"page":void 0,children:[e.jsx(N.icon,{className:"h-4 w-4 flex-shrink-0"}),t&&e.jsxs("div",{className:"flex items-center justify-between w-full min-w-0",children:[e.jsx("span",{className:"truncate",children:N.label}),N.badge&&e.jsx(P,{variant:"secondary",className:"ml-2 text-xs h-5 px-1.5 bg-primary/20 text-primary border-0",children:N.badge})]})]});return e.jsx(Ce,{children:t?m:e.jsxs(Z,{children:[e.jsx(ee,{asChild:!0,children:m}),e.jsx(te,{side:"right",children:e.jsx("p",{children:d(N)})})]})},N.to)})})})]},j.title))}),e.jsxs(ut,{className:"border-t border-sidebar-border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(us,{}),e.jsx(hs,{})]}),e.jsx("button",{onClick:n,className:"text-xs underline text-sidebar-foreground",children:"Privacidade / Gerenciar cookies"}),e.jsxs(et,{children:[e.jsxs(tt,{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-sidebar-accent text-left w-full transition-colors",children:[e.jsx(Da,{className:"h-8 w-8 flex-shrink-0",children:e.jsx(ka,{className:"bg-primary text-primary-foreground text-xs",children:r?.email?.charAt(0).toUpperCase()||"U"})}),t&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-sidebar-foreground truncate",children:r?.email}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx(P,{variant:f(p),className:"text-xs",children:w(p)})})]})]}),e.jsxs(at,{align:"end",className:"w-56",children:[e.jsx(J,{asChild:!0,className:"cursor-pointer",children:e.jsxs(pe,{to:"/app/profile",className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx("span",{children:"Meu Perfil"})]})}),c&&e.jsx(J,{asChild:!0,className:"cursor-pointer",children:e.jsxs(pe,{to:"/app/settings",className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"h-4 w-4"}),e.jsx("span",{children:"Configurações da Organização"})]})}),e.jsx(Se,{}),e.jsxs(J,{onClick:l,className:"flex items-center gap-2 text-destructive focus:text-destructive cursor-pointer",children:[e.jsx(Yt,{className:"h-4 w-4"}),e.jsx("span",{children:"Sair"})]})]})]})]})]})})}function b(t){const a=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&a==="[object Date]"?new t.constructor(+t):typeof t=="number"||a==="[object Number]"||typeof t=="string"||a==="[object String]"?new Date(t):new Date(NaN)}function W(t,a){return t instanceof Date?new t.constructor(a):new Date(a)}const vt=6048e5,ps=864e5,ie=43200,Le=1440;let xs={};function ne(){return xs}function ae(t,a){const s=ne(),n=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,r=b(t),i=r.getDay(),c=(i<n?7:0)+i-n;return r.setDate(r.getDate()-c),r.setHours(0,0,0,0),r}function me(t){return ae(t,{weekStartsOn:1})}function jt(t){const a=b(t),s=a.getFullYear(),n=W(t,0);n.setFullYear(s+1,0,4),n.setHours(0,0,0,0);const r=me(n),i=W(t,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);const c=me(i);return a.getTime()>=r.getTime()?s+1:a.getTime()>=c.getTime()?s:s-1}function We(t){const a=b(t);return a.setHours(0,0,0,0),a}function ue(t){const a=b(t),s=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return s.setUTCFullYear(a.getFullYear()),+t-+s}function gs(t,a){const s=We(t),n=We(a),r=+s-ue(s),i=+n-ue(n);return Math.round((r-i)/ps)}function bs(t){const a=jt(t),s=W(t,0);return s.setFullYear(a,0,4),s.setHours(0,0,0,0),me(s)}function ce(t,a){const s=b(t),n=b(a),r=s.getTime()-n.getTime();return r<0?-1:r>0?1:r}function vs(t){return W(t,Date.now())}function js(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ws(t){if(!js(t)&&typeof t!="number")return!1;const a=b(t);return!isNaN(Number(a))}function ys(t,a){const s=b(t),n=b(a),r=s.getFullYear()-n.getFullYear(),i=s.getMonth()-n.getMonth();return r*12+i}function Ns(t){return a=>{const n=(t?Math[t]:Math.trunc)(a);return n===0?0:n}}function _s(t,a){return+b(t)-+b(a)}function Ss(t){const a=b(t);return a.setHours(23,59,59,999),a}function Cs(t){const a=b(t),s=a.getMonth();return a.setFullYear(a.getFullYear(),s+1,0),a.setHours(23,59,59,999),a}function Ms(t){const a=b(t);return+Ss(a)==+Cs(a)}function Ds(t,a){const s=b(t),n=b(a),r=ce(s,n),i=Math.abs(ys(s,n));let c;if(i<1)c=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-r*i);let o=ce(s,n)===-r;Ms(b(t))&&i===1&&ce(t,n)===1&&(o=!1),c=r*(i-Number(o))}return c===0?0:c}function ks(t,a,s){const n=_s(t,a)/1e3;return Ns(s?.roundingMethod)(n)}function Ps(t){const a=b(t),s=W(t,0);return s.setFullYear(a.getFullYear(),0,1),s.setHours(0,0,0,0),s}const Os={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},As=(t,a,s)=>{let n;const r=Os[t];return typeof r=="string"?n=r:a===1?n=r.one:n=r.other.replace("{{count}}",a.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+n:n+" ago":n};function H(t){return(a={})=>{const s=a.width?String(a.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const Ts={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Is={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rs={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Es={date:H({formats:Ts,defaultWidth:"full"}),time:H({formats:Is,defaultWidth:"full"}),dateTime:H({formats:Rs,defaultWidth:"full"})},zs={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ls=(t,a,s,n)=>zs[t];function D(t){return(a,s)=>{const n=s?.context?String(s.context):"standalone";let r;if(n==="formatting"&&t.formattingValues){const c=t.defaultFormattingWidth||t.defaultWidth,o=s?.width?String(s.width):c;r=t.formattingValues[o]||t.formattingValues[c]}else{const c=t.defaultWidth,o=s?.width?String(s.width):t.defaultWidth;r=t.values[o]||t.values[c]}const i=t.argumentCallback?t.argumentCallback(a):a;return r[i]}}const Ws={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fs={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ys={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Bs={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qs={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Vs={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Hs=(t,a)=>{const s=Number(t),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},$s={ordinalNumber:Hs,era:D({values:Ws,defaultWidth:"wide"}),quarter:D({values:Fs,defaultWidth:"wide",argumentCallback:t=>t-1}),month:D({values:Ys,defaultWidth:"wide"}),day:D({values:Bs,defaultWidth:"wide"}),dayPeriod:D({values:qs,defaultWidth:"wide",formattingValues:Vs,defaultFormattingWidth:"wide"})};function k(t){return(a,s={})=>{const n=s.width,r=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=a.match(r);if(!i)return null;const c=i[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(o)?Xs(o,l=>l.test(c)):Gs(o,l=>l.test(c));let p;p=t.valueCallback?t.valueCallback(d):d,p=s.valueCallback?s.valueCallback(p):p;const u=a.slice(c.length);return{value:p,rest:u}}}function Gs(t,a){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&a(t[s]))return s}function Xs(t,a){for(let s=0;s<t.length;s++)if(a(t[s]))return s}function wt(t){return(a,s={})=>{const n=a.match(t.matchPattern);if(!n)return null;const r=n[0],i=a.match(t.parsePattern);if(!i)return null;let c=t.valueCallback?t.valueCallback(i[0]):i[0];c=s.valueCallback?s.valueCallback(c):c;const o=a.slice(r.length);return{value:c,rest:o}}}const Qs=/^(\d+)(th|st|nd|rd)?/i,Us=/\d+/i,Js={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ks={any:[/^b/i,/^(a|c)/i]},Zs={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},en={any:[/1/i,/2/i,/3/i,/4/i]},tn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},an={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},sn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nn={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},on={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cn={ordinalNumber:wt({matchPattern:Qs,parsePattern:Us,valueCallback:t=>parseInt(t,10)}),era:k({matchPatterns:Js,defaultMatchWidth:"wide",parsePatterns:Ks,defaultParseWidth:"any"}),quarter:k({matchPatterns:Zs,defaultMatchWidth:"wide",parsePatterns:en,defaultParseWidth:"any",valueCallback:t=>t+1}),month:k({matchPatterns:tn,defaultMatchWidth:"wide",parsePatterns:an,defaultParseWidth:"any"}),day:k({matchPatterns:sn,defaultMatchWidth:"wide",parsePatterns:nn,defaultParseWidth:"any"}),dayPeriod:k({matchPatterns:rn,defaultMatchWidth:"any",parsePatterns:on,defaultParseWidth:"any"})},yt={code:"en-US",formatDistance:As,formatLong:Es,formatRelative:Ls,localize:$s,match:cn,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dn(t){const a=b(t);return gs(a,Ps(a))+1}function ln(t){const a=b(t),s=+me(a)-+bs(a);return Math.round(s/vt)+1}function Nt(t,a){const s=b(t),n=s.getFullYear(),r=ne(),i=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,c=W(t,0);c.setFullYear(n+1,0,i),c.setHours(0,0,0,0);const o=ae(c,a),d=W(t,0);d.setFullYear(n,0,i),d.setHours(0,0,0,0);const p=ae(d,a);return s.getTime()>=o.getTime()?n+1:s.getTime()>=p.getTime()?n:n-1}function mn(t,a){const s=ne(),n=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,r=Nt(t,a),i=W(t,0);return i.setFullYear(r,0,n),i.setHours(0,0,0,0),ae(i,a)}function un(t,a){const s=b(t),n=+ae(s,a)-+mn(s,a);return Math.round(n/vt)+1}function g(t,a){const s=t<0?"-":"",n=Math.abs(t).toString().padStart(a,"0");return s+n}const E={y(t,a){const s=t.getFullYear(),n=s>0?s:1-s;return g(a==="yy"?n%100:n,a.length)},M(t,a){const s=t.getMonth();return a==="M"?String(s+1):g(s+1,2)},d(t,a){return g(t.getDate(),a.length)},a(t,a){const s=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(t,a){return g(t.getHours()%12||12,a.length)},H(t,a){return g(t.getHours(),a.length)},m(t,a){return g(t.getMinutes(),a.length)},s(t,a){return g(t.getSeconds(),a.length)},S(t,a){const s=a.length,n=t.getMilliseconds(),r=Math.trunc(n*Math.pow(10,s-3));return g(r,a.length)}},q={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fe={G:function(t,a,s){const n=t.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})}},y:function(t,a,s){if(a==="yo"){const n=t.getFullYear(),r=n>0?n:1-n;return s.ordinalNumber(r,{unit:"year"})}return E.y(t,a)},Y:function(t,a,s,n){const r=Nt(t,n),i=r>0?r:1-r;if(a==="YY"){const c=i%100;return g(c,2)}return a==="Yo"?s.ordinalNumber(i,{unit:"year"}):g(i,a.length)},R:function(t,a){const s=jt(t);return g(s,a.length)},u:function(t,a){const s=t.getFullYear();return g(s,a.length)},Q:function(t,a,s){const n=Math.ceil((t.getMonth()+1)/3);switch(a){case"Q":return String(n);case"QQ":return g(n,2);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,a,s){const n=Math.ceil((t.getMonth()+1)/3);switch(a){case"q":return String(n);case"qq":return g(n,2);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,a,s){const n=t.getMonth();switch(a){case"M":case"MM":return E.M(t,a);case"Mo":return s.ordinalNumber(n+1,{unit:"month"});case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})}},L:function(t,a,s){const n=t.getMonth();switch(a){case"L":return String(n+1);case"LL":return g(n+1,2);case"Lo":return s.ordinalNumber(n+1,{unit:"month"});case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})}},w:function(t,a,s,n){const r=un(t,n);return a==="wo"?s.ordinalNumber(r,{unit:"week"}):g(r,a.length)},I:function(t,a,s){const n=ln(t);return a==="Io"?s.ordinalNumber(n,{unit:"week"}):g(n,a.length)},d:function(t,a,s){return a==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):E.d(t,a)},D:function(t,a,s){const n=dn(t);return a==="Do"?s.ordinalNumber(n,{unit:"dayOfYear"}):g(n,a.length)},E:function(t,a,s){const n=t.getDay();switch(a){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})}},e:function(t,a,s,n){const r=t.getDay(),i=(r-n.weekStartsOn+8)%7||7;switch(a){case"e":return String(i);case"ee":return g(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(r,{width:"short",context:"formatting"});case"eeee":default:return s.day(r,{width:"wide",context:"formatting"})}},c:function(t,a,s,n){const r=t.getDay(),i=(r-n.weekStartsOn+8)%7||7;switch(a){case"c":return String(i);case"cc":return g(i,a.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(r,{width:"narrow",context:"standalone"});case"cccccc":return s.day(r,{width:"short",context:"standalone"});case"cccc":default:return s.day(r,{width:"wide",context:"standalone"})}},i:function(t,a,s){const n=t.getDay(),r=n===0?7:n;switch(a){case"i":return String(r);case"ii":return g(r,a.length);case"io":return s.ordinalNumber(r,{unit:"day"});case"iii":return s.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(n,{width:"short",context:"formatting"});case"iiii":default:return s.day(n,{width:"wide",context:"formatting"})}},a:function(t,a,s){const r=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,a,s){const n=t.getHours();let r;switch(n===12?r=q.noon:n===0?r=q.midnight:r=n/12>=1?"pm":"am",a){case"b":case"bb":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,a,s){const n=t.getHours();let r;switch(n>=17?r=q.evening:n>=12?r=q.afternoon:n>=4?r=q.morning:r=q.night,a){case"B":case"BB":case"BBB":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,a,s){if(a==="ho"){let n=t.getHours()%12;return n===0&&(n=12),s.ordinalNumber(n,{unit:"hour"})}return E.h(t,a)},H:function(t,a,s){return a==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):E.H(t,a)},K:function(t,a,s){const n=t.getHours()%12;return a==="Ko"?s.ordinalNumber(n,{unit:"hour"}):g(n,a.length)},k:function(t,a,s){let n=t.getHours();return n===0&&(n=24),a==="ko"?s.ordinalNumber(n,{unit:"hour"}):g(n,a.length)},m:function(t,a,s){return a==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):E.m(t,a)},s:function(t,a,s){return a==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):E.s(t,a)},S:function(t,a){return E.S(t,a)},X:function(t,a,s){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(a){case"X":return Be(n);case"XXXX":case"XX":return Y(n);case"XXXXX":case"XXX":default:return Y(n,":")}},x:function(t,a,s){const n=t.getTimezoneOffset();switch(a){case"x":return Be(n);case"xxxx":case"xx":return Y(n);case"xxxxx":case"xxx":default:return Y(n,":")}},O:function(t,a,s){const n=t.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+Ye(n,":");case"OOOO":default:return"GMT"+Y(n,":")}},z:function(t,a,s){const n=t.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+Ye(n,":");case"zzzz":default:return"GMT"+Y(n,":")}},t:function(t,a,s){const n=Math.trunc(t.getTime()/1e3);return g(n,a.length)},T:function(t,a,s){const n=t.getTime();return g(n,a.length)}};function Ye(t,a=""){const s=t>0?"-":"+",n=Math.abs(t),r=Math.trunc(n/60),i=n%60;return i===0?s+String(r):s+String(r)+a+g(i,2)}function Be(t,a){return t%60===0?(t>0?"-":"+")+g(Math.abs(t)/60,2):Y(t,a)}function Y(t,a=""){const s=t>0?"-":"+",n=Math.abs(t),r=g(Math.trunc(n/60),2),i=g(n%60,2);return s+r+a+i}const qe=(t,a)=>{switch(t){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},_t=(t,a)=>{switch(t){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},hn=(t,a)=>{const s=t.match(/(P+)(p+)?/)||[],n=s[1],r=s[2];if(!r)return qe(t,a);let i;switch(n){case"P":i=a.dateTime({width:"short"});break;case"PP":i=a.dateTime({width:"medium"});break;case"PPP":i=a.dateTime({width:"long"});break;case"PPPP":default:i=a.dateTime({width:"full"});break}return i.replace("{{date}}",qe(n,a)).replace("{{time}}",_t(r,a))},fn={p:_t,P:hn},pn=/^D+$/,xn=/^Y+$/,gn=["D","DD","YY","YYYY"];function bn(t){return pn.test(t)}function vn(t){return xn.test(t)}function jn(t,a,s){const n=wn(t,a,s);if(console.warn(n),gn.includes(t))throw new RangeError(n)}function wn(t,a,s){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${a}\`) for formatting ${n} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const yn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Nn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_n=/^'([^]*?)'?$/,Sn=/''/g,Cn=/[a-zA-Z]/;function Or(t,a,s){const n=ne(),r=s?.locale??n.locale??yt,i=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,c=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=b(t);if(!ws(o))throw new RangeError("Invalid time value");let d=a.match(Nn).map(u=>{const l=u[0];if(l==="p"||l==="P"){const f=fn[l];return f(u,r.formatLong)}return u}).join("").match(yn).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const l=u[0];if(l==="'")return{isToken:!1,value:Mn(u)};if(Fe[l])return{isToken:!0,value:u};if(l.match(Cn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+l+"`");return{isToken:!1,value:u}});r.localize.preprocessor&&(d=r.localize.preprocessor(o,d));const p={firstWeekContainsDate:i,weekStartsOn:c,locale:r};return d.map(u=>{if(!u.isToken)return u.value;const l=u.value;(!s?.useAdditionalWeekYearTokens&&vn(l)||!s?.useAdditionalDayOfYearTokens&&bn(l))&&jn(l,a,String(t));const f=Fe[l[0]];return f(o,l,r.localize,p)}).join("")}function Mn(t){const a=t.match(_n);return a?a[1].replace(Sn,"'"):t}function Dn(t,a,s){const n=ne(),r=s?.locale??n.locale??yt,i=2520,c=ce(t,a);if(isNaN(c))throw new RangeError("Invalid time value");const o=Object.assign({},s,{addSuffix:s?.addSuffix,comparison:c});let d,p;c>0?(d=b(a),p=b(t)):(d=b(t),p=b(a));const u=ks(p,d),l=(ue(p)-ue(d))/1e3,f=Math.round((u-l)/60);let w;if(f<2)return s?.includeSeconds?u<5?r.formatDistance("lessThanXSeconds",5,o):u<10?r.formatDistance("lessThanXSeconds",10,o):u<20?r.formatDistance("lessThanXSeconds",20,o):u<40?r.formatDistance("halfAMinute",0,o):u<60?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",1,o):f===0?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",f,o);if(f<45)return r.formatDistance("xMinutes",f,o);if(f<90)return r.formatDistance("aboutXHours",1,o);if(f<Le){const y=Math.round(f/60);return r.formatDistance("aboutXHours",y,o)}else{if(f<i)return r.formatDistance("xDays",1,o);if(f<ie){const y=Math.round(f/Le);return r.formatDistance("xDays",y,o)}else if(f<ie*2)return w=Math.round(f/ie),r.formatDistance("aboutXMonths",w,o)}if(w=Ds(p,d),w<12){const y=Math.round(f/ie);return r.formatDistance("xMonths",y,o)}else{const y=w%12,j=Math.trunc(w/12);return y<3?r.formatDistance("aboutXYears",j,o):y<9?r.formatDistance("overXYears",j,o):r.formatDistance("almostXYears",j+1,o)}}function kn(t,a){return Dn(t,vs(t),a)}const Pn={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},On=(t,a,s)=>{let n;const r=Pn[t];return typeof r=="string"?n=r:a===1?n=r.one:n=r.other.replace("{{count}}",String(a)),s?.addSuffix?s.comparison&&s.comparison>0?"em "+n:"há "+n:n},An={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},Tn={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},In={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Rn={date:H({formats:An,defaultWidth:"full"}),time:H({formats:Tn,defaultWidth:"full"}),dateTime:H({formats:In,defaultWidth:"full"})},En={lastWeek:t=>{const a=t.getDay();return"'"+(a===0||a===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},zn=(t,a,s,n)=>{const r=En[t];return typeof r=="function"?r(a):r},Ln={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},Wn={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},Fn={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},Yn={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},Bn={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},qn={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},Vn=(t,a)=>{const s=Number(t);return a?.unit==="week"?s+"ª":s+"º"},Hn={ordinalNumber:Vn,era:D({values:Ln,defaultWidth:"wide"}),quarter:D({values:Wn,defaultWidth:"wide",argumentCallback:t=>t-1}),month:D({values:Fn,defaultWidth:"wide"}),day:D({values:Yn,defaultWidth:"wide"}),dayPeriod:D({values:Bn,defaultWidth:"wide",formattingValues:qn,defaultFormattingWidth:"wide"})},$n=/^(\d+)[ºªo]?/i,Gn=/\d+/i,Xn={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},Qn={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},Un={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Jn={any:[/1/i,/2/i,/3/i,/4/i]},Kn={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},Zn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},er={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},tr={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},ar={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},sr={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},nr={ordinalNumber:wt({matchPattern:$n,parsePattern:Gn,valueCallback:t=>parseInt(t,10)}),era:k({matchPatterns:Xn,defaultMatchWidth:"wide",parsePatterns:Qn,defaultParseWidth:"any"}),quarter:k({matchPatterns:Un,defaultMatchWidth:"wide",parsePatterns:Jn,defaultParseWidth:"any",valueCallback:t=>t+1}),month:k({matchPatterns:Kn,defaultMatchWidth:"wide",parsePatterns:Zn,defaultParseWidth:"any"}),day:k({matchPatterns:er,defaultMatchWidth:"wide",parsePatterns:tr,defaultParseWidth:"any"}),dayPeriod:k({matchPatterns:ar,defaultMatchWidth:"any",parsePatterns:sr,defaultParseWidth:"any"})},rr={code:"pt-BR",formatDistance:On,formatLong:Rn,formatRelative:zn,localize:Hn,match:nr,options:{weekStartsOn:0,firstWeekContainsDate:1}},ir={success:Qe,error:Vt,warning:U,info:qt},or={success:"text-green-600 bg-green-50 border-green-200",error:"text-red-600 bg-red-50 border-red-200",warning:"text-amber-600 bg-amber-50 border-amber-200",info:"text-blue-600 bg-blue-50 border-blue-200"};function cr({notification:t}){const{markAsRead:a,removeNotification:s}=st(),n=ir[t.type];return e.jsx(T,{className:`mb-3 transition-all ${t.read?"":"border-l-4 border-l-primary bg-primary/5"}`,children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-1 rounded-full ${or[t.type]}`,children:e.jsx(n,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:`text-sm font-medium ${t.read?"":"font-semibold"}`,children:t.title}),e.jsxs("div",{className:"flex items-center gap-1",children:[!t.read&&e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>s(t.id),children:e.jsx(Xe,{className:"w-3 h-3"})})]})]}),t.message&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.message}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:kn(t.createdAt,{addSuffix:!0,locale:rr})}),e.jsxs("div",{className:"flex gap-1",children:[t.action&&e.jsx(_,{variant:"outline",size:"sm",className:"h-6 text-xs",onClick:t.action.onClick,children:t.action.label}),!t.read&&e.jsxs(_,{variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>a(t.id),children:[e.jsx(Ue,{className:"w-3 h-3 mr-1"}),"Marcar como lida"]})]})]})]})]})})})}function dr(){const[t,a]=h.useState(!1),{notifications:s,unreadCount:n,markAllAsRead:r,clearAll:i,clearRead:c}=st(),o=s.slice(0,10);return e.jsxs(Pa,{open:t,onOpenChange:a,children:[e.jsx(Oa,{asChild:!0,children:e.jsxs(_,{variant:"ghost",size:"sm",className:"relative",children:[e.jsx(Oe,{className:"w-4 h-4"}),n>0&&e.jsx(P,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center text-xs p-0 min-w-[20px]",children:n>99?"99+":n})]})}),e.jsxs(Aa,{className:"w-96 p-0 bg-background border shadow-lg z-50",align:"end",side:"bottom",sideOffset:8,children:[e.jsxs(O,{className:"border-b pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(A,{className:"text-base",children:"Notificações"}),n>0&&e.jsxs(P,{variant:"secondary",className:"text-xs",children:[n," não lidas"]})]}),s.length>0&&e.jsxs("div",{className:"flex gap-2 pt-2",children:[n>0&&e.jsxs(_,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:r,children:[e.jsx(Bt,{className:"w-3 h-3 mr-1"}),"Marcar todas como lidas"]}),e.jsxs(_,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:c,children:[e.jsx(Ge,{className:"w-3 h-3 mr-1"}),"Limpar lidas"]}),e.jsxs(_,{variant:"outline",size:"sm",className:"h-7 text-xs text-destructive",onClick:i,children:[e.jsx(Xe,{className:"w-3 h-3 mr-1"}),"Limpar todas"]})]})]}),e.jsx(fa,{className:"max-h-96",children:e.jsx("div",{className:"p-4",children:o.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Oe,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Nenhuma notificação"})]}):e.jsxs("div",{className:"space-y-0",children:[o.map(d=>e.jsx(cr,{notification:d},d.id)),s.length>10&&e.jsx("div",{className:"text-center pt-4",children:e.jsx(_,{variant:"ghost",size:"sm",className:"text-xs",children:"Ver todas as notificações"})})]})})})]})]})}const lr=({onManageOrgs:t})=>{const[a,s]=h.useState(!1),n=Ve(),{currentOrg:r,organizations:i,loading:c,switchOrganization:o}=Ha(),d=async u=>{if(u!==r?.id)try{await o(u),s(!1)}catch(l){console.error("Failed to switch organization:",l)}},p=()=>{t?t():n("/admin/org"),s(!1)};return c||!r?e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/30 rounded-lg border",children:[e.jsx(Ht,{className:"h-4 w-4 animate-spin text-muted-foreground"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Carregando..."})]}):i.length<=1?e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted/30 rounded-lg border",children:[e.jsx(xe,{className:"h-4 w-4 text-primary"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium truncate",children:r.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:r.code})]}),e.jsx(P,{variant:r.role==="ADMIN"?"default":"secondary",className:"text-xs",children:r.role==="ADMIN"?"Admin":r.role==="ANALYST"?"Analista":"Visualizador"})]}):e.jsxs(et,{open:a,onOpenChange:s,children:[e.jsx(tt,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:"w-full justify-between h-auto p-3 hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsx(xe,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsxs("div",{className:"text-left min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-medium truncate",children:r.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:r.code})]}),e.jsx(P,{variant:r.role==="ADMIN"?"default":"secondary",className:"text-xs",children:r.role==="ADMIN"?"Admin":r.role==="ANALYST"?"Analista":"Visualizador"})]}),e.jsx($t,{className:"h-4 w-4 ml-2 flex-shrink-0"})]})}),e.jsxs(at,{align:"start",className:"w-64",children:[e.jsx("div",{className:"px-3 py-2 text-xs text-muted-foreground",children:"Organizações disponíveis"}),e.jsx(Se,{}),i.map(u=>e.jsxs(J,{onClick:()=>d(u.id),className:"flex items-center gap-2 p-3 cursor-pointer",children:[e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium truncate",children:u.name}),r.id===u.id&&e.jsx(Ue,{className:"h-3 w-3 text-primary"})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:u.code})]}),e.jsx(P,{variant:u.role==="ADMIN"?"default":"secondary",className:"text-xs",children:u.role==="ADMIN"?"Admin":u.role==="ANALYST"?"Analista":"Visualizador"})]},u.id)),e.jsx(Se,{}),e.jsxs(J,{onClick:p,className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{children:"Gerenciar organizações"})]})]})]})},ye={"/app":{label:"Início",icon:le},"/app/dashboard":{label:"Dashboard",icon:le},"/app/mapa-testemunhas":{label:"Mapa de Testemunhas",icon:Q},"/app/chat":{label:"Chat Assistente",icon:Xt},"/app/dados":{label:"Dados",icon:oe},"/app/dados/mapa":{label:"Mapa de Testemunhas",icon:oe},"/app/admin":{label:"Administração",icon:Ne},"/app/admin/ia":{label:"Inteligência Artificial",icon:Gt},"/app/admin/ia/chaves":{label:"Chaves API",icon:z},"/app/admin/ia/modelos":{label:"Modelos",icon:z},"/app/admin/ia/prompt-studio":{label:"Prompt Studio",icon:V},"/app/admin/ia/testes":{label:"Playground",icon:z},"/app/admin/base":{label:"Base de Dados",icon:oe},"/app/admin/org":{label:"Organização",icon:Q},"/app/admin/config":{label:"Configurações",icon:z},"/app/admin/analytics":{label:"Analytics",icon:Ne},"/app/admin/logs":{label:"Logs",icon:V},"/app/admin/versoes":{label:"Versões",icon:V},"/app/profile":{label:"Perfil",icon:Q},"/app/settings":{label:"Configurações",icon:z}};function mr(){const t=He(),{open:a}=G(),n=(()=>{const i=t.pathname.split("/").filter(Boolean),c=[];t.pathname.startsWith("/app")&&c.push({path:"/app/dashboard",label:"Início",icon:le});let o="";return i.forEach((d,p)=>{o+=`/${d}`;const u=ye[o];u&&o!=="/app/dashboard"&&c.push({path:o,label:u.label,icon:u.icon,isLast:p===i.length-1})}),c})(),r=ye[t.pathname]??ye["/"];return e.jsx("header",{className:"sticky top-0 z-40 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"flex h-14 items-center gap-4 px-4",children:[e.jsx(lt,{className:"-ml-1","aria-label":"Menu","aria-controls":"menu","aria-expanded":a}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 md:hidden",children:[r?.icon&&e.jsx(r.icon,{className:"h-4 w-4","aria-hidden":"true",focusable:"false"}),e.jsx("h1",{className:"font-semibold text-sm",children:r?.label||"AssistJur.IA"})]}),e.jsx("div",{className:"hidden md:flex",children:e.jsx(pa,{children:e.jsx(xa,{children:n.map((i,c)=>e.jsxs("div",{children:[e.jsx(ga,{children:i.isLast??!1?e.jsxs(ba,{className:"flex items-center gap-2",children:[e.jsx(i.icon,{className:"h-4 w-4","aria-hidden":"true",focusable:"false"}),i.label]}):e.jsxs(va,{href:i.path,className:"flex items-center gap-2 hover:text-foreground",children:[e.jsx(i.icon,{className:"h-4 w-4","aria-hidden":"true",focusable:"false"}),i.label]})}),c<n.length-1&&e.jsx(ja,{children:e.jsx(Qt,{className:"h-4 w-4","aria-hidden":"true",focusable:"false"})})]},i.path))})})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(lr,{})}),e.jsx(dr,{}),e.jsxs("div",{className:"hidden lg:flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Sistema Online"})]})]})]})})}function ur({children:t}){return Ut()?e.jsx(e.Fragment,{children:t}):e.jsx(Je.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:Ta,children:t})}const hr={initial:{opacity:0,y:20},enter:{opacity:1,y:0,transition:{duration:.3,ease:[.4,0,.2,1]}},exit:{opacity:0,y:-20,transition:{duration:.2,ease:[.4,0,.2,1]}}};function fr({children:t}){return($&&typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1)?e.jsx(e.Fragment,{children:t}):e.jsx(Jt,{mode:"wait",initial:!1,children:e.jsx(Je.div,{variants:hr,initial:"initial",animate:"enter",exit:"exit",className:"w-full h-full",children:t})})}function pr({children:t}){return e.jsx(ct,{defaultOpen:!0,children:e.jsxs("div",{className:"min-h-screen flex w-full bg-background",children:[e.jsx(fs,{}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsx(mr,{}),e.jsx("main",{className:"flex-1 overflow-hidden",children:e.jsx(fr,{children:e.jsx(ur,{children:t})})})]})]})})}function xr(){const{profile:t}=De(),{data:a,isLoading:s,refetch:n}=Kt({queryKey:["last-update",t?.organization_id],queryFn:async()=>{if(!t?.organization_id)return console.error("Organização não encontrada para last-update"),null;const{data:c,error:o}=await Pt.functions.invoke("get-last-update");return o?(console.error("Error fetching last update:",o),null):c},enabled:!!t?.organization_id,staleTime:300*1e3});return{...a,isLoading:s,formatLocalDateTime:c=>{const o=Intl.DateTimeFormat().resolvedOptions().timeZone||"America/Sao_Paulo";return new Date(c).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:o})},formatShortDateTime:c=>{const o=Intl.DateTimeFormat().resolvedOptions().timeZone||"America/Sao_Paulo";return new Date(c).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:o})},refetch:n}}function gr({organization:t,showTimestamp:a=!0,showVersion:s=!0,className:n=""}){const{versionNumber:r,formatLocalDateTime:i,publishedAtUTC:c}=xr();return e.jsxs("div",{className:`border-t bg-muted/10 p-4 space-y-3 text-xs text-muted-foreground ${n}`,children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ke,{className:"h-4 w-4 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-300",children:X.legal.reportDisclaimer}),e.jsx("p",{children:X.legal.complianceNote})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 pt-2 border-t border-muted/20",children:[t&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ze,{className:"h-3 w-3"}),e.jsx("span",{children:t})]}),a&&c&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Zt,{className:"h-3 w-3"}),e.jsxs("span",{children:["Gerado em: ",i(c)]})]}),s&&r&&e.jsxs("div",{className:"font-mono font-medium",children:["v",r]})]}),e.jsx("div",{className:"text-center pt-2 border-t border-muted/20",children:e.jsxs("p",{children:["Sistema: ",e.jsx("span",{className:"font-medium",children:X.fullName})," • Suporte:"," ",e.jsx("a",{href:`mailto:${X.contact.support}`,className:"text-primary hover:underline",children:X.contact.support})]})})]})}const br=K.forwardRef(({data:t,onExport:a,sections:s={summary:!0,risks:!0,roi:!0}},n)=>{const{toast:r}=Me(),i=d=>{a?a(d):r({title:"Exportação",description:`Gerando relatório em ${d.toUpperCase()}...`})},c=d=>{switch(d){case"ALTO":return"destructive";case"MEDIO":return"secondary";case"BAIXO":return"outline";default:return"secondary"}},o=d=>new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(d));return e.jsxs("div",{ref:n,className:"max-w-4xl mx-auto space-y-6 print:space-y-4",children:[e.jsxs(T,{className:"print:shadow-none",children:[e.jsx(O,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(na,{size:"lg"}),e.jsxs(A,{className:"text-2xl font-bold flex items-center gap-2 mt-4",children:[e.jsx(V,{className:"h-6 w-6 text-primary"}),"Relatório Conclusivo de Análise"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{className:"font-medium",children:t.organizacao}),e.jsxs("p",{children:["Período: ",t.periodo_analise.inicio," a"," ",t.periodo_analise.fim]}),e.jsxs("p",{children:["Responsável: ",t.analista_responsavel]}),e.jsxs("p",{children:["Gerado em: ",o(t.data_geracao)]})]})]}),e.jsx("div",{className:"print:hidden",children:e.jsx(wa,{onExport:i})})]})}),e.jsx(I,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:t.resumo_executivo.total_processos}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Processos Analisados"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-destructive",children:t.resumo_executivo.processos_criticos}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Casos Críticos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:t.resumo_executivo.padroes_detectados}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Padrões Detectados"})]}),e.jsx("div",{className:"text-center",children:e.jsxs(P,{variant:c(t.resumo_executivo.risco_geral),className:"text-base px-3 py-1",children:["Risco ",t.resumo_executivo.risco_geral]})})]})})]}),s.summary&&e.jsxs(T,{children:[e.jsx(O,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-5 w-5 text-primary"}),"Resumo Executivo"]})}),e.jsxs(I,{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Confiabilidade da Análise:"}),e.jsx(ya,{value:t.resumo_executivo.confiabilidade_analise,className:"w-24 h-2"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.resumo_executivo.confiabilidade_analise,"%"]})]})}),e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:t.resumo_executivo.observacoes_gerais})})]})]}),e.jsxs(T,{children:[e.jsx(O,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-primary"}),"Análise de Padrões Detectados"]})}),e.jsx(I,{children:t.analysis_result?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Q,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Troca Direta"})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.analysis_result.trocaDireta.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"casos detectados"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_e,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"font-medium",children:"Triangulação"})]}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.analysis_result.triangulacao.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"redes identificadas"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ea,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"font-medium",children:"Duplo Papel"})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.analysis_result.duploPapel.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"casos identificados"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ae,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"font-medium",children:"Prova Emprestada"})]}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.analysis_result.provaEmprestada.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"testemunhas suspeitas"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(U,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"font-medium",children:"Homônimos"})]}),e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.analysis_result.homonimos.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"casos suspeitos"})]})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(U,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"Dados de análise de padrões não disponíveis"})]})})]}),s.risks&&e.jsxs(T,{children:[e.jsx(O,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-destructive"}),"Casos Críticos (Score ≥ 85)"]})}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-3",children:[t.processos_scores.filter(d=>d.score_final>=85).slice(0,10).map(d=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-mono text-sm font-medium",children:d.cnj}),e.jsx("div",{className:"text-xs text-muted-foreground",children:d.classificacao_estrategica})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{variant:d.score_final>=85||d.score_final>=70?"destructive":"secondary",className:"font-mono",children:d.score_final}),e.jsx(P,{variant:"destructive",className:"text-xs",children:d.prioridade_contradita})]})]},d.cnj)),t.processos_scores.filter(d=>d.score_final>=85).length===0&&e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx(Qe,{className:"h-6 w-6 mx-auto mb-2 text-green-600"}),e.jsx("p",{children:"Nenhum caso crítico identificado"})]})]})})]}),s.roi&&t.roi&&e.jsxs(T,{children:[e.jsx(O,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-primary"}),"ROI Estimado"]})}),e.jsxs(I,{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Investimento: R$ ",t.roi.investimento.toLocaleString()]}),e.jsxs("div",{children:["Retorno: R$ ",t.roi.retorno.toLocaleString()]}),e.jsxs("div",{className:"font-medium",children:["ROI: ",t.roi.percentual,"%"]})]})]}),e.jsxs(T,{children:[e.jsx(O,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-5 w-5 text-primary"}),"Recomendações Estratégicas"]})}),e.jsx(I,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-destructive mb-2 flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),"Ações Imediatas"]}),e.jsx("ul",{className:"space-y-1 text-sm text-muted-foreground ml-6",children:t.recomendacoes.imediatas.map((d,p)=>e.jsx("li",{className:"list-disc",children:d},p))})]}),e.jsx(L,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-amber-600 mb-2 flex items-center gap-2",children:[e.jsx(ta,{className:"h-4 w-4"}),"Curto Prazo (30-90 dias)"]}),e.jsx("ul",{className:"space-y-1 text-sm text-muted-foreground ml-6",children:t.recomendacoes.curto_prazo.map((d,p)=>e.jsx("li",{className:"list-disc",children:d},p))})]}),e.jsx(L,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-green-600 mb-2 flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),"Longo Prazo (3-12 meses)"]}),e.jsx("ul",{className:"space-y-1 text-sm text-muted-foreground ml-6",children:t.recomendacoes.longo_prazo.map((d,p)=>e.jsx("li",{className:"list-disc",children:d},p))})]})]})})]}),e.jsxs(T,{children:[e.jsx(O,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-primary"}),"Distribuição de Scores"]})}),e.jsxs(I,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-destructive/10 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-destructive",children:t.scoring_metrics.distribuicao_scores.critico}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Crítico"})]}),e.jsxs("div",{className:"text-center p-3 bg-destructive/5 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-destructive",children:t.scoring_metrics.distribuicao_scores.alto}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Alto"})]}),e.jsxs("div",{className:"text-center p-3 bg-yellow-100 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-yellow-700",children:t.scoring_metrics.distribuicao_scores.medio}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Médio"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-100 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-green-700",children:t.scoring_metrics.distribuicao_scores.baixo}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Baixo"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted/10 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-muted-foreground",children:t.scoring_metrics.distribuicao_scores.minimo}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Mínimo"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Score Médio Geral:"}),e.jsx("span",{className:"font-mono font-medium",children:Math.round(t.scoring_metrics.avg_score*10)/10})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Casos com Contradita Recomendada:"}),e.jsx("span",{className:"font-mono font-medium",children:t.scoring_metrics.casos_contradita_recomendada})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Casos Necessitando Investigação:"}),e.jsx("span",{className:"font-mono font-medium",children:t.scoring_metrics.casos_investigacao_necessaria})]})]})]})]}),e.jsx(gr,{organization:t.organizacao,showTimestamp:!0,showVersion:!0})]})});function vr({onGenerate:t,mockData:a}){const{toast:s}=Me(),[n,r]=h.useState(!1),[i,c]=h.useState("empty"),[o,d]=h.useState(null),[p,u]=h.useState(!1),[l,f]=h.useState({organizacao:"",periodo_inicio:"",periodo_fim:"",analista_responsavel:"",incluir_casos_criticos:!0,incluir_analise_padroes:!0,incluir_recomendacoes:!0,limite_casos_criticos:10,observacoes_gerais:"",recomendacoes_personalizadas:{imediatas:[],curto_prazo:[],longo_prazo:[]},sections:{summary:!0,risks:!0,roi:!0}}),[w,y]=h.useState({type:"imediatas",text:""}),j=h.useRef(null);h.useEffect(()=>{const m=localStorage.getItem("report_sections");if(m)try{const x=JSON.parse(m);f(R=>({...R,sections:{...R.sections,...x}}))}catch{}},[]),h.useEffect(()=>{localStorage.setItem("report_sections",JSON.stringify(l.sections))},[l.sections]);const B=async()=>{if(!l.organizacao||!l.periodo_inicio||!l.periodo_fim||!l.analista_responsavel){s({title:"Campos obrigatórios",description:"Preencha todos os campos obrigatórios antes de gerar o relatório.",variant:"destructive"});return}if(!navigator.onLine){c("offline");return}r(!0),c("loading");try{let m;if(t)m=await t(l);else if(a)m={...a,organizacao:l.organizacao,periodo_analise:{inicio:l.periodo_inicio,fim:l.periodo_fim},analista_responsavel:l.analista_responsavel,data_geracao:new Date().toISOString(),resumo_executivo:{...a.resumo_executivo,observacoes_gerais:l.observacoes_gerais||a.resumo_executivo.observacoes_gerais},recomendacoes:{imediatas:l.recomendacoes_personalizadas.imediatas.length>0?l.recomendacoes_personalizadas.imediatas:a.recomendacoes.imediatas,curto_prazo:l.recomendacoes_personalizadas.curto_prazo.length>0?l.recomendacoes_personalizadas.curto_prazo:a.recomendacoes.curto_prazo,longo_prazo:l.recomendacoes_personalizadas.longo_prazo.length>0?l.recomendacoes_personalizadas.longo_prazo:a.recomendacoes.longo_prazo}};else throw new Error("Nenhuma fonte de dados disponível");d(m),u(!0),c("success"),s({title:"Relatório gerado",description:"Relatório conclusivo gerado com sucesso."})}catch(m){console.error("Erro ao gerar relatório:",m),c(navigator.onLine?"error":"offline"),s({title:"Erro",description:"Falha ao gerar o relatório. Tente novamente.",variant:"destructive"})}finally{r(!1)}},N=()=>{w.text.trim()&&(f(m=>({...m,recomendacoes_personalizadas:{...m.recomendacoes_personalizadas,[w.type]:[...m.recomendacoes_personalizadas[w.type],w.text.trim()]}})),y({...w,text:""}))},C=(m,x)=>{f(R=>({...R,recomendacoes_personalizadas:{...R.recomendacoes_personalizadas,[m]:R.recomendacoes_personalizadas[m].filter((fe,St)=>St!==x)}}))},S=m=>{if(m==="pdf"){window.print();return}if(m==="csv"){s({title:"Exportação CSV",description:"Funcionalidade em desenvolvimento.",variant:"default"});return}s({title:"Exportando",description:`Gerando relatório em ${m.toUpperCase()}...`})};return p&&o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{variant:"outline",onClick:()=>u(!1),children:"← Voltar à Configuração"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"outline",onClick:()=>S("pdf"),children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Exportar PDF"]}),e.jsxs(_,{variant:"outline",onClick:()=>S("docx"),children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Exportar DOCX"]})]})]}),e.jsx(br,{ref:j,data:o,sections:l.sections,onExport:S})]}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[i!=="empty"&&i!=="success"&&e.jsx(Na,{status:i,onRetry:B}),e.jsxs(T,{children:[e.jsx(O,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-primary"}),"Gerador de Relatório Conclusivo"]})}),e.jsxs(I,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Informações Básicas"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"organizacao",children:"Organização *"}),e.jsx(F,{id:"organizacao",value:l.organizacao,onChange:m=>f(x=>({...x,organizacao:m.target.value})),placeholder:"Nome da organização"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"analista",children:"Analista Responsável *"}),e.jsx(F,{id:"analista",value:l.analista_responsavel,onChange:m=>f(x=>({...x,analista_responsavel:m.target.value})),placeholder:"Nome do analista"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"inicio",children:"Período - Início *"}),e.jsx(F,{id:"inicio",type:"date",value:l.periodo_inicio,onChange:m=>f(x=>({...x,periodo_inicio:m.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"fim",children:"Período - Fim *"}),e.jsx(F,{id:"fim",type:"date",value:l.periodo_fim,onChange:m=>f(x=>({...x,periodo_fim:m.target.value}))})]})]})]}),e.jsx(L,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(z,{className:"h-4 w-4"}),"Configurações do Conteúdo"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{htmlFor:"criticos",children:"Incluir casos críticos"}),e.jsx(be,{id:"criticos",checked:l.incluir_casos_criticos,onCheckedChange:m=>f(x=>({...x,incluir_casos_criticos:m}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{htmlFor:"padroes",children:"Incluir análise de padrões"}),e.jsx(be,{id:"padroes",checked:l.incluir_analise_padroes,onCheckedChange:m=>f(x=>({...x,incluir_analise_padroes:m}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{htmlFor:"recomendacoes",children:"Incluir recomendações"}),e.jsx(be,{id:"recomendacoes",checked:l.incluir_recomendacoes,onCheckedChange:m=>f(x=>({...x,incluir_recomendacoes:m}))})]}),l.incluir_casos_criticos&&e.jsxs("div",{className:"ml-4 space-y-2",children:[e.jsx(M,{htmlFor:"limite",children:"Limite de casos críticos no relatório"}),e.jsx(F,{id:"limite",type:"number",min:"1",max:"50",value:l.limite_casos_criticos,onChange:m=>f(x=>({...x,limite_casos_criticos:parseInt(m.target.value)||10}))})]})]})]}),e.jsx(L,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(aa,{className:"h-4 w-4"}),"Seções do Relatório"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{id:"section-summary",checked:l.sections.summary,onCheckedChange:m=>f(x=>({...x,sections:{...x.sections,summary:!!m}}))}),e.jsx(M,{htmlFor:"section-summary",children:"Sumário"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{id:"section-risks",checked:l.sections.risks,onCheckedChange:m=>f(x=>({...x,sections:{...x.sections,risks:!!m}}))}),e.jsx(M,{htmlFor:"section-risks",children:"Riscos"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{id:"section-roi",checked:l.sections.roi,onCheckedChange:m=>f(x=>({...x,sections:{...x.sections,roi:!!m}}))}),e.jsx(M,{htmlFor:"section-roi",children:"ROI"})]})]})]}),e.jsx(L,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx($e,{className:"h-4 w-4"}),"Observações Gerais"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"observacoes",children:"Observações do Analista"}),e.jsx(ra,{id:"observacoes",value:l.observacoes_gerais,onChange:m=>f(x=>({...x,observacoes_gerais:m.target.value})),placeholder:"Adicione observações relevantes sobre a análise...",rows:4})]})]}),e.jsx(L,{}),l.incluir_recomendacoes&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(_e,{className:"h-4 w-4"}),"Recomendações Personalizadas"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_a,{value:w.type,onValueChange:m=>y(x=>({...x,type:m})),children:[e.jsx(Sa,{className:"w-48",children:e.jsx(Ca,{})}),e.jsxs(Ma,{children:[e.jsx(ve,{value:"imediatas",children:"Ações Imediatas"}),e.jsx(ve,{value:"curto_prazo",children:"Curto Prazo"}),e.jsx(ve,{value:"longo_prazo",children:"Longo Prazo"})]})]}),e.jsx(F,{value:w.text,onChange:m=>y(x=>({...x,text:m.target.value})),placeholder:"Digite a recomendação...",className:"flex-1",onKeyPress:m=>m.key==="Enter"&&N()}),e.jsx(_,{onClick:N,size:"sm",children:e.jsx(sa,{className:"h-4 w-4"})})]}),Object.entries(l.recomendacoes_personalizadas).map(([m,x])=>x.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(M,{className:"text-sm font-medium capitalize",children:[m.replace("_"," "),":"]}),e.jsx("div",{className:"space-y-1 ml-4",children:x.map((R,fe)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded text-sm",children:[e.jsx("span",{className:"flex-1",children:R}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>C(m,fe),className:"h-6 w-6 p-0",children:e.jsx(Ge,{className:"h-3 w-3"})})]},fe))})]},m))]})]}),e.jsx(L,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:"* Campos obrigatórios"})]}),e.jsx(_,{onClick:B,disabled:n,size:"lg",children:n?e.jsx(e.Fragment,{children:"Gerando..."}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Gerar Relatório"]})})]})]})]})]})}const jr={organizacao:"Advocacia Silva & Associados Ltda",periodo_analise:{inicio:"2024-01-01",fim:"2024-08-29"},analista_responsavel:"Dr. João Silva",data_geracao:new Date().toISOString(),analysis_result:{trocaDireta:[{testemunhaA:"Maria Santos",testemunhaB:"João Pereira",cnjsA:["0001234-56.2024.5.02.0001"],cnjsB:["0001235-57.2024.5.02.0002"],advogadosComuns:["Dr. Carlos Costa"],confianca:.92}],triangulacao:[{ciclo:["Ana Silva","Pedro Costa","Maria Santos"],cnjs:["0001234-56.2024.5.02.0001","0001235-57.2024.5.02.0002","0001236-58.2024.5.02.0003"],advogados:["Dr. Carlos Costa","Dra. Ana Oliveira"],comarcas:["São Paulo","Campinas"],desenho:"A → B → C → A",confianca:.87}],duploPapel:[{nome:"Carlos Mendes",cnjs_como_reclamante:["0001237-59.2024.5.02.0004"],cnjs_como_testemunha:["0001238-60.2024.5.02.0005","0001239-61.2024.5.02.0006"],polo_passivo:!0,risco:"ALTO"}],provaEmprestada:[{nome:"Roberto Lima",qtd_depoimentos:15,cnjs:["0001240-62.2024.5.02.0007","0001241-63.2024.5.02.0008"],advogados_recorrentes:["Dr. Fernando Pinto"],concentracao_comarca:.85,alerta:!0}],homonimos:[{nome:"José Silva",score:75,fatores:{comarca_uf:.8,advogado_ativo:.6,temporalidade:.7,nome_comum:!0},probabilidade:"ALTA",cnjs_suspeitos:["0001242-64.2024.5.02.0009","0001243-65.2024.5.02.0010"]}],padroes:{total_processos:1250,processos_com_triangulacao:15,processos_com_troca_direta:8,processos_com_prova_emprestada:12,testemunhas_profissionais:5,advogados_ofensores:["Dr. Carlos Costa","Dr. Fernando Pinto"],concentracao_uf:{SP:.65,RJ:.2,MG:.1,RS:.05}}},processos_scores:[{cnj:"0001234-56.2024.5.02.0001",score_final:92,score_breakdown:{total:92,components:{duplo_papel:{score:85,weight:.3,description:"Testemunha identificada como reclamante em outro processo",factor_type:"DUPLO_PAPEL"},prova_emprestada:{score:78,weight:.25,description:"Testemunha com histórico de múltiplos depoimentos",factor_type:"PROVA_EMPRESTADA"},troca_direta:{score:90,weight:.2,description:"Padrão de troca direta detectado",factor_type:"TROCA_DIRETA"}},classification:"CRITICO",recommendations:["Contraditar testemunha imediatamente","Investigar vínculo com advogados comuns","Solicitar análise de padrões de depoimento"],calculated_at:new Date().toISOString()},fatores_risco:["Testemunha com duplo papel (reclamante/testemunha)","Padrão de troca direta com alta confiança","Concentração geográfica suspeita"],classificacao_estrategica:"Crítico - Ação Imediata",prioridade_contradita:"URGENTE",confidence_level:.94,last_updated:new Date().toISOString()},{cnj:"0001235-57.2024.5.02.0002",score_final:87,score_breakdown:{total:87,components:{triangulacao:{score:85,weight:.15,description:"Parte de rede de triangulação identificada",factor_type:"TRIANGULACAO"},prova_emprestada:{score:82,weight:.25,description:"Testemunha profissional suspeita",factor_type:"PROVA_EMPRESTADA"}},classification:"CRITICO",recommendations:["Contraditar com urgência","Mapear rede completa de testemunhas"],calculated_at:new Date().toISOString()},fatores_risco:["Participação em rede de triangulação","Testemunha profissional confirmada"],classificacao_estrategica:"Crítico - Investigação Necessária",prioridade_contradita:"URGENTE",confidence_level:.91,last_updated:new Date().toISOString()},{cnj:"0001236-58.2024.5.02.0003",score_final:45,score_breakdown:{total:45,components:{homonimo:{score:65,weight:.1,description:"Possível homônimo detectado",factor_type:"HOMONIMO"}},classification:"BAIXO",recommendations:["Verificar identidade da testemunha","Monitorar para novos padrões"],calculated_at:new Date().toISOString()},fatores_risco:["Possível caso de homonímia"],classificacao_estrategica:"Normal - Monitoramento",prioridade_contradita:"BAIXA",confidence_level:.68,last_updated:new Date().toISOString()}],testemunhas_scores:[{nome:"Maria Santos",score_final:88,score_breakdown:{total:88,components:{prova_emprestada:{score:90,weight:.4,description:"Testemunha com 15+ depoimentos",factor_type:"PROVA_EMPRESTADA"},troca_direta:{score:85,weight:.3,description:"Participação confirmada em troca direta",factor_type:"TROCA_DIRETA"}},classification:"CRITICO",recommendations:["Contraditar em todos os casos pendentes","Investigar histórico completo"],calculated_at:new Date().toISOString()},classificacao:"PROFISSIONAL",alerta_prova_emprestada:!0,recomendacao_acao:"Contraditar imediatamente",risk_level:"CRITICO",last_updated:new Date().toISOString()},{nome:"João Silva",score_final:35,score_breakdown:{total:35,components:{homonimo:{score:70,weight:.15,description:"Nome comum, possível homonímia",factor_type:"HOMONIMO"}},classification:"BAIXO",recommendations:["Verificar CPF e documentos","Confirmar identidade antes de ação"],calculated_at:new Date().toISOString()},classificacao:"NORMAL",alerta_prova_emprestada:!1,recomendacao_acao:"Verificar identidade",risk_level:"BAIXO",last_updated:new Date().toISOString()}],scoring_metrics:{total_casos_analisados:1250,distribuicao_scores:{critico:3,alto:15,medio:125,baixo:850,minimo:257},avg_score:28.5,casos_contradita_recomendada:18,casos_investigacao_necessaria:25,accuracy_rate:.94},resumo_executivo:{total_processos:1250,processos_criticos:3,padroes_detectados:5,risco_geral:"MEDIO",confiabilidade_analise:94,observacoes_gerais:"A análise identificou padrões suspeitos concentrados em um pequeno grupo de testemunhas e advogados. Embora a maioria dos casos apresente baixo risco, há evidências claras de esquemas organizados de fraude testemunhal que requerem ação imediata. A concentração geográfica e temporal dos padrões sugere coordenação entre os envolvidos."},recomendacoes:{imediatas:["Contraditar testemunhas críticas (Maria Santos, Carlos Mendes) em todos os processos pendentes","Notificar Ministério Público sobre possível esquema organizado de fraude","Suspender andamento dos processos com score ≥ 85 até investigação completa","Implementar verificação de CPF obrigatória para todas as testemunhas"],curto_prazo:["Desenvolver protocolo de verificação automática de padrões suspeitos","Criar lista de observação para advogados e testemunhas recorrentes","Implementar sistema de alertas para casos similares futuros","Treinar equipe jurídica sobre identificação de padrões de fraude"],longo_prazo:["Estabelecer parcerias com outros escritórios para compartilhamento de inteligência","Desenvolver banco de dados nacional de testemunhas suspeitas","Criar metodologia de scoring preventivo para novos casos","Implementar auditoria trimestral de padrões emergentes"]},roi:{investimento:5e4,retorno:15e4,percentual:200}};function wr(){return e.jsx(pr,{children:e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Relatório Conclusivo"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Template para geração de relatórios conclusivos de análise de padrões"})]})}),e.jsx(vr,{mockData:jr})]})})}const Ar=Object.freeze(Object.defineProperty({__proto__:null,default:wr},Symbol.toStringTag,{value:"Module"}));export{pr as A,it as C,Ta as D,Ar as R,kn as a,Ha as b,kr as c,Pr as d,Or as f,Ee as g,ke as h,$ as i,rr as p,bt as u};
