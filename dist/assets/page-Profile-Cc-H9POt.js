import{j as e,r as b,bQ as O,bR as J,bS as Q,bq as Z,L as ee,bs as se,by as U,bT as re,bw as ae,bU as q,F as oe,M as ie,bV as te,bW as le,G as ne,V as ce,f as C,bX as me,bY as ue,bu as pe,D as F,bj as R,t as fe}from"./vendor-B8znzfp2.js";import{u as d,L as x,I as D,T as de,a as Ne,b as P,c as S}from"./page-Login-C96z17Ba.js";import{j as T,s as n,r as V,v as p,L as I,M as y,u as k,H as be,q as xe,C as h,B as g,n as _,p as A,o as he}from"./page-About-Cx_WpGeO.js";import{S as L,a as B,b as G,c as $,d as v,e as ve,A as je,f as we,g as ge,h as Ee,i as De,j as ke,k as Ve,l as ye,m as Te}from"./page-MapaPage-BG6nOduL.js";import{T as Pe}from"./page-PortalTitular-CcCJklaH.js";function M({className:s,...r}){return e.jsxDEV("div",{className:T("animate-shimmer rounded-md bg-muted relative overflow-hidden",s),...r},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/skeleton.tsx",lineNumber:9,columnNumber:5},this)}const K=b.forwardRef(({className:s,...r},o)=>e.jsxDEV(O,{ref:o,className:T("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/avatar.tsx",lineNumber:10,columnNumber:3},void 0));K.displayName=O.displayName;const W=b.forwardRef(({className:s,...r},o)=>e.jsxDEV(J,{ref:o,className:T("aspect-square h-full w-full",s),...r},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/avatar.tsx",lineNumber:25,columnNumber:3},void 0));W.displayName=J.displayName;const H=b.forwardRef(({className:s,...r},o)=>e.jsxDEV(Q,{ref:o,className:T("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r},void 0,!1,{fileName:"/workspaces/assitjur/src/components/ui/avatar.tsx",lineNumber:37,columnNumber:3},void 0));H.displayName=Q.displayName;function Se({currentAvatarUrl:s,userInitials:r="U",onUpload:o,isUploading:t=!1}){const[u,f]=b.useState(null),i=b.useCallback(w=>{const N=w[0];if(!N)return;if(N.size>2*1024*1024){d.error("Arquivo muito grande. Tamanho máximo: 2MB");return}if(!N.type.startsWith("image/")){d.error("Tipo de arquivo inválido. Use imagens (JPEG, PNG, WebP)");return}const E=new FileReader;E.onloadend=()=>{f(E.result)},E.readAsDataURL(N),o(N)},[o]),{getRootProps:l,getInputProps:c,isDragActive:a}=Z({onDrop:i,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"image/webp":[".webp"]},maxSize:2*1024*1024,multiple:!1}),j=u||s;return e.jsxDEV("div",{className:"flex flex-col items-center gap-4",children:[e.jsxDEV(K,{className:"h-32 w-32",children:[e.jsxDEV(W,{src:j||void 0,alt:"Avatar"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/AvatarUpload.tsx",lineNumber:68,columnNumber:9},this),e.jsxDEV(H,{className:"text-2xl bg-primary text-primary-foreground",children:r},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/AvatarUpload.tsx",lineNumber:69,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/AvatarUpload.tsx",lineNumber:67,columnNumber:7},this),e.jsxDEV("div",{...l(),className:`
          border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors
          ${a?"border-primary bg-primary/5":"border-border hover:border-primary"}
          ${t?"opacity-50 pointer-events-none":""}
        `,children:[e.jsxDEV("input",{...c()},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/AvatarUpload.tsx",lineNumber:82,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col items-center gap-2",children:[t?e.jsxDEV(ee,{className:"h-8 w-8 text-primary animate-spin"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/AvatarUpload.tsx",lineNumber:86,columnNumber:13},this):a?e.jsxDEV(se,{className:"h-8 w-8 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/AvatarUpload.tsx",lineNumber:88,columnNumber:13},this):e.jsxDEV(U,{className:"h-8 w-8 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/AvatarUpload.tsx",lineNumber:90,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium",children:t?"Fazendo upload...":a?"Solte a imagem aqui":"Clique ou arraste uma imagem"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/AvatarUpload.tsx",lineNumber:94,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"JPEG, PNG ou WebP (máx. 2MB)"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/AvatarUpload.tsx",lineNumber:101,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/AvatarUpload.tsx",lineNumber:93,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/AvatarUpload.tsx",lineNumber:84,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/AvatarUpload.tsx",lineNumber:74,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/AvatarUpload.tsx",lineNumber:66,columnNumber:5},this)}function z(){const s=re(),{data:r,isLoading:o,error:t}=ae({queryKey:["profile"],queryFn:async()=>{const{data:{user:i}}=await n.auth.getUser();if(!i)throw new Error("Usuário não autenticado");const{data:l,error:c}=await n.from("profiles").select("*").eq("user_id",i.id).single();if(c)throw c;return l}}),u=q({mutationFn:async i=>{const{data:{user:l}}=await n.auth.getUser();if(!l)throw new Error("Usuário não autenticado");const{data:c,error:a}=await n.from("profiles").update(i).eq("user_id",l.id).select().single();if(a)throw a;return c},onSuccess:()=>{s.invalidateQueries({queryKey:["profile"]}),d.success("Perfil atualizado com sucesso!")},onError:i=>{d.error(`Erro ao atualizar perfil: ${i.message}`)}}),f=q({mutationFn:async i=>{const{data:{user:l}}=await n.auth.getUser();if(!l)throw new Error("Usuário não autenticado");const c=i.name.split(".").pop(),a=`${l.id}/avatar.${c}`,{error:j}=await n.storage.from("avatars").upload(a,i,{upsert:!0});if(j)throw j;const{data:{publicUrl:w}}=n.storage.from("avatars").getPublicUrl(a),{error:N}=await n.from("profiles").update({avatar_url:w}).eq("user_id",l.id);if(N)throw N;return w},onSuccess:()=>{s.invalidateQueries({queryKey:["profile"]}),d.success("Avatar atualizado com sucesso!")},onError:i=>{d.error(`Erro ao fazer upload do avatar: ${i.message}`)}});return{profile:r,isLoading:o,error:t,updateProfile:u,uploadAvatar:f}}const Ie=V({full_name:p().min(3,"Nome deve ter pelo menos 3 caracteres").max(100,"Nome muito longo"),email:p().email("Email inválido"),phone:p().regex(/^\(\d{2}\) \d{4,5}-\d{4}$/,"Telefone inválido (formato: (11) 98765-4321)").optional().or(y("")),job_title:p().max(100,"Cargo muito longo").optional().or(y("")),language:I(["pt-BR","en-US","es-ES"]),timezone:p().min(1,"Selecione um fuso horário")});V({language:I(["pt-BR","en-US","es-ES"]),timezone:p().min(1,"Selecione um fuso horário"),theme_preference:I(["light","dark","system"]),email_notifications:V({system_alerts:k(),weekly_reports:k(),security_alerts:k()})});const $e=V({name:p().min(3,"Nome deve ter pelo menos 3 caracteres").max(100,"Nome muito longo"),code:p().min(2,"Código muito curto").max(20,"Código muito longo"),domain:p().url("Domínio inválido").optional().or(y("")),cnpj:p().regex(/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/,"CNPJ inválido (formato: 12.345.678/0001-90)").optional().or(y("")),primary_color:p().regex(/^#[0-9A-Fa-f]{6}$/,"Cor primária inválida (formato: #RRGGBB)"),secondary_color:p().regex(/^#[0-9A-Fa-f]{6}$/,"Cor secundária inválida (formato: #RRGGBB)"),session_timeout_minutes:be().min(5,"Mínimo de 5 minutos").max(480,"Máximo de 8 horas"),allow_concurrent_sessions:k()});function _e(){const{profile:s,updateProfile:r,uploadAvatar:o}=z(),[t,u]=b.useState(!1),{register:f,handleSubmit:i,setValue:l,watch:c,formState:{errors:a,isDirty:j}}=oe({resolver:xe(Ie),values:{full_name:s?.full_name||"",email:s?.email||"",phone:s?.phone||"",job_title:s?.job_title||"",language:s?.language||"pt-BR",timezone:s?.timezone||"America/Sao_Paulo"}}),w=c("language"),N=c("timezone"),E=async m=>{u(!0);try{await r.mutateAsync(m)}finally{u(!1)}},Y=m=>{o.mutate(m)},X=()=>{if(s?.full_name){const m=s.full_name.split(" ");return m.length>=2?`${m[0][0]}${m[m.length-1][0]}`.toUpperCase():m[0][0].toUpperCase()}return"U"};return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV(h,{className:"p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Foto de Perfil"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:74,columnNumber:9},this),e.jsxDEV(Se,{currentAvatarUrl:s?.avatar_url,userInitials:X(),onUpload:Y,isUploading:o.isPending},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:75,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:73,columnNumber:7},this),e.jsxDEV(h,{className:"p-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Informações Pessoais"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:84,columnNumber:9},this),e.jsxDEV("form",{onSubmit:i(E),className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(x,{htmlFor:"full_name",children:"Nome Completo *"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:87,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:89,columnNumber:15},this),e.jsxDEV(D,{id:"full_name",...f("full_name"),placeholder:"João da Silva",className:"pl-10"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:90,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:88,columnNumber:13},this),a.full_name&&e.jsxDEV("p",{className:"text-sm text-destructive",children:a.full_name.message},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:98,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:86,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(x,{htmlFor:"email",children:"Email *"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:105,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:107,columnNumber:15},this),e.jsxDEV(D,{id:"email",type:"email",...f("email"),placeholder:"joao@exemplo.com",className:"pl-10",disabled:!0},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:108,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:106,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Email não pode ser alterado"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:117,columnNumber:13},this),a.email&&e.jsxDEV("p",{className:"text-sm text-destructive",children:a.email.message},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:121,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:104,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(x,{htmlFor:"phone",children:"Telefone"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:126,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(te,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:128,columnNumber:15},this),e.jsxDEV(D,{id:"phone",...f("phone"),placeholder:"(11) 98765-4321",className:"pl-10"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:129,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:127,columnNumber:13},this),a.phone&&e.jsxDEV("p",{className:"text-sm text-destructive",children:a.phone.message},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:137,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:125,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(x,{htmlFor:"job_title",children:"Cargo"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:142,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(le,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:144,columnNumber:15},this),e.jsxDEV(D,{id:"job_title",...f("job_title"),placeholder:"Advogado",className:"pl-10"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:145,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:143,columnNumber:13},this),a.job_title&&e.jsxDEV("p",{className:"text-sm text-destructive",children:a.job_title.message},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:153,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:141,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(x,{htmlFor:"language",children:"Idioma"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:161,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground z-10 pointer-events-none"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:163,columnNumber:17},this),e.jsxDEV(L,{value:w,onValueChange:m=>l("language",m,{shouldDirty:!0}),children:[e.jsxDEV(B,{className:"pl-10",children:e.jsxDEV(G,{},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:173,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:172,columnNumber:19},this),e.jsxDEV($,{children:[e.jsxDEV(v,{value:"pt-BR",children:"Português (Brasil)"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:176,columnNumber:21},this),e.jsxDEV(v,{value:"en-US",children:"English (US)"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:177,columnNumber:21},this),e.jsxDEV(v,{value:"es-ES",children:"Español"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:178,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:175,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:164,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:162,columnNumber:15},this),a.language&&e.jsxDEV("p",{className:"text-sm text-destructive",children:a.language.message},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:183,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:160,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(x,{htmlFor:"timezone",children:"Fuso Horário"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:190,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground z-10 pointer-events-none"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:192,columnNumber:17},this),e.jsxDEV(L,{value:N,onValueChange:m=>l("timezone",m,{shouldDirty:!0}),children:[e.jsxDEV(B,{className:"pl-10",children:e.jsxDEV(G,{},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:200,columnNumber:21},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:199,columnNumber:19},this),e.jsxDEV($,{children:[e.jsxDEV(v,{value:"America/Sao_Paulo",children:"São Paulo (UTC-3)"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:203,columnNumber:21},this),e.jsxDEV(v,{value:"America/New_York",children:"Nova York (UTC-5)"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:206,columnNumber:21},this),e.jsxDEV(v,{value:"Europe/London",children:"Londres (UTC+0)"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:209,columnNumber:21},this),e.jsxDEV(v,{value:"Asia/Tokyo",children:"Tóquio (UTC+9)"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:212,columnNumber:21},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:202,columnNumber:19},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:193,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:191,columnNumber:15},this),a.timezone&&e.jsxDEV("p",{className:"text-sm text-destructive",children:a.timezone.message},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:217,columnNumber:17},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:189,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:159,columnNumber:11},this),e.jsxDEV("div",{className:"flex justify-end gap-2 pt-4",children:e.jsxDEV(g,{type:"submit",disabled:!j||t,isLoading:t,children:"Salvar Alterações"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:225,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:224,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:85,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:83,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PersonalInfoTab.tsx",lineNumber:72,columnNumber:5},this)}function Ae(){return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV(h,{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV(C,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:13,columnNumber:11},this),e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Autenticação de Dois Fatores (2FA)"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:14,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:12,columnNumber:9},this),e.jsxDEV(_,{className:"mb-4",children:e.jsxDEV(A,{children:"Adicione uma camada extra de segurança à sua conta com autenticação de dois fatores."},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:20,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:19,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"space-y-0.5",children:[e.jsxDEV(x,{htmlFor:"2fa-toggle",children:"Ativar 2FA"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:28,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Use um aplicativo de autenticação para gerar códigos"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:29,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:27,columnNumber:11},this),e.jsxDEV(ve,{id:"2fa-toggle"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:33,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:26,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:11,columnNumber:7},this),e.jsxDEV(h,{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV(me,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:39,columnNumber:11},this),e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Senha"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:40,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:38,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-4",children:"Altere sua senha regularmente para manter sua conta segura"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:43,columnNumber:9},this),e.jsxDEV(g,{variant:"outline",children:"Alterar Senha"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:47,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:37,columnNumber:7},this),e.jsxDEV(h,{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV(ue,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:52,columnNumber:11},this),e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Sessões Ativas"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:53,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:51,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-4",children:"Gerencie dispositivos conectados à sua conta"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:56,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-3",children:e.jsxDEV("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:"Navegador atual"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:63,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Última atividade: agora"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:64,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:62,columnNumber:13},this),e.jsxDEV(g,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive",children:"Encerrar"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:68,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:61,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:60,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:50,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/SecurityTab.tsx",lineNumber:10,columnNumber:5},this)}async function Ue(){const{data:{user:s}}=await n.auth.getUser();if(!s)throw new Error("Usuário não autenticado");const{data:r}=await n.from("profiles").select("organization_id, email").eq("user_id",s.id).single();if(!r)throw new Error("Perfil não encontrado");const{data:o,error:t}=await n.from("lgpd_requests").insert({org_id:r.organization_id,user_id:s.id,request_type:"DATA_EXPORT",requested_by_email:r.email,status:"PENDING"}).select().single();if(t)throw t;return o}async function Ce(s){const{data:{user:r}}=await n.auth.getUser();if(!r)throw new Error("Usuário não autenticado");const{data:o}=await n.from("profiles").select("organization_id, email").eq("user_id",r.id).single();if(!o)throw new Error("Perfil não encontrado");const{data:t,error:u}=await n.from("lgpd_requests").insert({org_id:o.organization_id,user_id:r.id,request_type:"ACCOUNT_DELETION",requested_by_email:o.email,justification:s,status:"PENDING"}).select().single();if(u)throw u;return t}function ze(){const{profile:s}=z(),[r,o]=b.useState(""),[t,u]=b.useState(!1),[f,i]=b.useState(!1),l=async()=>{u(!0);try{await Ue(),d.success("Solicitação enviada! Você receberá seus dados por email em até 48h.")}catch{d.error("Erro ao solicitar exportação de dados")}finally{u(!1)}},c=async()=>{if(!r.trim()){d.error("Por favor, informe um motivo para a exclusão");return}i(!0);try{await Ce(r),d.success("Solicitação enviada! Sua conta será excluída em até 30 dias."),o("")}catch{d.error("Erro ao solicitar exclusão de conta")}finally{i(!1)}};return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV(_,{children:[e.jsxDEV(C,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:69,columnNumber:9},this),e.jsxDEV(he,{children:"Seus Direitos de Privacidade (LGPD)"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:70,columnNumber:9},this),e.jsxDEV(A,{children:"Você tem o direito de acessar, corrigir, deletar ou exportar seus dados pessoais a qualquer momento."},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:71,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:68,columnNumber:7},this),e.jsxDEV(h,{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV(pe,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:79,columnNumber:11},this),e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Termos de Uso"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:80,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:78,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-4",children:["Você aceitou os termos de uso em:"," ",e.jsxDEV("strong",{children:s?.terms_accepted_at?new Date(s.terms_accepted_at).toLocaleDateString("pt-BR"):"Não aceito"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:85,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:83,columnNumber:9},this),e.jsxDEV(g,{variant:"outline",size:"sm",children:"Visualizar Termos"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:92,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:77,columnNumber:7},this),e.jsxDEV(h,{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV(F,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:99,columnNumber:11},this),e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Exportar Dados"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:100,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:98,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mb-4",children:"Solicite uma cópia de todos os seus dados pessoais armazenados em nossa plataforma. Você receberá um arquivo JSON por email em até 48 horas."},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:103,columnNumber:9},this),e.jsxDEV(g,{variant:"outline",onClick:l,isLoading:t,disabled:t,children:[e.jsxDEV(F,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:115,columnNumber:11},this),"Solicitar Exportação"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:109,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:97,columnNumber:7},this),e.jsxDEV(h,{className:"p-6 border-destructive/50",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV(R,{className:"h-5 w-5 text-destructive"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:122,columnNumber:11},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-destructive",children:"Excluir Conta"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:123,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:121,columnNumber:9},this),e.jsxDEV(_,{variant:"destructive",className:"mb-4",children:e.jsxDEV(A,{children:[e.jsxDEV("strong",{children:"Atenção:"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:130,columnNumber:13},this)," Esta ação é irreversível. Todos os seus dados serão permanentemente excluídos após 30 dias."]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:129,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:128,columnNumber:9},this),e.jsxDEV(je,{children:[e.jsxDEV(we,{asChild:!0,children:e.jsxDEV(g,{variant:"destructive",children:[e.jsxDEV(R,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:138,columnNumber:15},this),"Solicitar Exclusão de Conta"]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:137,columnNumber:13},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:136,columnNumber:11},this),e.jsxDEV(ge,{children:[e.jsxDEV(Ee,{children:[e.jsxDEV(De,{children:"Tem certeza?"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:144,columnNumber:15},this),e.jsxDEV(ke,{children:"Esta ação não pode ser desfeita. Seus dados serão permanentemente excluídos após um período de 30 dias."},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:145,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:143,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(x,{htmlFor:"deletion-reason",children:"Motivo da exclusão (obrigatório)"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:152,columnNumber:15},this),e.jsxDEV(Pe,{id:"deletion-reason",value:r,onChange:a=>o(a.target.value),placeholder:"Por favor, nos diga por que você está excluindo sua conta...",rows:4},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:155,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:151,columnNumber:13},this),e.jsxDEV(Ve,{children:[e.jsxDEV(ye,{children:"Cancelar"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:165,columnNumber:15},this),e.jsxDEV(Te,{onClick:c,disabled:!r.trim()||f,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:f?"Processando...":"Confirmar Exclusão"},void 0,!1,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:166,columnNumber:15},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:164,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:142,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:135,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:120,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/components/profile/PrivacyTab.tsx",lineNumber:67,columnNumber:5},this)}function qe(){const{isLoading:s}=z();return s?e.jsxDEV("div",{className:"container mx-auto p-6 max-w-4xl space-y-6",children:[e.jsxDEV(M,{className:"h-10 w-48"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:15,columnNumber:9},this),e.jsxDEV(M,{className:"h-[600px] w-full"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:16,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:14,columnNumber:7},this):e.jsxDEV("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight",children:"Meu Perfil"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:24,columnNumber:9},this),e.jsxDEV("p",{className:"text-muted-foreground mt-2",children:"Gerencie suas informações pessoais e preferências individuais"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:25,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:23,columnNumber:7},this),e.jsxDEV(de,{defaultValue:"personal",className:"space-y-6",children:[e.jsxDEV(Ne,{className:"grid w-full grid-cols-3",children:[e.jsxDEV(P,{value:"personal",className:"gap-2",children:[e.jsxDEV(U,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:33,columnNumber:13},this),e.jsxDEV("span",{className:"hidden sm:inline",children:"Pessoal"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:34,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:32,columnNumber:11},this),e.jsxDEV(P,{value:"security",className:"gap-2",children:[e.jsxDEV(C,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:37,columnNumber:13},this),e.jsxDEV("span",{className:"hidden sm:inline",children:"Segurança"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:38,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:36,columnNumber:11},this),e.jsxDEV(P,{value:"privacy",className:"gap-2",children:[e.jsxDEV(fe,{className:"h-4 w-4"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:41,columnNumber:13},this),e.jsxDEV("span",{className:"hidden sm:inline",children:"Privacidade"},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:42,columnNumber:13},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:40,columnNumber:11},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:31,columnNumber:9},this),e.jsxDEV(S,{value:"personal",children:e.jsxDEV(_e,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:47,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:46,columnNumber:9},this),e.jsxDEV(S,{value:"security",children:e.jsxDEV(Ae,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:51,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:50,columnNumber:9},this),e.jsxDEV(S,{value:"privacy",children:e.jsxDEV(ze,{},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:55,columnNumber:11},this)},void 0,!1,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:54,columnNumber:9},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:30,columnNumber:7},this)]},void 0,!0,{fileName:"/workspaces/assitjur/src/pages/Profile.tsx",lineNumber:22,columnNumber:5},this)}const Me=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"}));export{K as A,Me as P,M as S,H as a,W as b,$e as o};
