import{R as l,r as x,X as Bt,Y as zt,j as t,_ as Vt,$ as ht,a0 as gt,a1 as pt,a2 as xt,a3 as Ht,a4 as Yt,a5 as vt,a6 as Wt,a7 as qt,z as Ce,a8 as Gt,y as He,a9 as ze,p as Ve,F as ie,v as wt,J as nt,aa as it,ab as Jt,ac as Kt,x as Xt,u as Zt,ad as Qt}from"./vendor-B4dDctVk.js";import{s as I,t as ea,h as Te,g as ce,i as bt,a as G,C as ta,j as aa,k as ra,l as sa,m as oa,n as yt,o as Nt,p as Et,q as Xe,r as pe,u as jt,v as Ye,B as na,w as ia}from"./page-About-BOeQq8Je.js";var la=a=>{switch(a){case"success":return ua;case"info":return fa;case"warning":return ma;case"error":return ha;default:return null}},ca=Array(12).fill(0),da=({visible:a,className:e})=>l.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":a},l.createElement("div",{className:"sonner-spinner"},ca.map((s,o)=>l.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${o}`})))),ua=l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},l.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ma=l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},l.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),fa=l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},l.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ha=l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},l.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ga=l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},l.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),pa=()=>{let[a,e]=l.useState(document.hidden);return l.useEffect(()=>{let s=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),a},We=1,xa=class{constructor(){this.subscribe=a=>(this.subscribers.push(a),()=>{let e=this.subscribers.indexOf(a);this.subscribers.splice(e,1)}),this.publish=a=>{this.subscribers.forEach(e=>e(a))},this.addToast=a=>{this.publish(a),this.toasts=[...this.toasts,a]},this.create=a=>{var e;let{message:s,...o}=a,n=typeof a?.id=="number"||((e=a.id)==null?void 0:e.length)>0?a.id:We++,u=this.toasts.find(d=>d.id===n),f=a.dismissible===void 0?!0:a.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),u?this.toasts=this.toasts.map(d=>d.id===n?(this.publish({...d,...a,id:n,title:s}),{...d,...a,id:n,dismissible:f,title:s}):d):this.addToast({title:s,...o,dismissible:f,id:n}),n},this.dismiss=a=>(this.dismissedToasts.add(a),a||this.toasts.forEach(e=>{this.subscribers.forEach(s=>s({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:a,dismiss:!0})),a),this.message=(a,e)=>this.create({...e,message:a}),this.error=(a,e)=>this.create({...e,message:a,type:"error"}),this.success=(a,e)=>this.create({...e,type:"success",message:a}),this.info=(a,e)=>this.create({...e,type:"info",message:a}),this.warning=(a,e)=>this.create({...e,type:"warning",message:a}),this.loading=(a,e)=>this.create({...e,type:"loading",message:a}),this.promise=(a,e)=>{if(!e)return;let s;e.loading!==void 0&&(s=this.create({...e,promise:a,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let o=a instanceof Promise?a:a(),n=s!==void 0,u,f=o.then(async i=>{if(u=["resolve",i],l.isValidElement(i))n=!1,this.create({id:s,type:"default",message:i});else if(wa(i)&&!i.ok){n=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${i.status}`):e.error,m=typeof e.description=="function"?await e.description(`HTTP error! status: ${i.status}`):e.description;this.create({id:s,type:"error",message:c,description:m})}else if(e.success!==void 0){n=!1;let c=typeof e.success=="function"?await e.success(i):e.success,m=typeof e.description=="function"?await e.description(i):e.description;this.create({id:s,type:"success",message:c,description:m})}}).catch(async i=>{if(u=["reject",i],e.error!==void 0){n=!1;let c=typeof e.error=="function"?await e.error(i):e.error,m=typeof e.description=="function"?await e.description(i):e.description;this.create({id:s,type:"error",message:c,description:m})}}).finally(()=>{var i;n&&(this.dismiss(s),s=void 0),(i=e.finally)==null||i.call(e)}),d=()=>new Promise((i,c)=>f.then(()=>u[0]==="reject"?c(u[1]):i(u[1])).catch(c));return typeof s!="string"&&typeof s!="number"?{unwrap:d}:Object.assign(s,{unwrap:d})},this.custom=(a,e)=>{let s=e?.id||We++;return this.create({jsx:a(s),id:s,...e}),s},this.getActiveToasts=()=>this.toasts.filter(a=>!this.dismissedToasts.has(a.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},$=new xa,va=(a,e)=>{let s=e?.id||We++;return $.addToast({title:a,...e,id:s}),s},wa=a=>a&&typeof a=="object"&&"ok"in a&&typeof a.ok=="boolean"&&"status"in a&&typeof a.status=="number",ba=va,ya=()=>$.toasts,Na=()=>$.getActiveToasts(),D=Object.assign(ba,{success:$.success,info:$.info,warning:$.warning,error:$.error,custom:$.custom,message:$.message,promise:$.promise,dismiss:$.dismiss,loading:$.loading},{getHistory:ya,getToasts:Na});function Ea(a,{insertAt:e}={}){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",e==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=a:o.appendChild(document.createTextNode(a))}Ea(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Me(a){return a.label!==void 0}var ja=3,Sa="32px",Aa="16px",lt=4e3,ka=356,Ta=14,Ca=20,Ra=200;function Q(...a){return a.filter(Boolean).join(" ")}function Ia(a){let[e,s]=a.split("-"),o=[];return e&&o.push(e),s&&o.push(s),o}var Ma=a=>{var e,s,o,n,u,f,d,i,c,m,g;let{invert:w,toast:r,unstyled:b,interacting:S,setHeights:_,visibleToasts:P,heights:L,index:h,toasts:C,expanded:y,removeToast:E,defaultRichColors:v,closeButton:U,style:B,cancelButtonStyle:ee,actionButtonStyle:J,className:O="",descriptionClassName:de="",duration:ue,position:me,gap:z,loadingIcon:W,expandByDefault:xe,classNames:N,icons:V,closeButtonAriaLabel:Pe="Close toast",pauseWhenPageIsHidden:A}=a,[k,R]=l.useState(null),[F,ve]=l.useState(null),[M,Oe]=l.useState(!1),[Ee,Re]=l.useState(!1),[je,Fe]=l.useState(!1),[Ze,Tt]=l.useState(!1),[Ct,Qe]=l.useState(!1),[Rt,$e]=l.useState(0),[It,et]=l.useState(0),Se=l.useRef(r.duration||ue||lt),tt=l.useRef(null),fe=l.useRef(null),Mt=h===0,Lt=h+1<=P,q=r.type,we=r.dismissible!==!1,Dt=r.className||"",_t=r.descriptionClassName||"",Ie=l.useMemo(()=>L.findIndex(p=>p.toastId===r.id)||0,[L,r.id]),Pt=l.useMemo(()=>{var p;return(p=r.closeButton)!=null?p:U},[r.closeButton,U]),at=l.useMemo(()=>r.duration||ue||lt,[r.duration,ue]),Ue=l.useRef(0),be=l.useRef(0),rt=l.useRef(0),ye=l.useRef(null),[Ot,Ft]=me.split("-"),st=l.useMemo(()=>L.reduce((p,j,T)=>T>=Ie?p:p+j.height,0),[L,Ie]),ot=pa(),$t=r.invert||w,Be=q==="loading";be.current=l.useMemo(()=>Ie*z+st,[Ie,st]),l.useEffect(()=>{Se.current=at},[at]),l.useEffect(()=>{Oe(!0)},[]),l.useEffect(()=>{let p=fe.current;if(p){let j=p.getBoundingClientRect().height;return et(j),_(T=>[{toastId:r.id,height:j,position:r.position},...T]),()=>_(T=>T.filter(K=>K.toastId!==r.id))}},[_,r.id]),l.useLayoutEffect(()=>{if(!M)return;let p=fe.current,j=p.style.height;p.style.height="auto";let T=p.getBoundingClientRect().height;p.style.height=j,et(T),_(K=>K.find(X=>X.toastId===r.id)?K.map(X=>X.toastId===r.id?{...X,height:T}:X):[{toastId:r.id,height:T,position:r.position},...K])},[M,r.title,r.description,_,r.id]);let re=l.useCallback(()=>{Re(!0),$e(be.current),_(p=>p.filter(j=>j.toastId!==r.id)),setTimeout(()=>{E(r)},Ra)},[r,E,_,be]);l.useEffect(()=>{if(r.promise&&q==="loading"||r.duration===1/0||r.type==="loading")return;let p;return y||S||A&&ot?(()=>{if(rt.current<Ue.current){let j=new Date().getTime()-Ue.current;Se.current=Se.current-j}rt.current=new Date().getTime()})():Se.current!==1/0&&(Ue.current=new Date().getTime(),p=setTimeout(()=>{var j;(j=r.onAutoClose)==null||j.call(r,r),re()},Se.current)),()=>clearTimeout(p)},[y,S,r,q,A,ot,re]),l.useEffect(()=>{r.delete&&re()},[re,r.delete]);function Ut(){var p,j,T;return V!=null&&V.loading?l.createElement("div",{className:Q(N?.loader,(p=r?.classNames)==null?void 0:p.loader,"sonner-loader"),"data-visible":q==="loading"},V.loading):W?l.createElement("div",{className:Q(N?.loader,(j=r?.classNames)==null?void 0:j.loader,"sonner-loader"),"data-visible":q==="loading"},W):l.createElement(da,{className:Q(N?.loader,(T=r?.classNames)==null?void 0:T.loader),visible:q==="loading"})}return l.createElement("li",{tabIndex:0,ref:fe,className:Q(O,Dt,N?.toast,(e=r?.classNames)==null?void 0:e.toast,N?.default,N?.[q],(s=r?.classNames)==null?void 0:s[q]),"data-sonner-toast":"","data-rich-colors":(o=r.richColors)!=null?o:v,"data-styled":!(r.jsx||r.unstyled||b),"data-mounted":M,"data-promise":!!r.promise,"data-swiped":Ct,"data-removed":Ee,"data-visible":Lt,"data-y-position":Ot,"data-x-position":Ft,"data-index":h,"data-front":Mt,"data-swiping":je,"data-dismissible":we,"data-type":q,"data-invert":$t,"data-swipe-out":Ze,"data-swipe-direction":F,"data-expanded":!!(y||xe&&M),style:{"--index":h,"--toasts-before":h,"--z-index":C.length-h,"--offset":`${Ee?Rt:be.current}px`,"--initial-height":xe?"auto":`${It}px`,...B,...r.style},onDragEnd:()=>{Fe(!1),R(null),ye.current=null},onPointerDown:p=>{Be||!we||(tt.current=new Date,$e(be.current),p.target.setPointerCapture(p.pointerId),p.target.tagName!=="BUTTON"&&(Fe(!0),ye.current={x:p.clientX,y:p.clientY}))},onPointerUp:()=>{var p,j,T,K;if(Ze||!we)return;ye.current=null;let X=Number(((p=fe.current)==null?void 0:p.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),se=Number(((j=fe.current)==null?void 0:j.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),he=new Date().getTime()-((T=tt.current)==null?void 0:T.getTime()),Z=k==="x"?X:se,oe=Math.abs(Z)/he;if(Math.abs(Z)>=Ca||oe>.11){$e(be.current),(K=r.onDismiss)==null||K.call(r,r),ve(k==="x"?X>0?"right":"left":se>0?"down":"up"),re(),Tt(!0),Qe(!1);return}Fe(!1),R(null)},onPointerMove:p=>{var j,T,K,X;if(!ye.current||!we||((j=window.getSelection())==null?void 0:j.toString().length)>0)return;let se=p.clientY-ye.current.y,he=p.clientX-ye.current.x,Z=(T=a.swipeDirections)!=null?T:Ia(me);!k&&(Math.abs(he)>1||Math.abs(se)>1)&&R(Math.abs(he)>Math.abs(se)?"x":"y");let oe={x:0,y:0};k==="y"?(Z.includes("top")||Z.includes("bottom"))&&(Z.includes("top")&&se<0||Z.includes("bottom")&&se>0)&&(oe.y=se):k==="x"&&(Z.includes("left")||Z.includes("right"))&&(Z.includes("left")&&he<0||Z.includes("right")&&he>0)&&(oe.x=he),(Math.abs(oe.x)>0||Math.abs(oe.y)>0)&&Qe(!0),(K=fe.current)==null||K.style.setProperty("--swipe-amount-x",`${oe.x}px`),(X=fe.current)==null||X.style.setProperty("--swipe-amount-y",`${oe.y}px`)}},Pt&&!r.jsx?l.createElement("button",{"aria-label":Pe,"data-disabled":Be,"data-close-button":!0,onClick:Be||!we?()=>{}:()=>{var p;re(),(p=r.onDismiss)==null||p.call(r,r)},className:Q(N?.closeButton,(n=r?.classNames)==null?void 0:n.closeButton)},(u=V?.close)!=null?u:ga):null,r.jsx||x.isValidElement(r.title)?r.jsx?r.jsx:typeof r.title=="function"?r.title():r.title:l.createElement(l.Fragment,null,q||r.icon||r.promise?l.createElement("div",{"data-icon":"",className:Q(N?.icon,(f=r?.classNames)==null?void 0:f.icon)},r.promise||r.type==="loading"&&!r.icon?r.icon||Ut():null,r.type!=="loading"?r.icon||V?.[q]||la(q):null):null,l.createElement("div",{"data-content":"",className:Q(N?.content,(d=r?.classNames)==null?void 0:d.content)},l.createElement("div",{"data-title":"",className:Q(N?.title,(i=r?.classNames)==null?void 0:i.title)},typeof r.title=="function"?r.title():r.title),r.description?l.createElement("div",{"data-description":"",className:Q(de,_t,N?.description,(c=r?.classNames)==null?void 0:c.description)},typeof r.description=="function"?r.description():r.description):null),x.isValidElement(r.cancel)?r.cancel:r.cancel&&Me(r.cancel)?l.createElement("button",{"data-button":!0,"data-cancel":!0,style:r.cancelButtonStyle||ee,onClick:p=>{var j,T;Me(r.cancel)&&we&&((T=(j=r.cancel).onClick)==null||T.call(j,p),re())},className:Q(N?.cancelButton,(m=r?.classNames)==null?void 0:m.cancelButton)},r.cancel.label):null,x.isValidElement(r.action)?r.action:r.action&&Me(r.action)?l.createElement("button",{"data-button":!0,"data-action":!0,style:r.actionButtonStyle||J,onClick:p=>{var j,T;Me(r.action)&&((T=(j=r.action).onClick)==null||T.call(j,p),!p.defaultPrevented&&re())},className:Q(N?.actionButton,(g=r?.classNames)==null?void 0:g.actionButton)},r.action.label):null))};function ct(){if(typeof window>"u"||typeof document>"u")return"ltr";let a=document.documentElement.getAttribute("dir");return a==="auto"||!a?window.getComputedStyle(document.documentElement).direction:a}function La(a,e){let s={};return[a,e].forEach((o,n)=>{let u=n===1,f=u?"--mobile-offset":"--offset",d=u?Aa:Sa;function i(c){["top","right","bottom","left"].forEach(m=>{s[`${f}-${m}`]=typeof c=="number"?`${c}px`:c})}typeof o=="number"||typeof o=="string"?i(o):typeof o=="object"?["top","right","bottom","left"].forEach(c=>{o[c]===void 0?s[`${f}-${c}`]=d:s[`${f}-${c}`]=typeof o[c]=="number"?`${o[c]}px`:o[c]}):i(d)}),s}var or=x.forwardRef(function(a,e){let{invert:s,position:o="bottom-right",hotkey:n=["altKey","KeyT"],expand:u,closeButton:f,className:d,offset:i,mobileOffset:c,theme:m="light",richColors:g,duration:w,style:r,visibleToasts:b=ja,toastOptions:S,dir:_=ct(),gap:P=Ta,loadingIcon:L,icons:h,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:y}=a,[E,v]=l.useState([]),U=l.useMemo(()=>Array.from(new Set([o].concat(E.filter(A=>A.position).map(A=>A.position)))),[E,o]),[B,ee]=l.useState([]),[J,O]=l.useState(!1),[de,ue]=l.useState(!1),[me,z]=l.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),W=l.useRef(null),xe=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=l.useRef(null),V=l.useRef(!1),Pe=l.useCallback(A=>{v(k=>{var R;return(R=k.find(F=>F.id===A.id))!=null&&R.delete||$.dismiss(A.id),k.filter(({id:F})=>F!==A.id)})},[]);return l.useEffect(()=>$.subscribe(A=>{if(A.dismiss){v(k=>k.map(R=>R.id===A.id?{...R,delete:!0}:R));return}setTimeout(()=>{Bt.flushSync(()=>{v(k=>{let R=k.findIndex(F=>F.id===A.id);return R!==-1?[...k.slice(0,R),{...k[R],...A},...k.slice(R+1)]:[A,...k]})})})}),[]),l.useEffect(()=>{if(m!=="system"){z(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;let A=window.matchMedia("(prefers-color-scheme: dark)");try{A.addEventListener("change",({matches:k})=>{z(k?"dark":"light")})}catch{A.addListener(({matches:R})=>{try{z(R?"dark":"light")}catch(F){console.error(F)}})}},[m]),l.useEffect(()=>{E.length<=1&&O(!1)},[E]),l.useEffect(()=>{let A=k=>{var R,F;n.every(ve=>k[ve]||k.code===ve)&&(O(!0),(R=W.current)==null||R.focus()),k.code==="Escape"&&(document.activeElement===W.current||(F=W.current)!=null&&F.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[n]),l.useEffect(()=>{if(W.current)return()=>{N.current&&(N.current.focus({preventScroll:!0}),N.current=null,V.current=!1)}},[W.current]),l.createElement("section",{ref:e,"aria-label":`${C} ${xe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},U.map((A,k)=>{var R;let[F,ve]=A.split("-");return E.length?l.createElement("ol",{key:A,dir:_==="auto"?ct():_,tabIndex:-1,ref:W,className:d,"data-sonner-toaster":!0,"data-theme":me,"data-y-position":F,"data-lifted":J&&E.length>1&&!u,"data-x-position":ve,style:{"--front-toast-height":`${((R=B[0])==null?void 0:R.height)||0}px`,"--width":`${ka}px`,"--gap":`${P}px`,...r,...La(i,c)},onBlur:M=>{V.current&&!M.currentTarget.contains(M.relatedTarget)&&(V.current=!1,N.current&&(N.current.focus({preventScroll:!0}),N.current=null))},onFocus:M=>{M.target instanceof HTMLElement&&M.target.dataset.dismissible==="false"||V.current||(V.current=!0,N.current=M.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{de||O(!1)},onDragEnd:()=>O(!1),onPointerDown:M=>{M.target instanceof HTMLElement&&M.target.dataset.dismissible==="false"||ue(!0)},onPointerUp:()=>ue(!1)},E.filter(M=>!M.position&&k===0||M.position===A).map((M,Oe)=>{var Ee,Re;return l.createElement(Ma,{key:M.id,icons:h,index:Oe,toast:M,defaultRichColors:g,duration:(Ee=S?.duration)!=null?Ee:w,className:S?.className,descriptionClassName:S?.descriptionClassName,invert:s,visibleToasts:b,closeButton:(Re=S?.closeButton)!=null?Re:f,interacting:de,position:A,style:S?.style,unstyled:S?.unstyled,classNames:S?.classNames,cancelButtonStyle:S?.cancelButtonStyle,actionButtonStyle:S?.actionButtonStyle,removeToast:Pe,toasts:E.filter(je=>je.position==M.position),heights:B.filter(je=>je.position==M.position),setHeights:ee,expandByDefault:u,gap:P,loadingIcon:L,expanded:J,pauseWhenPageIsHidden:y,swipeDirections:a.swipeDirections})})):null}))});async function Le(a,e="VIEWER",s){try{const{data:o,error:n}=await I.rpc("ensure_user_profile",{user_uuid:a.id,user_email:a.email??"",user_role:e,org_id:s||null});return n?(console.error("Error ensuring profile with RPC:",n),null):o}catch(o){return console.error("ensureProfile error:",o),null}}const dt=a=>{let e;const s=new Set,o=(c,m)=>{const g=typeof c=="function"?c(e):c;if(!Object.is(g,e)){const w=e;e=m??(typeof g!="object"||g===null)?g:Object.assign({},e,g),s.forEach(r=>r(e,w))}},n=()=>e,d={setState:o,getState:n,getInitialState:()=>i,subscribe:c=>(s.add(c),()=>s.delete(c))},i=e=a(o,n,d);return d},nr=a=>a?dt(a):dt,Da=zt(a=>({expired:!1,redirectUrl:null,showExpired:e=>a({expired:!0,redirectUrl:e??"/login"}),hideExpired:()=>a({expired:!1,redirectUrl:null})}));class _a{isDevelopment=!1;log(e,s,o,n){const u={level:e,message:s,context:o,timestamp:new Date,service:n};if(this.isDevelopment){const f=o?` ${JSON.stringify(o,null,2)}`:"",d=n?`[${n}] `:"";switch(e){case"error":console.error(`❌ ${d}${s}${f}`);break;case"warn":console.warn(`⚠️ ${d}${s}${f}`);break;case"info":console.log(`ℹ️ ${d}${s}${f}`);break;case"debug":console.debug(`🔍 ${d}${s}${f}`);break}}else console.log(JSON.stringify(u))}info(e,s,o){this.log("info",e,s,o)}warn(e,s,o){this.log("warn",e,s,o)}error(e,s,o){this.log("error",e,s,o)}debug(e,s,o){this.log("debug",e,s,o)}}const _e=new _a,te=(a,e,s)=>_e.error(a,e,s),qe=(a,e,s)=>_e.warn(a,e,s);class Y{static AUTH_ERROR_TYPES=["Invalid Refresh Token","refresh_token_not_found","invalid_token","jwt_invalid","token_expired"];static isHandling=!1;static isAuthError(e){if(!e)return!1;const s=e.message||e.error_description||e.error||"";return this.AUTH_ERROR_TYPES.some(o=>s.toLowerCase().includes(o.toLowerCase()))}static async handleAuthError(e,s={}){if(this.isHandling)return;this.isHandling=!0;const{redirectToLogin:o=!0,showNotification:n=!1,preserveCurrentUrl:u=!0}=s;if(qe("Auth error detected",{error:e.message||e,errorCode:e.code,errorDescription:e.error_description,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href},"AuthErrorHandler"),await this.clearAuthData(),n){const i=this.getErrorTitle(e),c=this.getErrorDescription(e);ea({title:i,description:c,variant:"destructive"})}const f=u?window.location.pathname:"/",d=o&&f!=="/login"?`?redirect=${encodeURIComponent(f)}`:"";setTimeout(()=>{this.isHandling=!1},2e3),Da.getState().showExpired(`/login${d}`)}static getErrorTitle(e){return e.message?.includes("refresh_token")?"Sessão Expirada":e.message?.includes("invalid_token")?"Token Inválido":e.message?.includes("network")?"Erro de Conexão":"Sessão Expirada"}static getErrorDescription(e){return e.message?.includes("refresh_token")?"Sua sessão expirou. Faça login novamente para continuar.":e.message?.includes("invalid_token")?"Token de acesso inválido. Redirecionando para login...":e.message?.includes("network")?"Problema de conexão. Verifique sua internet e tente novamente.":"Por favor, faça login novamente para continuar."}static async clearAuthData(){try{await I.auth.signOut();const e=[];for(let o=0;o<localStorage.length;o++){const n=localStorage.key(o);n&&(n.startsWith("supabase.")||n.includes("auth"))&&e.push(n)}e.forEach(o=>localStorage.removeItem(o));const s=[];for(let o=0;o<sessionStorage.length;o++){const n=sessionStorage.key(o);n&&(n.startsWith("supabase.")||n.includes("auth"))&&s.push(n)}s.forEach(o=>sessionStorage.removeItem(o))}catch(e){te("Error clearing auth data",{error:e},"AuthErrorHandler")}}static async tryRecoverSession(){try{const{data:{session:e},error:s}=await I.auth.getSession();if(s){if(this.isAuthError(s))return await this.clearAuthData(),!1;throw s}if(!e)return!1;const{error:o}=await I.auth.refreshSession();if(o){if(this.isAuthError(o))return await this.clearAuthData(),!1;throw o}return!0}catch(e){return te("Session recovery failed",{error:e},"AuthErrorHandler"),this.isAuthError(e)&&await this.clearAuthData(),!1}}}function Pa(a={}){const{checkInterval:e=5,preemptiveRefresh:s=10,inactivityTimeout:o=0,enabled:n=!0}=a,u=x.useRef(),f=x.useRef(),d=x.useRef(Date.now()),i=x.useRef(!1),c=async()=>{if(!i.current){i.current=!0;try{const{data:{session:m},error:g}=await I.auth.getSession();if(g){Y.isAuthError(g)&&await Y.handleAuthError(g);return}if(!m)return;const w=m.expires_at,r=Math.floor(Date.now()/1e3),b=w-r,S=s*60;if(b<S){console.log("Token expiring soon, refreshing session...");const{error:_}=await I.auth.refreshSession();_&&Y.isAuthError(_)&&await Y.handleAuthError(_)}}catch(m){console.error("Session monitor error:",m),Y.isAuthError(m)&&await Y.handleAuthError(m)}finally{i.current=!1}}};return x.useEffect(()=>{if(n)return c(),u.current=setInterval(c,e*60*1e3),()=>{u.current&&clearInterval(u.current)}},[n,e,s]),x.useEffect(()=>{if(!n||!o)return;const m=()=>{d.current=Date.now()},g=["mousemove","keydown","click"];return g.forEach(w=>window.addEventListener(w,m)),f.current=setInterval(()=>{Date.now()-d.current>o*60*1e3&&Y.handleAuthError({message:"session_inactive"})},60*1e3),()=>{g.forEach(w=>window.removeEventListener(w,m)),f.current&&clearInterval(f.current)}},[n,o]),{checkSession:c}}function Oa(){return{userAgent:navigator.userAgent,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language,platform:navigator.platform}}const St=x.createContext(void 0),At=()=>{const a=x.useContext(St);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a},ir=({children:a})=>{const[e,s]=x.useState(null),[o,n]=x.useState(null),[u,f]=x.useState(null),[d,i]=x.useState(!0),{inactivityTimeoutMinutes:c}=Te();Pa({enabled:!!u,checkInterval:5,preemptiveRefresh:10,inactivityTimeout:c});const m=async h=>{try{const{data:C,error:y}=await I.from("profiles").select("*").eq("user_id",h).maybeSingle();return y?(te("Error fetching profile",{error:y.message||y},"useAuth"),null):C}catch(C){return te("Error fetching profile in catch",{error:C},"useAuth"),null}},g=async(h,C,y,E)=>{try{const{error:v}=await I.from("audit_logs").insert({email:h,action:C,result:y,table_name:"auth",resource:"authentication",ip_address:null,user_agent:navigator.userAgent,metadata:E||{}});v&&te("Error logging auth attempt",{error:v.message||v},"useAuth")}catch(v){te("Error logging auth attempt in catch",{error:v},"useAuth")}};x.useEffect(()=>{const{data:{subscription:h}}=I.auth.onAuthStateChange(async(y,E)=>{f(E),s(E?.user??null),E?.user?setTimeout(async()=>{try{let v=await m(E.user.id);if(!v&&(v=await Le(E.user),!v)){qe("Profile creation failed during auth state change",{},"Authentication"),n(null),i(!1);return}n(v),i(!1)}catch(v){console.error("Profile error during auth state change:",v),Y.isAuthError(v)?await Y.handleAuthError(v,{showNotification:!1}):te("Profile fetch error",{error:v},"useAuth"),n(null),i(!1)}},0):(n(null),i(!1))});return(async()=>{try{const{data:{session:y},error:E}=await I.auth.getSession();if(E){if(Y.isAuthError(E)){await Y.handleAuthError(E,{showNotification:!1});return}throw E}f(y),s(y?.user??null),y?.user?setTimeout(async()=>{try{let v=await m(y.user.id);if(!v&&(v=await Le(y.user),!v)){qe("Profile creation failed during session init",{},"Authentication"),n(null),i(!1);return}n(v),i(!1)}catch(v){console.error("Profile error during session init:",v),Y.isAuthError(v)?await Y.handleAuthError(v,{showNotification:!1}):te("Profile fetch error in session init",{error:v},"useAuth"),n(null),i(!1)}},0):i(!1)}catch(y){te("Session initialization error",{error:y},"useAuth"),i(!1)}})(),()=>h.unsubscribe()},[]);const w=async(h,C,y,E=!0,v)=>{try{i(!0);const{data:U,error:B}=await I.auth.signInWithPassword({email:h,password:C});if(B)return await g(h,"login","failure",{role:y,error:B.message}),B.message.includes("Invalid login credentials")?{error:{message:"E-mail ou senha incorretos."}}:B.message.includes("Email not confirmed")?{error:{message:"E-mail não confirmado. Verifique sua caixa de entrada."}}:{error:B};if(U.user){const{data:ee}=await I.auth.refreshSession(),J=ee.session??U.session;J&&await I.auth.setSession({access_token:J.access_token,refresh_token:J.refresh_token});const O=Oa();let de=null;0>=70;let me;if(v){const{data:W,error:xe}=await I.from("organizations").select("id").eq("code",v).maybeSingle();if(xe||!W)return await g(h,"login","failure",{role:y,orgCode:v,error:"Invalid org code"}),{error:{message:"Código da organização não encontrado."}};me=W.id}const z=await Le(U.user,y==="ADMIN"?"ADMIN":"ANALYST",me);if(!z)return await g(h,"login","failure",{role:y,error:"Profile creation failed"}),{error:{message:"Não foi possível criar ou recuperar o perfil de usuário. Tente novamente ou contate o suporte."}};if(!z.is_active)return await g(h,"login","failure",{role:y,error:"Account deactivated"}),{error:{message:"Sua conta está desativada. Contate o Administrador."}};if(y==="ADMIN"&&z.role!=="ADMIN")return await g(h,"login","failure",{role:y,error:"Insufficient privileges"}),{error:{message:'Sua conta não possui o perfil Administrador. Tente "Entrar como Escritório" ou contate o responsável.'}};await g(h,"login","success",{role:y,user_role:z.role}),n(z)}return{error:null}}catch(U){return await g(h,"login","failure",{role:y,error:U.message}),{error:U}}finally{i(!1)}},r=async(h,C,y,E)=>{try{i(!0);const{siteUrl:v}=Te(),U=`${v}/login?confirm=1`,{data:B,error:ee}=await I.auth.signUp({email:h,password:C,options:{emailRedirectTo:U,data:{name:y}}});if(ee)return await g(h,"signup","failure",{error:ee.message}),ee.message.includes("User already registered")?{error:{message:"E-mail já cadastrado. Faça login."}}:{error:ee};let J;if(E){const{data:O,error:de}=await I.from("organizations").select("id").eq("code",E).maybeSingle();if(de||!O)return await g(h,"signup","failure",{orgCode:E,error:"Invalid org code"}),{error:{message:"Código da organização não encontrado."}};J=O.id}if(B.user)try{await Le(B.user,"VIEWER",J),await g(h,"signup","success",{})}catch(O){console.error("Profile creation error during signup:",O),await g(h,"signup","partial_success",{message:"User created but profile creation failed"})}else await g(h,"signup","success",{});return{error:null}}catch(v){return await g(h,"signup","failure",{error:v.message}),{error:v}}finally{i(!1)}},b=async()=>{try{await I.auth.signOut(),s(null),n(null),f(null),sessionStorage.removeItem("mfa_verified")}catch(h){te("Error signing out",{error:h},"useAuth")}},S=async h=>{try{const{siteUrl:C}=Te(),{error:y}=await I.auth.resetPasswordForEmail(h,{redirectTo:`${C}/reset-password`});return{error:y}}catch(C){return{error:C}}},_=h=>o?.role===h,P=o?.role==="ADMIN",L={user:e,profile:o,session:u,loading:d,signIn:w,signUp:r,signOut:b,resetPassword:S,hasRole:_,isAdmin:P};return t.jsx(St.Provider,{value:L,children:a})},ne=x.forwardRef(({className:a,type:e,...s},o)=>t.jsx("input",{type:e,className:ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:o,...s}));ne.displayName="Input";class ge extends Error{category;code;context;userMessage;retryable;cause;constructor(e,s,o){super(e),this.name="AssistJurError",this.category=s,this.code=o?.code,this.context=o?.context,this.userMessage=o?.userMessage,this.retryable=o?.retryable??!1,this.cause=o?.cause}}const Ae={validation:(a,e)=>new ge(a,"validation",{userMessage:"Dados inválidos fornecidos",context:e}),network:(a,e=!0,s)=>new ge(a,"network",{userMessage:"Falha de conexão. Verifique sua internet.",retryable:e,context:s}),authentication:(a,e)=>new ge(a,"authentication",{userMessage:"Sessão expirada. Faça login novamente.",context:e}),authorization:(a,e)=>new ge(a,"authorization",{userMessage:"Acesso negado. Verifique suas permissões.",context:e}),business:(a,e,s)=>new ge(a,"business",{userMessage:e||"Operação não permitida",context:s}),system:(a,e)=>new ge(a,"system",{userMessage:"Erro interno do sistema. Tente novamente em alguns minutos.",context:e})};class Ne{static handle(e,s){let o;return e instanceof ge?o=e:e instanceof Error?e.message?.includes("fetch")?o=Ae.network(e.message,!0,{originalError:e.message}):e.message?.includes("auth")||e.message?.includes("session")?o=Ae.authentication(e.message,{originalError:e.message}):o=Ae.system(e.message,{originalError:e.message}):o=Ae.system("Erro desconhecido",{originalError:String(e)}),_e.error(o.message,{category:o.category,code:o.code,context:o.context,retryable:o.retryable,stack:o.stack},s),o}static handleAndNotify(e,s){const o=this.handle(e,s);return o.userMessage&&D.error(o.userMessage),o}}async function lr(a,e,s=!0){try{return await a()}catch(o){throw s?Ne.handleAndNotify(o,e):Ne.handle(o,e)}}function Fa(a){return a!=null}function $a(a){return Fa(a)&&a.trim().length>0}function cr(a){return $a(a)&&a.length>0}async function dr(a,e,s){const{retries:o=2,timeout:n=3e4,fallback:u}=s||{};let f;for(let d=1;d<=o+1;d++)try{const i=new AbortController,c=setTimeout(()=>i.abort(),n),m=await Promise.race([a(),new Promise((g,w)=>i.signal.addEventListener("abort",()=>w(Ae.network("Timeout na requisição",!1))))]);return clearTimeout(c),m}catch(i){if(f=Ne.handle(i,e),!f.retryable||d===o+1)break;const c=Math.min(1e3*Math.pow(2,d-1),5e3);await new Promise(m=>setTimeout(m,c))}if(u!==void 0)return _e.warn(`Usando fallback após ${o+1} tentativas`,{service:e,error:f.message},e),u;throw f}const Ua=Vt,kt=x.forwardRef(({className:a,...e},s)=>t.jsx(ht,{ref:s,className:ce("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...e}));kt.displayName=ht.displayName;const Ge=x.forwardRef(({className:a,...e},s)=>t.jsx(gt,{ref:s,className:ce("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...e}));Ge.displayName=gt.displayName;const Je=x.forwardRef(({className:a,...e},s)=>t.jsx(pt,{ref:s,className:ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...e}));Je.displayName=pt.displayName;const Ke=x.forwardRef(({className:a,...e},s)=>t.jsx(xt,{ref:s,className:ce("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...e,children:t.jsx(Ht,{className:ce("flex items-center justify-center text-current"),children:t.jsx(Yt,{className:"h-4 w-4"})})}));Ke.displayName=xt.displayName;const Ba=bt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ae=x.forwardRef(({className:a,...e},s)=>t.jsx(vt,{ref:s,className:ce(Ba(),a),...e}));ae.displayName=vt.displayName;function za(a,e){const[s,o]=x.useState(a);return x.useEffect(()=>{const n=setTimeout(()=>{o(a)},e);return()=>{clearTimeout(n)}},[a,e]),s}function Va({className:a}){const[e,s]=x.useState(!1);x.useEffect(()=>{const n=()=>s(window.scrollY>600);return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[]);const o=()=>{const n=document.getElementById("main-heading");window.scrollTo({top:0,behavior:"smooth"}),n&&setTimeout(()=>n.focus(),500)};return e?t.jsx(G,{size:"icon","aria-label":"Voltar ao topo",className:ce("fixed bottom-6 right-6 rounded-full shadow-lg z-50",a),onClick:o,children:t.jsx(Wt,{className:"h-5 w-5"})}):null}const ut=({title:a,description:e,children:s})=>t.jsxs(ta,{className:"w-full max-w-md shadow-premium rounded-2xl",children:[t.jsxs(aa,{className:"text-center space-y-4 pb-6",children:[t.jsx("div",{className:"mx-auto p-4 bg-gradient-primary rounded-2xl w-fit shadow-md",children:t.jsx(qt,{className:"h-8 w-8 text-primary-foreground"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ra,{className:"text-2xl font-bold text-foreground",children:a}),e&&t.jsx(sa,{className:"text-muted-foreground",children:e})]})]}),t.jsx(oa,{className:"pt-0",children:s})]}),le={DEFAULT_REDIRECTS:{ADMIN:"/admin/dashboard",ANALYST:"/dados/mapa",VIEWER:"/dados/mapa",DEFAULT:"/dados/mapa"},FEATURES:{MAGIC_LINK_ENABLED:!0,GOOGLE_OAUTH_ENABLED:!0,MICROSOFT_OAUTH_ENABLED:!1},OAUTH_PROVIDERS:[{id:"google",name:"Google",enabled:!0,icon:"google"}],ALLOWED_REDIRECT_PATHS:["/dados/mapa","/admin/dashboard","/admin","/mapa-testemunhas","/import"]};function Ha(a,e){if(e)try{const s=new URL(e,"https://dummy"),o=decodeURIComponent(s.pathname);if(s.origin==="https://dummy"&&le.ALLOWED_REDIRECT_PATHS.includes(o))return decodeURIComponent(e)}catch{}return a&&a in le.DEFAULT_REDIRECTS?le.DEFAULT_REDIRECTS[a]:le.DEFAULT_REDIRECTS.DEFAULT}const Ya=({disabled:a,next:e})=>{const[s,o]=x.useState(null),[n,u]=x.useState({}),f=async(i,c=!1)=>{c||o(i);try{if(le.FEATURES.GOOGLE_OAUTH_ENABLED,!I){D.error("OAuth não configurado",{description:"Login com provedores externos não está disponível no momento."});return}const{siteUrl:m}=Te(),g=e?`${m}${e}`:`${m}/dados/mapa`,{error:w}=await I.auth.signInWithOAuth({provider:i,options:{redirectTo:g}});if(w)throw w;D.success("Redirecionando...",{description:`Conectando com ${i==="google"?"Google":i}`,duration:2e3})}catch(m){if(console.error(`${i} OAuth error:`,m),m.message?.includes("network")||m.message?.includes("fetch")){const g=n[i]||0;g<2?(u(w=>({...w,[i]:g+1})),D.info("Tentando novamente...",{description:`Erro de conexão. Tentativa ${g+2}/3`}),setTimeout(()=>{f(i,!0)},1500)):D.error("Erro de conexão",{description:"Verifique sua conexão com a internet e tente novamente."});return}m.message?.includes("Provider")||m.message?.includes("client_id")?D.error("Configuração OAuth",{description:"Google OAuth não está configurado corretamente. Entre em contato com o suporte."}):I?D.error("Erro no login",{description:"Não foi possível fazer login com Google. Tente novamente."}):D.info("Demo Mode",{description:`OAuth ${i} simulado. Use o usuário demo para testar.`})}finally{o(null)}};return le.OAUTH_PROVIDERS.filter(i=>i.enabled).length===0?null:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("span",{className:"w-full border-t border-border"})}),t.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:t.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou continue com"})})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[t.jsx(G,{variant:"outline",onClick:()=>f("google"),disabled:a||s!==null,className:"w-full transition-all duration-200 hover:shadow-md","aria-label":"Acessar área segura com Google",children:s==="google"?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ce,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{children:"Conectando..."})]}):n.google>0?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Gt,{className:"h-4 w-4"}),t.jsx("span",{children:"Tentando novamente..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24","aria-hidden":"true",children:[t.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),t.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),t.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),t.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),t.jsx("span",{className:"ml-2",children:"Continuar com Google"})]})}),le.FEATURES.MICROSOFT_OAUTH_ENABLED]})]})},De=12;function ke({message:a,onRetry:e}){return t.jsxs(yt,{variant:"destructive",role:"alert","aria-live":"polite",className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx(Nt,{children:"Erro"}),t.jsx(Et,{children:a})]}),e&&t.jsx(G,{variant:"outline",onClick:e,className:"ml-4","aria-label":"Tentar novamente",children:"Tentar novamente"})]})}function Wa(a){const{loading:e,error:s,data:o}=a,[n,u]=x.useState(!navigator.onLine);return x.useEffect(()=>{const f=()=>u(!1),d=()=>u(!0);return window.addEventListener("online",f),window.addEventListener("offline",d),()=>{window.removeEventListener("online",f),window.removeEventListener("offline",d)}},[]),n?"offline":e?"loading":s?"error":!o||Array.isArray(o)&&o.length===0?"empty":"success"}const H={INVALID_EMAIL:"E-mail inválido.",INCORRECT_PASSWORD:"Senha incorreta.",CNJ_FAILURE:"Falha ao buscar dados do CNJ.",NOT_FOUND:"Item não encontrado.",NETWORK:"Falha de conexão. Verifique sua internet.",RATE_LIMIT:"Muitas tentativas. Tente novamente mais tarde."},qa=Xe({email:pe().email(H.INVALID_EMAIL),password:pe().min(De,`Mínimo de ${De} caracteres`),rememberMe:jt().optional()}),Ga=Xe({name:pe().min(2,"Nome deve ter pelo menos 2 caracteres").optional(),email:pe().email(H.INVALID_EMAIL),password:pe().min(De,`Mínimo de ${De} caracteres`),confirmPassword:pe(),acceptTerms:jt().refine(a=>a,"Você deve aceitar os termos")}).refine(a=>a.password===a.confirmPassword,{message:"Senhas não conferem",path:["confirmPassword"]}),mt=({mode:a,onModeChange:e})=>{const[s,o]=x.useState(!1),[n,u]=x.useState(!1),[f,d]=x.useState(!1),[i,c]=x.useState(null),{signIn:m,signUp:g}=At(),w=Wa({loading:f,error:i,data:null}),r=He({resolver:Ye(qa),mode:"onChange",reValidateMode:"onChange",defaultValues:{email:"",password:"",rememberMe:!1}}),b=He({resolver:Ye(Ga),defaultValues:{name:"",email:"",password:"",confirmPassword:"",acceptTerms:!1}}),S=async P=>{d(!0),c(null);try{const{error:L}=await m(P.email,P.password,"OFFICE",P.rememberMe);if(L){if(L?.status===429){const h=H.RATE_LIMIT;c(h),D.error("Muitas tentativas",{description:h});return}if(L.message?.toLowerCase().includes("invalid login credentials")){const h=H.INCORRECT_PASSWORD;r.setError("password",{type:"manual",message:h}),c(h);return}c(L.message||H.NOT_FOUND);return}D.success("Login realizado!",{description:"Bem-vindo ao AssistJur.IA"})}catch(L){const C=Ne.handleAndNotify(L,"EmailPasswordForm.handleSignIn").userMessage||H.NOT_FOUND;c(C)}finally{d(!1)}},_=async P=>{d(!0),c(null);try{const{error:L}=await g(P.email,P.password,P.name);if(L){if(L?.status===429){const C=H.RATE_LIMIT;c(C),D.error("Muitas tentativas",{description:C});return}const h=L.message||H.NOT_FOUND;c(h),D.error("Erro no cadastro",{description:h});return}D.success("Conta criada!",{description:"Verifique seu e-mail para confirmar o cadastro."}),e("signin")}catch(L){const h=L?.message||H.NOT_FOUND;c(h),D.error("Erro no cadastro",{description:h})}finally{d(!1)}};return a==="signup"?t.jsxs("form",{onSubmit:b.handleSubmit(_),className:"space-y-4",children:[w==="offline"&&t.jsx(ke,{message:H.NETWORK,onRetry:()=>window.location.reload()}),w==="error"&&i&&t.jsx(ke,{message:i,onRetry:()=>c(null)}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ae,{htmlFor:"name",children:"Nome (opcional)"}),t.jsx(ne,{id:"name",placeholder:"Seu nome completo",...b.register("name"),className:b.formState.errors.name?"border-destructive":""}),b.formState.errors.name&&t.jsx("p",{className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:b.formState.errors.name.message})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ae,{htmlFor:"email",children:"E-mail"}),t.jsx(ne,{id:"email",type:"email",placeholder:"seu@email.com",...b.register("email"),className:b.formState.errors.email?"border-destructive":""}),b.formState.errors.email&&t.jsx("p",{className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:b.formState.errors.email.message})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ae,{htmlFor:"password",children:"Senha"}),t.jsxs("div",{className:"relative",children:[t.jsx(ne,{id:"password",type:s?"text":"password",placeholder:"••••••••","aria-invalid":!!b.formState.errors.password,"aria-describedby":"signup-password-error",...b.register("password"),className:b.formState.errors.password?"border-destructive pr-10":"pr-10"}),t.jsx(G,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>o(!s),"aria-label":s?"Ocultar senha":"Mostrar senha","aria-pressed":s,children:s?t.jsx(ze,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true",focusable:"false"}):t.jsx(Ve,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true",focusable:"false"})})]}),b.formState.errors.password&&t.jsx("p",{id:"signup-password-error",className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:b.formState.errors.password.message})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ae,{htmlFor:"confirmPassword",children:"Confirmar Senha"}),t.jsxs("div",{className:"relative",children:[t.jsx(ne,{id:"confirmPassword",type:n?"text":"password",placeholder:"••••••••","aria-invalid":!!b.formState.errors.confirmPassword,"aria-describedby":"signup-confirm-password-error",...b.register("confirmPassword"),className:b.formState.errors.confirmPassword?"border-destructive pr-10":"pr-10"}),t.jsx(G,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>u(!n),"aria-label":n?"Ocultar senha":"Mostrar senha","aria-pressed":n,children:n?t.jsx(ze,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true",focusable:"false"}):t.jsx(Ve,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true",focusable:"false"})})]}),b.formState.errors.confirmPassword&&t.jsx("p",{id:"signup-confirm-password-error",className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:b.formState.errors.confirmPassword.message})]}),t.jsxs("div",{className:"flex items-start space-x-3 pt-2",children:[t.jsx(Ke,{id:"acceptTerms",checked:b.watch("acceptTerms"),onCheckedChange:P=>b.setValue("acceptTerms",!!P),className:b.formState.errors.acceptTerms?"border-destructive":""}),t.jsxs(ae,{htmlFor:"acceptTerms",className:"text-sm leading-relaxed cursor-pointer",children:["Li e aceito os"," ",t.jsx(ie,{to:"/termos",className:"text-primary hover:underline",children:"Termos de Uso"})," ","e a"," ",t.jsx(ie,{to:"/privacidade",className:"text-primary hover:underline",children:"Política de Privacidade"})]})]}),b.formState.errors.acceptTerms&&t.jsx("p",{className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:b.formState.errors.acceptTerms.message}),t.jsx(G,{type:"submit",className:"w-full",disabled:f,children:f?t.jsxs(t.Fragment,{children:[t.jsx(Ce,{className:"h-4 w-4 animate-spin mr-2"}),"Criando conta..."]}):"Criar conta"}),t.jsxs("div",{className:"text-center text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:"Já tem uma conta? "}),t.jsx("button",{type:"button",onClick:()=>e("signin"),className:"text-primary hover:underline font-medium",children:"Acessar área segura"})]})]}):t.jsxs("form",{onSubmit:r.handleSubmit(S),className:"space-y-4",children:[w==="offline"&&t.jsx(ke,{message:H.NETWORK,onRetry:()=>window.location.reload()}),w==="error"&&i&&t.jsx(ke,{message:i,onRetry:()=>c(null)}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ae,{htmlFor:"email",children:"E-mail"}),t.jsx(ne,{id:"email",type:"email",placeholder:"seu@email.com",...r.register("email"),className:r.formState.errors.email?"border-destructive":""}),r.formState.errors.email&&t.jsx("p",{className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:r.formState.errors.email.message})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ae,{htmlFor:"password",children:"Senha"}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(ne,{id:"password",type:s?"text":"password",placeholder:"••••••••","aria-invalid":!!r.formState.errors.password,"aria-describedby":r.formState.errors.password?"password-help":void 0,...r.register("password"),className:r.formState.errors.password?"border-destructive pr-10":"pr-10"}),t.jsx(G,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>o(!s),"aria-label":s?"Ocultar senha":"Mostrar senha","aria-pressed":s,children:s?t.jsx(ze,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true",focusable:"false"}):t.jsx(Ve,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true",focusable:"false"})})]}),r.formState.errors.password&&t.jsx("span",{id:"password-help",role:"alert",className:"text-sm text-destructive whitespace-nowrap",children:r.formState.errors.password.message})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ke,{id:"rememberMe",checked:r.watch("rememberMe"),onCheckedChange:P=>r.setValue("rememberMe",!!P)}),t.jsx(ae,{htmlFor:"rememberMe",className:"text-sm cursor-pointer",children:"Lembrar de mim"})]}),t.jsx(ie,{to:"/reset",className:"text-sm text-primary hover:underline",children:"Esqueci minha senha"})]}),t.jsx(G,{type:"submit",className:"w-full",disabled:f||!r.formState.isValid,children:f?t.jsxs(t.Fragment,{children:[t.jsx(Ce,{className:"h-4 w-4 animate-spin mr-2"}),"Acessando..."]}):"Acessar área segura"}),t.jsxs("div",{className:"text-center text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:"Não tem uma conta? "}),t.jsx("button",{type:"button",onClick:()=>e("signup"),className:"text-primary hover:underline font-medium",children:"Criar conta"})]})]})},Ja=Xe({email:pe().email("Formato de email inválido")}),Ka=({onBack:a})=>{const[e,s]=x.useState(!1),[o,n]=x.useState(!1),[u,f]=x.useState(null),d=He({resolver:Ye(Ja),mode:"onChange",reValidateMode:"onChange",defaultValues:{email:""}});za(d.watch("email"),500);const i=x.useCallback(async m=>{const g=Date.now();if(u&&g-u<6e4){D.error("Aguarde um momento",{description:"Aguarde pelo menos 1 minuto entre tentativas."});return}s(!0),f(g);try{if(!I){D.success("Link enviado!",{description:"Verifique seu e-mail (modo demo - use o login normal)"}),n(!0);return}const{siteUrl:w}=Te(),{error:r}=await I.auth.signInWithOtp({email:m.email,options:{emailRedirectTo:`${w}/`}});if(r){const b=Ne.handle(r,"MagicLinkForm.signInWithOtp");r.message.includes("rate")||r.message.includes("limit")||r?.status===429?D.error("Limite de tentativas atingido",{description:"Muitas tentativas de login. Tente novamente em alguns minutos."}):r.message.includes("email")?D.error("Email inválido",{description:"Verifique se o email foi digitado corretamente."}):D.error("Erro ao enviar link",{description:b.userMessage||"Não foi possível enviar o link de acesso. Tente novamente."});return}D.success("Link de acesso enviado!",{description:"Verifique sua caixa de entrada e clique no link para entrar."}),n(!0)}catch(w){Ne.handleAndNotify(w,"MagicLinkForm.handleSendMagicLink"),w?.status===429&&D.error("Muitas tentativas",{description:"Tente novamente mais tarde."})}finally{s(!1)}},[u]),c=()=>{n(!1),d.handleSubmit(i)()};return o?t.jsxs("div",{className:"text-center space-y-6",role:"alert","aria-live":"polite",children:[t.jsx("div",{className:"mx-auto p-3 bg-success/10 rounded-full w-fit",children:t.jsx(wt,{className:"h-8 w-8 text-success"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Link enviado!"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Verifique sua caixa de entrada e clique no link para fazer login automaticamente."}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Enviado para: ",t.jsx("strong",{children:d.getValues("email")})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(G,{variant:"outline",onClick:c,className:"w-full",disabled:e,children:e?t.jsxs(t.Fragment,{children:[t.jsx(Ce,{className:"h-4 w-4 animate-spin mr-2"}),"Reenviando..."]}):"Reenviar link"}),t.jsxs(G,{variant:"ghost",onClick:a,className:"w-full",children:[t.jsx(nt,{className:"h-4 w-4 mr-2"}),"Voltar ao login"]})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("div",{className:"mx-auto p-3 bg-primary/10 rounded-full w-fit",children:t.jsx(it,{className:"h-6 w-6 text-primary"})}),t.jsx("h3",{className:"text-lg font-semibold",children:"Acessar área segura com link"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Enviaremos um link de acesso seguro para o seu e-mail"})]}),t.jsxs("form",{onSubmit:d.handleSubmit(i),className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(ae,{htmlFor:"email",children:"E-mail"}),t.jsx(ne,{id:"email",type:"email",placeholder:"seu@email.com",...d.register("email"),className:d.formState.errors.email?"border-destructive":"",autoFocus:!0}),d.formState.errors.email&&t.jsx("p",{className:"text-sm text-destructive",role:"alert","aria-live":"polite",children:d.formState.errors.email.message})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(G,{type:"submit",className:"w-full",disabled:e,children:e?t.jsxs(t.Fragment,{children:[t.jsx(Ce,{className:"h-4 w-4 animate-spin mr-2"}),"Enviando link..."]}):t.jsxs(t.Fragment,{children:[t.jsx(it,{className:"h-4 w-4 mr-2"}),"Enviar link de acesso"]})}),t.jsxs(G,{type:"button",variant:"ghost",onClick:a,className:"w-full",children:[t.jsx(nt,{className:"h-4 w-4 mr-2"}),"Voltar ao login"]})]})]}),t.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"O link de acesso expira em 1 hora e só pode ser usado uma vez."})]})},Xa=bt("border-l-4",{variants:{variant:{info:"border-l-blue-500 bg-blue-50 dark:bg-blue-950/30",success:"border-l-green-500 bg-green-50 dark:bg-green-950/30",warning:"border-l-yellow-500 bg-yellow-50 dark:bg-yellow-950/30",error:"border-l-red-500 bg-red-50 dark:bg-red-950/30"}}}),Za=({variant:a,title:e,children:s,className:o})=>{const n=()=>{switch(a){case"info":return t.jsx(Xt,{className:"h-4 w-4"});case"success":return t.jsx(wt,{className:"h-4 w-4"});case"warning":return t.jsx(Kt,{className:"h-4 w-4"});case"error":return t.jsx(Jt,{className:"h-4 w-4"})}},u=()=>{switch(a){case"info":return"text-blue-700 dark:text-blue-300";case"success":return"text-green-700 dark:text-green-300";case"warning":return"text-yellow-700 dark:text-yellow-300";case"error":return"text-red-700 dark:text-red-300"}};return t.jsxs(yt,{className:`${Xa({variant:a})} ${o}`,role:"alert","aria-live":"polite",children:[t.jsx("div",{className:u(),children:n()}),e&&t.jsx(Nt,{className:u(),children:e}),t.jsx(Et,{className:u(),children:s})]})};function ft({size:a="md",showVersion:e=!1,version:s,className:o=""}){const u={sm:{container:"flex items-center gap-2",logo:"h-6 w-6",title:"text-lg font-semibold",version:"text-xs"},md:{container:"flex items-center gap-3",logo:"h-8 w-8",title:"text-xl font-bold",version:"text-sm"},lg:{container:"flex items-center gap-4",logo:"h-10 w-10",title:"text-2xl font-bold",version:"text-base"}}[a];return t.jsxs("div",{className:`${u.container} ${o}`,children:[t.jsx(na,{size:a,className:u.logo}),t.jsxs("div",{children:[t.jsx("h1",{className:`${u.title} text-brand-ink`,children:ia.name}),e&&s&&t.jsxs("span",{className:`${u.version} text-muted-foreground font-mono`,children:["v",s]})]})]})}const Qa="https://placehold.co/1600x900/000000/FFFFFF.avif?text=AssistJur",er="https://placehold.co/1600x900/000000/FFFFFF.webp?text=AssistJur",tr="https://placehold.co/1600x900/000000/FFFFFF.jpg?text=AssistJur",ar=()=>{const a=Zt(),[e]=Qt(),{user:s,profile:o}=At(),[n,u]=x.useState("signin"),[f,d]=x.useState(!1);x.useEffect(()=>{if(window.location.hash.includes("access_token")){const r=window.location.pathname+window.location.search;window.history.replaceState(null,"",r)}},[]);const i=e.get("next"),c=e.get("confirm"),m=e.get("error");x.useEffect(()=>{if(s&&o)if(o.two_factor_enabled&&sessionStorage.getItem("mfa_verified")!=="true"){const r=new URLSearchParams;r.set("email",s.email??""),i&&r.set("next",i),a(`/verify-otp?${r.toString()}`)}else{const r=Ha(o.role,i);a(r)}},[s,o,a,i]);const g=()=>{d(!f)},w=r=>{u(r),d(!1)};return t.jsxs("div",{className:"min-h-screen bg-gradient-subtle lg:grid lg:grid-cols-2",children:[t.jsxs("div",{className:"sr-only",children:[t.jsx("h1",{id:"main-heading",tabIndex:-1,children:"Login - AssistJur.IA"}),t.jsx("p",{children:"Acesse sua conta do AssistJur.IA para análise avançada de testemunhas com conformidade LGPD"})]}),t.jsx("div",{className:"flex flex-col justify-center px-6 py-12 lg:px-8",children:t.jsxs("div",{className:"mx-auto w-full max-w-md",children:[t.jsx("nav",{"aria-label":"breadcrumb",className:"mb-4 text-sm",children:t.jsxs("ol",{className:"flex items-center text-muted-foreground",children:[t.jsx("li",{children:t.jsx(ie,{to:"/",className:"text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-sm",children:"AssistJur IA"})}),t.jsx("li",{"aria-hidden":"true",className:"mx-2",children:"›"}),t.jsx("li",{children:t.jsx(ie,{to:"/login","aria-current":"page",className:"focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-sm",children:"Login"})})]})}),t.jsx("div",{className:"flex items-center justify-center mb-8 lg:hidden",children:t.jsx(ft,{size:"lg",className:"gap-3"})}),m&&t.jsx("div",{className:"mb-6",children:t.jsx(ke,{message:m==="access_denied"?H.INCORRECT_PASSWORD:H.NOT_FOUND,onRetry:()=>window.location.reload()})}),c==="1"&&t.jsx("div",{className:"mb-6",children:t.jsx(Za,{variant:"info",title:"Confirme seu cadastro",children:"Verifique seu e-mail e clique no link de confirmação para ativar sua conta."})}),f&&le.FEATURES.MAGIC_LINK_ENABLED?t.jsx(ut,{title:"Acessar área segura com link",description:"Acesso seguro sem senha",children:t.jsx(Ka,{onBack:()=>d(!1)})}):t.jsx(ut,{title:n==="signin"?"Acesse sua conta":"Comece gratuitamente",description:"Acesso seguro e conformidade LGPD",children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(Ya,{next:i}),t.jsxs(Ua,{value:n,onValueChange:r=>u(r),className:"w-full",children:[t.jsxs(kt,{className:"grid w-full grid-cols-2",role:"tablist",children:[t.jsx(Ge,{value:"signin",role:"tab","aria-selected":n==="signin","aria-controls":"signin-panel",children:"Acessar área segura"}),t.jsx(Ge,{value:"signup",role:"tab","aria-selected":n==="signup","aria-controls":"signup-panel",children:"Criar conta"})]}),t.jsxs(Je,{value:"signin",className:"mt-6",role:"tabpanel",id:"signin-panel","aria-labelledby":"signin-tab",children:[t.jsx(mt,{mode:"signin",onModeChange:w}),t.jsx("div",{className:"mt-4 text-center",children:t.jsx("button",{type:"button",onClick:g,className:"text-sm text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-sm px-1 py-0.5","aria-label":"Alternar para acesso com link de e-mail",children:"Acessar área segura com link de e-mail"})})]}),t.jsx(Je,{value:"signup",className:"mt-6",role:"tabpanel",id:"signup-panel","aria-labelledby":"signup-tab",children:t.jsx(mt,{mode:"signup",onModeChange:w})})]})]})}),t.jsx("footer",{className:"mt-8 text-center",children:t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Dados tratados conforme"," ",t.jsx(ie,{to:"/lgpd",className:"text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-sm px-1",children:"LGPD"})," • ",t.jsx(ie,{to:"/privacidade",className:"text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-sm px-1",children:"Política de Privacidade"})," • ",t.jsx(ie,{to:"/termos",className:"text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-sm px-1",children:"Termos"})]})})]})}),t.jsx(Va,{className:"bottom-24"}),t.jsx("aside",{className:"hidden lg:block relative",role:"complementary",children:t.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`linear-gradient(135deg, hsl(var(--primary) / 0.9), hsl(var(--primary-light) / 0.8)), image-set(url(${Qa}) type('image/avif'), url(${er}) type('image/webp'), url(${tr}) type('image/jpeg'))`},role:"img","aria-label":"Imagem de fundo mostrando tecnologia jurídica",children:t.jsxs("div",{className:"absolute inset-0 flex flex-col justify-center p-12 text-primary-foreground",children:[t.jsx(ft,{size:"lg",className:"mb-12 gap-3"}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("h4",{className:"text-4xl font-bold leading-tight",children:"Análise avançada de testemunhas com LGPD by design"}),t.jsx("p",{className:"text-xl opacity-90 leading-relaxed",children:"Detecte padrões suspeitos, triangulações e provas emprestadas com total conformidade às normas de proteção de dados."}),t.jsxs("ul",{className:"space-y-3 pt-8",role:"list",children:[t.jsxs("li",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-2 h-2 bg-primary-foreground rounded-full","aria-hidden":"true"}),t.jsx("span",{children:"Mascaramento automático de PII"})]}),t.jsxs("li",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-2 h-2 bg-primary-foreground rounded-full","aria-hidden":"true"}),t.jsx("span",{children:"Trilha de auditoria completa"})]}),t.jsxs("li",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-2 h-2 bg-primary-foreground rounded-full","aria-hidden":"true"}),t.jsx("span",{children:"Criptografia end-to-end"})]})]})]})]})})})]})},ur=Object.freeze(Object.defineProperty({__proto__:null,default:ar},Symbol.toStringTag,{value:"Module"}));export{or as $,ut as A,Va as B,Ke as C,H as E,ne as I,ae as L,De as M,Ua as T,At as a,za as b,kt as c,Ge as d,Je as e,ft as f,Za as g,Ne as h,cr as i,Ae as j,dr as k,_e as l,nr as m,Da as n,ir as o,ur as p,D as u,lr as w};
